<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>How to use JDK without JRE in Java 11</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>How to use JDK without JRE in Java 11</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>68</span>
    </div>
    <div>
     <span>Asker: </span> <span>Maha Lak</span>
    </div>
    <div>
     <span>Asked: </span> <span>1 Oct 2018 at 05:11</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/52584888/how-to-use-jdk-without-jre-in-java-11">source</a>
    </div>
   </div>
   <div>
    <p>We are planning to migrate our Java 8 project to use Java 11. But I noticed that Java 11 doesn't have a JRE folder.</p>
    <p>In Java 9 and Java 10, folder structures are changed i.e. <code>java\jdk1.x</code> or <code>java\jre1.x</code>, where <code>x</code> is Java 9 or 10.</p>
    <p>But in Java 11, I am getting only one folder, i.e. <code>java\jdk-11</code>. How will my client use my application without <em>jre</em>?</p>
    <p>What I understood is that Java 11 is enforcing to modularize our application, and using jlink is needed to create our own jre to run the application in client.</p>
    <p>Is my understanding correct?</p>
   </div>
   <div class="tags">
    <span class="tag">java</span><span class="tag">java-8</span><span class="tag">migration</span><span class="tag">java-11</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td>5</td>
       <td><span>The directory structure of Java 9+ is different, but it has full JRE functionality. For instance, you can see that the JDK includes a bin/java executable (or bin/java.exe).</span> <span> - </span> <span class="display-name">VGR</span> <span> </span> <span class="date">1 Oct 2018 at 05:19</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>In java9 or java10 installation i get two folders java\jdk1.10 and java\jre1.10. But in java11 i will have only one folder i.e java\jdk-11. I agree with you but for java11 there is no jre folder.</span> <span> - </span> <span class="display-name">Maha Lak</span> <span> </span> <span class="date">1 Oct 2018 at 05:32</span></td>
      </tr>
      <tr>
       <td>7</td>
       <td><span>See the documentation: <a href="https://docs.oracle.com/en/java/javase/11/migrate/index.html#JSMIG-GUID-954372A5-5954-4075-A1AF-6A9168371246" rel="nofollow noreferrer">Oracle JDK Migration Guide - Deployment</a>. You are not forced to use the module system.</span> <span> - </span> <span class="display-name">Jesper</span> <span> </span> <span class="date">1 Oct 2018 at 06:15</span></td>
      </tr>
      <tr>
       <td>4</td>
       <td><span>JEP 220 and the JDK 9 release notes (specifically <a href="https://www.oracle.com/technetwork/java/javase/9-relnote-issues-3704069.html#JDK-8049367" rel="nofollow noreferrer">oracle.com/technetwork/java/javase/…</a>) have all the details on the changes to the structure of the run-time image.</span> <span> - </span> <span class="display-name">Alan Bateman</span> <span> </span> <span class="date">1 Oct 2018 at 07:50</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>Thanks Jesper. I got it. So client need to install jdk to use java application?</span> <span> - </span> <span class="display-name">Maha Lak</span> <span> </span> <span class="date">1 Oct 2018 at 07:50</span></td>
      </tr>
      <tr>
       <td>6</td>
       <td><span>@feelingunwelcome why was it closed as off-topic? It does not seem to ask for an off-site resource, but only how to use the JDK without JRE.</span> <span> - </span> <span class="display-name">Didier L</span> <span> </span> <span class="date">1 Oct 2018 at 11:07</span></td>
      </tr>
      <tr>
       <td>3</td>
       <td><span>Similar: <a href="https://stackoverflow.com/q/53111921/642706"><i>How to get java 11 run-time environment working since there is no more jre 11 for download?</i></a></span> <span> - </span> <span class="display-name">Basil Bourque</span> <span> </span> <span class="date">17 Feb 2019 at 20:48</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>See also: <a href="https://apple.stackexchange.com/q/346195/17907"><i>Obtain Java 11 for macOS?</i></a>.</span> <span> - </span> <span class="display-name">Basil Bourque</span> <span> </span> <span class="date">3 Mar 2019 at 05:47</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>97</span>
     </div>
     <div>
      <span>Answerer: </span> <span>jwenting</span>
     </div>
     <div>
      <span> Answered: </span> <span>1 Oct 2018 at 07:46</span>
     </div>
    </div>
    <div>
     <p>For 20 years, the JDK shipped with a JRE which was just a subset of its functionality installed in a different directory on your system.</p>
     <p>In fact, it shipped with TWO identical JREs, one installed inside the JDK installation directory and one outside it.</p>
     <p>This has always puzzled me as it's a complete waste of effort on the part of the maintainers to make this so, and a complete waste of disk space on the computer you install it on, as that JRE just duplicates some of the things the JDK can do already.</p>
     <p>Finally, with Java 11, Oracle and the OpenJDK team decided to end this silliness and just distribute a single thing, the JDK. This JDK when installed is actually smaller on your hard disk than the old JRE alone used to be, removing even the somewhat valid argument that you'd want a separate JRE for devices with limited disk space, an argument that never explained why 2 JREs would be installed with a single JDK in the first place but was made to justify the need for a JRE as a stripped down runtime environment for the JDK.</p>
     <p>Ergo, there is no need for a separate JRE, and there hasn't been one for a long time, let alone for including and forcibly installing it as part of the JDK installation.</p>
     <p>And no, you don't need to create your own JRE. Just install the OpenJDK on the client machines and make sure you add the $JAVA_HOME/bin to the system path, just as you had to do with old JREs.</p>
     <p>And oh, strip the Windows directory tree of any java*.exe files which some versions of the old JRE installer were wont to place there, as well as the system path which also had some weird entries added by some JRE installers.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>10</td>
        <td><span>In earlier versions, a jdk could get installed anywhere whereas the “public jre” had to be installed on the boot partition. That was purely a restriction invented by Sun, as actually, the registration of browser plugins or the control panel did not require this. Later version lifted the restriction, but still installed the “public jre” as a separate jre (I always turned this option off anyway). Nowadays, these features are gone, so the unnecessary thing has become even more unnecessary. Afaik, you can still create a JRE from the JDK via jlink, which boils down to removing development modules.</span> <span> - </span> <span class="display-name">Holger</span> <span> </span> <span class="date">1 Oct 2018 at 14:06</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>@Holger good point. And even weirder is that Sun installed that JRE by default under "c:\program files" on Windows while it wouldn't work properly if installed in a directory with spaces in the name :)</span> <span> - </span> <span class="display-name">jwenting</span> <span> </span> <span class="date">2 Oct 2018 at 05:25</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>So... no more <code>JRE_HOME</code> environment variable ?</span> <span> - </span> <span class="display-name">David Ferreira</span> <span> </span> <span class="date">18 Oct 2018 at 00:24</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Exactly! No need of separate JRE Installation and so no need of JRE_HOME environment variable.</span> <span> - </span> <span class="display-name">Pratik Patil</span> <span> </span> <span class="date">21 Oct 2018 at 18:45</span></td>
       </tr>
       <tr>
        <td>9</td>
        <td><span>I think the actual reason why JRE is no more available is because from Java 9 (the module system), applications are expected to ship as a self-contained piece instead of relying on an externally available JRE.</span> <span> - </span> <span class="display-name">Codebender</span> <span> </span> <span class="date">25 Oct 2018 at 16:40</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@Codebender yet the distribution license for the JDK is such that you're not allowed to distribute it...</span> <span> - </span> <span class="display-name">jwenting</span> <span> </span> <span class="date">12 Nov 2018 at 04:58</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>The AdoptOpenJDK project provides both JRE and JDK downloads for Java 11: <a href="https://adoptopenjdk.net/releases.html?variant=openjdk11#x64_win" rel="nofollow noreferrer">adoptopenjdk.net/releases.html?variant=openjdk11#x64_win</a> (see @matsonkepson's answer). Is this more "silliness"?</span> <span> - </span> <span class="display-name">mzjn</span> <span> </span> <span class="date">18 Dec 2018 at 12:05</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>This answer can be summed up by the last two paragraphs of... interesting advice. Install a compiler into production and remove binaries from your customer machines at your own risk.</span> <span> - </span> <span class="display-name">Cypher</span> <span> </span> <span class="date">26 Feb 2019 at 00:04</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>For an answer with so many up-votes, it is completely wrong. The problem with installing the whole jdk is primarily security -- you increase your attack-surface by including the compiler. Also, you add other modules, such as java.desktop, that you don't use in server-based microservices and so which also increase the attack-surface. This is a bad idea. You should use jlink, no matter how difficult, to create a custom jre, as is the intent of modularisation.</span> <span> - </span> <span class="display-name">Software Engineer</span> <span> </span> <span class="date">10 Oct 2020 at 15:14</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@SoftwareEngineer nope, that's part of the reason. They took out the included JRE because it was useless. And that was the question.</span> <span> - </span> <span class="display-name">jwenting</span> <span> </span> <span class="date">11 Oct 2020 at 12:55</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@jwenting - the jre isn't useless. They took out the default because a jre with all modules enabled by default is useless. The intent is that you create your own jre with minimal modules using link. Using the jdk instead is a security flaw.</span> <span> - </span> <span class="display-name">Software Engineer</span> <span> </span> <span class="date">11 Oct 2020 at 14:36</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">↑</a> </span> <span class="arrow"> <a href="#answer_3">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>44</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Basil Bourque</span>
     </div>
     <div>
      <span> Answered: </span> <span>17 Feb 2019 at 21:02</span>
     </div>
    </div>
    <div>
     <h1>tl;dr</h1>
     <blockquote>
      <p>How will my client use my application without jre?</p>
     </blockquote>
     <p>➥ Bundle a Java implementation within your Java-based app.</p>
     <p>Learn about:</p>
     <ul>
      <li><a href="https://en.wikipedia.org/wiki/Java_Platform_Module_System" rel="noreferrer"><em>Java Platform Module System</em></a></li>
      <li><em>jlink</em> (<a href="https://openjdk.java.net/jeps/282" rel="noreferrer">JEP 282</a>)</li>
      <li><em>jpackage</em> (<a href="https://openjdk.java.net/jeps/343" rel="noreferrer">JEP 343</a>)</li>
     </ul>
     <h1>Details</h1>
     <blockquote>
      <p>What I understood is that Java 11 is enforcing to modularize our application</p>
     </blockquote>
     <p>No, modularization is not required, strictly speaking. Most existing apps can run as-is in Java 11. You can continue to develop in Java 11 without modularizing your code. But in your case, for a GUI desktop or mobile app, then you need to package a JVM within your app. Modularizing and using <em>jlink</em> tooling is probably the best way to go about that. In contrast a server-side Servlet-based app or Microservices server need not yet modularize, though likely a good idea to do so eventually.</p>
     <blockquote>
      <p>I noticed that Java 11 doesn't have a JRE folder.</p>
     </blockquote>
     <p>Oracle no longer intends for end-users to be installing a JRE or a JDK. <a href="https://en.wikipedia.org/wiki/Java_applet" rel="noreferrer">Java Applets</a> in a browser and <a href="https://en.wikipedia.org/wiki/Java_Web_Start" rel="noreferrer">Java Web Start</a> app delivery are both being phased out, leaving the end-user with no need for a JRE. Java-based apps are expected to bundle their own Java implementation. The only folks consciously installing a JDK will be developers &amp; server-side sysadmins.</p>
     <p>Some folks are disappointed to see the passing of the <em>Java Everywhere</em> dream. And they may be annoyed to have to make a build of their app for every host OS (macOS, Linux, Windows, etc.). On the other hand, some developers are happy to be bundling a Java implementation (now smaller than ever) with their app, as that eliminates the hassle for the end-user to download-install-update a system-wide Java implementation. Also eliminates wrestling with corporate IT departments to install Java on users’ PCs. And bundling Java with app simplifies testing and support, as you know and control exactly what version and distribution of Java is involved. By the way, this bundling-Java-with-app is not exactly new: It has been supported by Apple for many years in the macOS &amp; iOS app stores.</p>
     <p>Important:</p>
     <ul>
      <li>Understand clearly the nature of the <a href="http://openjdk.java.net" rel="noreferrer">OpenJDK</a> project, as <a href="https://en.wikipedia.org/wiki/OpenJDK" rel="noreferrer">explained in Wikipedia</a></li>
      <li>Read this white paper by Oracle of 2018-03, <a href="https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdate2018mar-4414431.pdf" rel="noreferrer"><em>Java Client Roadmap Update</em></a></li>
      <li>Read the white paper <a href="https://stackoverflow.com/a/53112096/642706"><em>Java Is Still Free</em></a>, authored by key members of the Java community.</li>
     </ul>
     <p>Here is a flowchart diagram that may help you finding and deciding amongst the various vendors providing a Java 11 implementation.</p>
     <p><a href="https://i.stack.imgur.com/P4Gmt.png" rel="noreferrer"><img src="P4Gmt.png" alt="Flowchart guiding you in choosing a vendor for a Java 11 implementation"></a></p>
     <hr>
     <p><a href="https://i.stack.imgur.com/unKsY.png" rel="noreferrer"><img src="unKsY.png" alt="Motivations in choosing a vendor for Java"></a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>1</td>
        <td><span>Tying together what you wrote and what jwenting wrote, my understanding of Oracle's vision is: End users need one copy of a Java runtime installed as a part of each and every Java application they want to execute. And developers need to ship a separate installer of their application for each non-server platform they want their application to be able to run on; the installation includes both their application and a Java runtime. The RA (run anywhere) part of WORA is now more difficult than previously.</span> <span> - </span> <span class="display-name">Pixelstix</span> <span> </span> <span class="date">26 Apr 2019 at 20:43</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>@Pixelstix Correct, except for the last sentence. Some developers are happy to be bundling a Java implementation (now smaller than ever) with their app, as that eliminates the hassle for the end-user to download-install-update a system-wide Java implementation. Also eliminates getting corporate IT depts to install Java. And bundling Java with app simplifies testing and support, as you know and control exactly what version and distribution of Java is involved. By the way, this bundling-Java-with-app is not exactly new: It has been supported by Apple for many years in the macOS &amp; iOS app stores.</span> <span> - </span> <span class="display-name">Basil Bourque</span> <span> </span> <span class="date">26 Apr 2019 at 21:07</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Granted things are easier from an enterprise point of view, especially if you assume an app store model of updates. The developer would IMO be ethically obliged to release new versions of their application just to ensure they ship with a recent JRE without known security vulnerabilities. In a larger sense, this feels to me like a shift from Java as a platform to Java as a runtime, with a few trade-offs being made which work out better for some than others.</span> <span> - </span> <span class="display-name">Pixelstix</span> <span> </span> <span class="date">3 May 2019 at 15:00</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>You need update your app with a fresh release only if a new security vulnerability could affect your particular customers because of your particular features. No need to update for a TLS bug if your app does not use TLS. This is true for any libraries you may include as a dependency in your app. The JVM is now one (large) dependency within your app. The JVM within your app is being used only by your app.</span> <span> - </span> <span class="display-name">Basil Bourque</span> <span> </span> <span class="date">3 May 2019 at 16:25</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>@Pixelstix We do agree. This is certainly a shift from Java as a platform to Java as a runtime. And yes, there are trade-offs, with some benefits and some down-sides.</span> <span> - </span> <span class="display-name">Basil Bourque</span> <span> </span> <span class="date">3 May 2019 at 16:27</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_3"><span>Answer 3</span> <span class="arrow"> <a href="#answer_2">↑</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>12</span>
     </div>
     <div>
      <span>Answerer: </span> <span>mati kepa</span>
     </div>
     <div>
      <span> Answered: </span> <span>17 Dec 2018 at 12:40</span>
     </div>
    </div>
    <div>
     <p>Look at <a href="https://github.com/AdoptOpenJDK/openjdk-jdk11" rel="nofollow noreferrer">the AdoptOpenJDK project website</a> to download the latest JRE and JDK.</p>
     <p>I have used <a href="https://adoptopenjdk.net/releases.html?variant=openjdk11#x64_linux" rel="nofollow noreferrer">their nightly builds</a> to work around the problem of missing JRE in JDK package. Just unpack JRE into JDK folder and this is going to be it.</p>
     <p><a href="https://i.stack.imgur.com/BGtZ0.png" rel="nofollow noreferrer"><img src="BGtZ0.png" alt="Enter image description here"></a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>