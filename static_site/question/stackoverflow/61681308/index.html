<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Datatables.js - Better Organization of Columns but still need to sort from Header</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>Datatables.js - Better Organization of Columns but still need to sort from Header</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>0</span>
    </div>
    <div>
     <span>Asker: </span> <span>Murphy1976</span>
    </div>
    <div>
     <span>Asked: </span> <span>8 May 2020 at 14:21</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/61681308/datatables-js-better-organization-of-columns-but-still-need-to-sort-from-heade">source</a>
    </div>
   </div>
   <div>
    <p>For this project, I'm using the latest version of DatatTables.js</p>
    <p>The table I want to incorporate as a LOT of columns, and I'm looking to consolidate some of those into one cell, BUT I still want to be able to somehow be able to sort the entire table by columns that I've just consolidated.</p>
    <p>Here's the current table:</p>
    <pre><code>&lt;table id="table-data" width="100%"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Order Date&lt;/th&gt;
            &lt;th&gt;Order ID&lt;/th&gt;
            &lt;th&gt;Promo ID&lt;/th&gt;
            &lt;th&gt;Order Details&lt;/th&gt;
            &lt;th&gt;Shipping Name&lt;/th&gt;
            &lt;th&gt;Shipping Address&lt;/th&gt;
            &lt;th&gt;Shipping City&lt;/th&gt;
            &lt;th&gt;Shipping State&lt;/th&gt;
            &lt;th&gt;Shipping Zip Code&lt;/th&gt;
            &lt;th&gt;Email Address&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;Order Date&lt;/td&gt;
            &lt;td&gt;Order ID&lt;/td&gt;
            &lt;td&gt;Promo ID&lt;/td&gt;
            &lt;td&gt;Order Details&lt;/td&gt;
            &lt;td&gt;Shipping Name&lt;/td&gt;
            &lt;td&gt;Shipping Address&lt;/td&gt;
            &lt;td&gt;Shipping City&lt;/td&gt;
            &lt;td&gt;Shipping State&lt;/td&gt;
            &lt;td&gt;Shipping Zip Code&lt;/td&gt;
            &lt;td&gt;Email Address&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Order Date&lt;/td&gt;
            &lt;td&gt;Order ID&lt;/td&gt;
            &lt;td&gt;Promo ID&lt;/td&gt;
            &lt;td&gt;Order Details&lt;/td&gt;
            &lt;td&gt;Shipping Name&lt;/td&gt;
            &lt;td&gt;Shipping Address&lt;/td&gt;
            &lt;td&gt;Shipping City&lt;/td&gt;
            &lt;td&gt;Shipping State&lt;/td&gt;
            &lt;td&gt;Shipping Zip Code&lt;/td&gt;
            &lt;td&gt;Email Address&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
</code></pre>
    <p>And here's what I would like to do:</p>
    <pre><code>&lt;table id="table-data" width="100%"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Order Date&lt;/th&gt;
            &lt;th&gt;Order ID&lt;/th&gt;
            &lt;th&gt;Promo ID&lt;/th&gt;
            &lt;th&gt;Order Details&lt;/th&gt;
            &lt;th&gt;Shipping Info&lt;/th&gt;
            &lt;th&gt;Email Address&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;Order Date&lt;/td&gt;
            &lt;td&gt;Order ID&lt;/td&gt;
            &lt;td&gt;Promo ID&lt;/td&gt;
            &lt;td&gt;Order Details&lt;/td&gt;
            &lt;td&gt;
                Shipping Name&lt;br/&gt;
                Shipping Address&lt;br/&gt;
                Shipping City&lt;br/&gt;
                Shipping State&lt;br/&gt;
                Shipping Zip Code
            &lt;/td&gt;
            &lt;td&gt;Email Address&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Order Date&lt;/td&gt;
            &lt;td&gt;Order ID&lt;/td&gt;
            &lt;td&gt;Promo ID&lt;/td&gt;
            &lt;td&gt;Order Details&lt;/td&gt;
            &lt;td&gt;
                Shipping Name&lt;br/&gt;
                Shipping Address&lt;br/&gt;
                Shipping City&lt;br/&gt;
                Shipping State&lt;br/&gt;
                Shipping Zip Code
            &lt;/td&gt;
            &lt;td&gt;Email Address&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
</code></pre>
    <p>I'm having difficulty finding any extension, plugin or function that would allow me to still sort by Shipping Name, Address, City, State and Zip Code when they are all in the same cell.</p>
   </div>
   <div class="tags">
    <span class="tag">html</span><span class="tag">jquery</span><span class="tag">datatables</span><span class="tag">code-organization</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td>1</td>
       <td><span>is the data static or are you getting it from an api/db/json file? the best approach here is to sort and/or filter the data then populate the table with it.</span> <span> - </span> <span class="display-name">Maher Fattouh</span> <span> </span> <span class="date">8 May 2020 at 14:40</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>Whether the data is static OR dynamic is irrelevant. I have asked my question. Your comment brings no value, insight or answer.</span> <span> - </span> <span class="display-name">Murphy1976</span> <span> </span> <span class="date">8 May 2020 at 15:06</span></td>
      </tr>
      <tr>
       <td>1</td>
       <td><span>A <i>partial</i> solution: Create 4 hidden columns - one for each of Address, City, State, Zip. Use external controls (e.g. 4 buttons) to sort by those columns. This is a partial solution because it breaks the "sort only using headers" approach. Now you have a mix. Not ideal. But relatively simple. I think merging those external controls into a column heading would probably be more awkward. (In a similar situation, I relied only on the global filter box: "Search, Don't Sort".)</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">8 May 2020 at 15:09</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>@andrewjames - I appreciate that out of the box thinking. And YES that would work to fit the confines of my question. But I would still prefer to sort with the original header. Can you submit your comment as an answer. I would like to give you credit.</span> <span> - </span> <span class="display-name">Murphy1976</span> <span> </span> <span class="date">8 May 2020 at 15:26</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>8 May 2020 at 17:10</span>
     </div>
    </div>
    <div>
     <p>A partial solution: Create 4 hidden columns - one for each of Address, City, State, Zip. Use external controls (e.g. 4 buttons) to sort by those columns. This is a partial solution because it breaks the "sort only using headers" approach. Now you have a mix. Not ideal. But relatively simple.</p>
     <p>I think merging those external controls into a column heading would probably be more awkward. (In a similar situation, I relied only on the global filter box: "Search, Don't Sort".)</p>
     <p>Below is a similar approach, but where the click behavior is in the column heading.</p>
     <p>Behavior: If you click on the first column heading, it iterates over four sort states:</p>
     <p>1) First name asc</p>
     <p>2) First name desc</p>
     <p>3) Last name asc</p>
     <p>4) Last name desc</p>
     <p>Here is my test data:</p>
     <pre><code>&lt;table id="example" class="display" style="width:100%"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;Name&lt;/th&gt;
            &lt;th&gt;Position&lt;/th&gt;
            &lt;th&gt;Office&lt;/th&gt;
            &lt;th&gt;Age&lt;/th&gt;
            &lt;th&gt;Start date&lt;/th&gt;
            &lt;th&gt;Salary&lt;/th&gt;
            &lt;th&gt;First&lt;/th&gt;
            &lt;th&gt;Last&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;Tiger Nixon&lt;/td&gt;
            &lt;td&gt;System Architect&lt;/td&gt;
            &lt;td&gt;Edinburgh&lt;/td&gt;
            &lt;td&gt;61&lt;/td&gt;
            &lt;td&gt;2011/04/25&lt;/td&gt;
            &lt;td&gt;$320,800&lt;/td&gt;
            &lt;td&gt;Tiger&lt;/td&gt;
            &lt;td&gt;Nixon&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Garrett Winters&lt;/td&gt;
            &lt;td&gt;Accountant&lt;/td&gt;
            &lt;td&gt;Tokyo&lt;/td&gt;
            &lt;td&gt;63&lt;/td&gt;
            &lt;td&gt;2011/07/25&lt;/td&gt;
            &lt;td&gt;$170,750&lt;/td&gt;
            &lt;td&gt;Garrett&lt;/td&gt;
            &lt;td&gt;Winters&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Ashton Cox&lt;/td&gt;
            &lt;td&gt;Junior Technical Author&lt;/td&gt;
            &lt;td&gt;San Francisco&lt;/td&gt;
            &lt;td&gt;66&lt;/td&gt;
            &lt;td&gt;2009/01/12&lt;/td&gt;
            &lt;td&gt;$86,000&lt;/td&gt;
            &lt;td&gt;Ashton&lt;/td&gt;
            &lt;td&gt;Cox&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Cedric Kelly&lt;/td&gt;
            &lt;td&gt;Senior Javascript Developer&lt;/td&gt;
            &lt;td&gt;Edinburgh&lt;/td&gt;
            &lt;td&gt;22&lt;/td&gt;
            &lt;td&gt;2012/03/29&lt;/td&gt;
            &lt;td&gt;$433,060&lt;/td&gt;
            &lt;td&gt;Cedric&lt;/td&gt;
            &lt;td&gt;Kelly&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;tfoot&gt;
        &lt;tr&gt;
            &lt;th&gt;Name&lt;/th&gt;
            &lt;th&gt;Position&lt;/th&gt;
            &lt;th&gt;Office&lt;/th&gt;
            &lt;th&gt;Age&lt;/th&gt;
            &lt;th&gt;Start date&lt;/th&gt;
            &lt;th&gt;Salary&lt;/th&gt;
            &lt;th&gt;First&lt;/th&gt;
            &lt;th&gt;Last&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/tfoot&gt;
&lt;/table&gt;
</code></pre>
     <p>You can see that the data in the <code>Name</code> heading has also been split into 2 separate columns at the end (<code>First</code> and <code>Last</code>).</p>
     <p>Then I use the following DataTables definition, with a related custom sorter. The sorter is applied only to the <code>Name</code> heading. All the other headings work in the default way:</p>
     <pre><code>&lt;script type="text/javascript"&gt;

  $(document).ready(function() {
    var table = $('#example').DataTable( {
      "order": [[ 6, 'asc' ], [ 7, 'asc' ]],
      "columnDefs": [ 
        { "visible": false,  "targets": [ 6, 7 ] }
      ]
    } );

    // Override the DataTables event:
    $( 'thead tr th:nth-child(1)' ).off('click');

    $( 'thead tr th:nth-child(1)' ).click(function() {
      var order = table.order();
      var col = order[0][0]; // zero-indexed
      var ord = order[0][1]; // 'asc' or 'desc'
      ord = (ord === 'asc' ? 'desc' : 'asc'); // toggle asc/desc
      if (col &lt; 6) {
        col = 6;
        ord = 'asc';
      } else {
        ord = (ord === 'asc' ? 'desc' : 'asc'); // toggle asc/desc
        if (ord === 'asc') { // move sort to next column
          col = (col === 7) ? 6 : col +1;
        }
      }
      table.order( [ col, ord ] ).draw();
    });

  } );

&lt;/script&gt;
</code></pre>
     <p>Click on the <code>Name</code> heading to see the behavior.</p>
     <p>This is only a partial solution because there are no indications telling you what the sort order is for column 1 - but a display field could be added.</p>
     <p>At least this may give you some extra ideas.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>