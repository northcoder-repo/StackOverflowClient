<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How to get the exact local time of client?</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>How to get the exact local time of client?</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>73</span>
    </div>
    <div>
     <span>Asker: </span> <span>user850234</span>
    </div>
    <div>
     <span>Asked: </span> <span>18 May 2012 at 20:47</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/10659523/how-to-get-the-exact-local-time-of-client">source</a>
    </div>
   </div>
   <div>
    <p>What is the best method to get the clients local time irrespective of the time zone of clients system? I am creating an application and i need to first of all get the exact time and date of the place from where the client is accessing. Even detecting the ip address of client system has a drawback or detecting the time zone of client system may be risky at times. So, is there any way out which could be really reliable and not vulnerable to error because displaying wrong time and date to client is something very embarassing.</p>
   </div>
   <div class="tags">
    <span class="tag">javascript</span><span class="tag">jquery</span><span class="tag">datetime</span><span class="tag">geolocation</span><span class="tag">timezone</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td>3</td>
       <td><span>Are you trying to address a scenario where a traveling user has their device configured for time zone X, but they are currently in time zone Y?</span> <span> - </span> <span class="display-name">Andrew N Carr</span> <span> </span> <span class="date">18 May 2012 at 20:49</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>74</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Madara's Ghost</span>
     </div>
     <div>
      <span> Answered: </span> <span>18 May 2012 at 20:49</span>
     </div>
    </div>
    <div>
     <p>In JavaScript? Just instantiate a new <strong><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date">Date object</a></strong></p>
     <pre><code>var now = new Date();
</code></pre>
     <p>That will create a new Date object with the client's local time.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>5</td>
        <td><span>I think he wants a way to get the timezone of a client independent of the client...</span> <span> - </span> <span class="display-name">J. Holmes</span> <span> </span> <span class="date">18 May 2012 at 20:53</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@32bitkid: "What is the best method to get the clients local time irrespective of the time zone of clients system?". So I beg the differ. But until OP clarifies, we cannot know.</span> <span> - </span> <span class="display-name">Madara's Ghost</span> <span> </span> <span class="date">18 May 2012 at 20:55</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Besides, once you have the local time, just compare it to the server time and you can easily calculate the TZ offset and therefore the TZ.</span> <span> - </span> <span class="display-name">mkoistinen</span> <span> </span> <span class="date">18 May 2012 at 20:56</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>@Truth doing a <code>new Date()</code> on a client will be in the time zone of the OS, not the physical timezone that the box is sitting in. The <i>latter</i> is what the question is asking for, which is why hes asking about ip addresses and geocoding.</span> <span> - </span> <span class="display-name">J. Holmes</span> <span> </span> <span class="date">18 May 2012 at 20:59</span></td>
       </tr>
       <tr>
        <td>7</td>
        <td><span>@32bitkid: That's possible. But if that's what he wants, I would recommend against it. If the client wants to shoot himself in the leg by having a different time zone than the place he's actually staying, he probably has a good reason. In which case, you as a programmer should respect that.</span> <span> - </span> <span class="display-name">Madara's Ghost</span> <span> </span> <span class="date">18 May 2012 at 21:01</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Recently i had an issue with the client in which the timezone set in the system was different from the timezone currently the client was. This resulted in an inefficient output of the application. So was looking for something from which i can get the client timezone irrespective of the system timezone or alternative way could be to just get the timezone from client system and then update the current date and time according to the timezone local time.</span> <span> - </span> <span class="display-name">user850234</span> <span> </span> <span class="date">19 May 2012 at 07:56</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@user850234: Please give us some context. I don't see any reason why you would need the actual time zone and not the time zone the client reported to you. If he wants to pretend he lives in China, who are you to tell him not to?</span> <span> - </span> <span class="display-name">Madara's Ghost</span> <span> </span> <span class="date">19 May 2012 at 07:58</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>But is there a way so that i can get the local time by just detecting the timezone of client system because if the system date or time is set wrong then the calculation comes wrong. I tried to create a new Date objecr with the client's local time but if the client is in different timezone and the timezone set in the system is different but the date and time is set according to the current location then the calculation comes wrong.</span> <span> - </span> <span class="display-name">user850234</span> <span> </span> <span class="date">19 May 2012 at 08:00</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@user850234: You aren't answering my question. <b>WHAT</b> are you trying to do? Not <b>HOW</b> you're trying to do it. What does your application do? Why do you need to know the client's actual time zone instead of the one he reported he's using.</span> <span> - </span> <span class="display-name">Madara's Ghost</span> <span> </span> <span class="date">19 May 2012 at 08:02</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@truth : The reason is i have some live channels which is shown according to the timezone. So if a user pretends to be in china but is in dubai then what to do. Which channel to show and how to get the time because date object gives the timzone and the client system date and time. If the client set the time and date according to dubai standard but the time is china then UTC time conversion calculation comes wrong.</span> <span> - </span> <span class="display-name">user850234</span> <span> </span> <span class="date">19 May 2012 at 08:04</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>let us <a href="http://chat.stackoverflow.com/rooms/11453/discussion-between-truth-and-user850234">continue this discussion in chat</a></span> <span> - </span> <span class="display-name">Madara's Ghost</span> <span> </span> <span class="date">19 May 2012 at 08:04</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>I have done the application using the client timezone but what will be the case when a client is in different timezone but want to see the current timezone time and not what the timezone is set in the system bcause a normal user can be ignorant of the time zone issue</span> <span> - </span> <span class="display-name">user850234</span> <span> </span> <span class="date">19 May 2012 at 08:41</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>this is not local time of client</span> <span> - </span> <span class="display-name">Khan</span> <span> </span> <span class="date">8 Mar 2019 at 13:09</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I'm using <code>new Date()</code> but it doesn't show correctly in my timezone. But it's showing an incorrect date and time. However, it shows the right 'GMT' number.</span> <span> - </span> <span class="display-name">Irfandy Jip</span> <span> </span> <span class="date">29 Sep 2019 at 11:32</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span><code>new Date()</code> won't work properly on server, because <code>new Date()</code> automatically converts to local time which server (e.g nginx) doesn't have...</span> <span> - </span> <span class="display-name">DragoRoff</span> <span> </span> <span class="date">8 May 2020 at 09:28</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">↑</a> </span> <span class="arrow"> <a href="#answer_3">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>35</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Stanislau Buzunko</span>
     </div>
     <div>
      <span> Answered: </span> <span>26 Aug 2016 at 07:52</span>
     </div>
    </div>
    <div>
     <p>Nowadays you can get correct timezone of a user having just one line of code:</p>
     <pre><code>const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
</code></pre>
     <p>source: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/resolvedOptions" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/resolvedOptions</a></p>
     <p>You can then use <a href="http://momentjs.com/timezone" rel="noreferrer">moment-timezone</a> to parse timezone like:</p>
     <pre><code>const currentTime = moment().tz(timezone).format();
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>2</td>
        <td><span>Is this dependent on the client though</span> <span> - </span> <span class="display-name">B''H Bi'ezras -- Boruch Hashem</span> <span> </span> <span class="date">16 Sep 2020 at 07:39</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Moment.js is now deprecated</span> <span> - </span> <span class="display-name">danwellman</span> <span> </span> <span class="date">23 Oct 2021 at 13:05</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_3"><span>Answer 3</span> <span class="arrow"> <a href="#answer_2">↑</a> </span> <span class="arrow"> <a href="#answer_4">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>20</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Kamil Kiełczewski</span>
     </div>
     <div>
      <span> Answered: </span> <span>24 Nov 2019 at 23:41</span>
     </div>
    </div>
    <div>
     <p>Try</p>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code>let s= new Date().toLocaleString();

console.log(s);</code></pre>
      </div>
     </div>
     <p></p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_4"><span>Answer 4</span> <span class="arrow"> <a href="#answer_3">↑</a> </span> <span class="arrow"> <a href="#answer_5">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>12</span>
     </div>
     <div>
      <span>Answerer: </span> <span>pseudosavant</span>
     </div>
     <div>
      <span> Answered: </span> <span>18 May 2012 at 20:59</span>
     </div>
    </div>
    <div>
     <p>If you want to know the timezone of the client relative to GMT/UTC here you go:</p>
     <pre><code>var d = new Date();
var tz = d.toString().split("GMT")[1].split(" (")[0]; // timezone, i.e. -0700
</code></pre>
     <p>If you'd like the actual name of the timezone you can try this:</p>
     <pre><code>var d = new Date();
var tz = d.toString().split("GMT")[1]; // timezone, i.e. -0700 (Pacific Daylight Time)
</code></pre>
     <h2>UPDATE 1</h2>
     <p>Per the first comment by you can also use <code>d.getTimezoneOffset()</code> to get the offset in minutes from UTC. Couple of gotchas with it though.</p>
     <ol>
      <li>The sign (+/-) of the minutes returned is probably the opposite of what you'd expect. If you are 8 hours <em>behind</em> UTC it will return <code>480</code> not <code>-480</code>. See <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset" rel="noreferrer">MDN</a> or <a href="http://msdn.microsoft.com/en-us/library/81698774.aspx" rel="noreferrer">MSDN</a> for more documentation.</li>
      <li>It doesn't actually return what timezone the client is reporting it is in like the second example I gave. Just the minutes offset from UTC currently. So it will change based on daylight savings time.</li>
     </ol>
     <h2>UPDATE 2</h2>
     <p>While the string splitting examples work they can be confusing to read. Here is a regex version that should be easier to understand and is probably faster (both methods are very fast though).</p>
     <p>If you want to know the timezone of the client relative to GMT/UTC here you go:</p>
     <pre><code>var gmtRe = /GMT([\-\+]?\d{4})/; // Look for GMT, + or - (optionally), and 4 characters of digits (\d)
var d = new Date().toString();
var tz = gmtRe.exec(d)[1]; // timezone, i.e. -0700
</code></pre>
     <p>If you'd like the actual name of the timezone try this:</p>
     <pre><code>var tzRe = /\(([\w\s]+)\)/; // Look for "(", any words (\w) or spaces (\s), and ")"
var d = new Date().toString();
var tz = tzRe.exec(d)[1]; // timezone, i.e. "Pacific Daylight Time"
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>6</td>
        <td><span>In my opinion there is a much better way to get the offset to UTC: <code>d.getTimezoneOffset()</code>. It returns the offset of UTC in number of minutes.</span> <span> - </span> <span class="display-name">some</span> <span> </span> <span class="date">19 May 2012 at 00:12</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Never used that. Good tip. There is one thing it doesn't do that the second example I give does do though, it doesn't actually tell you the timezone. The response changes (like my first example) based on whether it is daylight savings time or not.</span> <span> - </span> <span class="display-name">pseudosavant</span> <span> </span> <span class="date">21 May 2012 at 16:48</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>The value returned by <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-date.prototype.tostring" rel="nofollow noreferrer"><i>Date.prototype.toString</i></a> is entirely implementation dependent, yet this answer relies on it being standardised across all hosts.</span> <span> - </span> <span class="display-name">RobG</span> <span> </span> <span class="date">8 Feb 2016 at 23:31</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@RobG that is totally correct. In theory implantations could vary, but it practice Edge, Blink, Webkit, and Gecko (which cover 99% of browsers) all function the same as far as this capability is concerned. That <i>could</i> change in the future but it is unlikely. There isn't a perfect solution to this problem.</span> <span> - </span> <span class="display-name">pseudosavant</span> <span> </span> <span class="date">11 Feb 2016 at 00:15</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@pseudosavant—the "perfect solution" is <i>getTimezoneOffset</i>, which reports <b>exactly</b> what the system offset is set to. There is no standard for timezone abbreviations, e.g. EST might be one of three time zones. There is no answer to the OP (i.e. determine time zone independently of system settings) that doesn't require some way of determining the host location and a database of time boundaries and time change rules such as daylight saving other than just asking the user.</span> <span> - </span> <span class="display-name">RobG</span> <span> </span> <span class="date">11 Feb 2016 at 00:33</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_5"><span>Answer 5</span> <span class="arrow"> <a href="#answer_4">↑</a> </span> <span class="arrow"> <a href="#answer_6">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>8</span>
     </div>
     <div>
      <span>Answerer: </span> <span>asma_dev</span>
     </div>
     <div>
      <span> Answered: </span> <span>30 Sep 2020 at 14:01</span>
     </div>
    </div>
    <div>
     <p>In order to get local time in pure Javascript use this built in function</p>
     <p><code>// return new Date().toLocaleTimeString();</code></p>
     <p>See below example</p>
     <pre><code> function getLocaltime(){
   return new Date().toLocaleTimeString();
 }
 console.log(getLocaltime());
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_6"><span>Answer 6</span> <span class="arrow"> <a href="#answer_5">↑</a> </span> <span class="arrow"> <a href="#answer_7">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>5</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Wael Chorfan</span>
     </div>
     <div>
      <span> Answered: </span> <span>29 Apr 2021 at 14:50</span>
     </div>
    </div>
    <div>
     <ul>
      <li>
       <p>directly like this :</p>
       <pre><code>new Date((new Date().setHours(new Date().getHours() - (new Date().getTimezoneOffset() / 60)))).toISOString()
</code></pre></li>
      <li>
       <p>more details in this utility function</p>
       <pre><code>function getLocaLTime() {
  // new Date().getTimezoneOffset() : getTimezoneOffset in minutes 
  //for GMT + 1 it is (-60) 
  //for GMT + 2 it is (-120) 
  //..
  let time_zone_offset_in_hours = new Date().getTimezoneOffset() / 60;
  //get current datetime hour
  let current_hour = new Date().getHours();
  //adjust current date hour 
  let local_datetime_in_milliseconds = new Date().setHours(current_hour - time_zone_offset_in_hours);
  //format date in milliseconds to ISO String
  let local_datetime = new Date(local_datetime_in_milliseconds).toISOString();
  return local_datetime;
  }
</code></pre></li>
     </ul>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_7"><span>Answer 7</span> <span class="arrow"> <a href="#answer_6">↑</a> </span> <span class="arrow"> <a href="#answer_8">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>3</span>
     </div>
     <div>
      <span>Answerer: </span> <span>MrBizle</span>
     </div>
     <div>
      <span> Answered: </span> <span>3 Sep 2015 at 12:38</span>
     </div>
    </div>
    <div>
     <p>Just had to tackle this so thought I would leave my answer. jQuery not required I used to update the element as I already had the object cached.</p>
     <p>I first wrote a php function to return the required dates/times to my HTML template</p>
     <pre><code> /**
 * Gets the current location time based on timezone
 * @return string
 */


function get_the_local_time($timezone) {

    //$timezone ='Europe/London';

    $date = new DateTime('now', new DateTimeZone($timezone));

    return array(
        'local-machine-time' =&gt; $date-&gt;format('Y-m-d\TH:i:s+0000'),
        'local-time' =&gt; $date-&gt;format('h:i a')
    );

}
</code></pre>
     <p>This is then used in my HTML template to display an initial time, and render the date format required by javascript in a data attribute.</p>
     <pre><code>        &lt;span class="box--location__time" data-time="&lt;?php echo $time['local-machine-time']; ?&gt;"&gt;
            &lt;?php  echo $time['local-time']; ?&gt;
        &lt;/span&gt;
</code></pre>
     <p>I then used the getUTCHours on my date object to return the time irrespective of the users timezone</p>
     <blockquote>
      <p>The getUTCHours() method returns the hour (from 0 to 23) of the specified date and time, according to universal time.</p>
     </blockquote>
     <pre><code>var initClocks = function() {

    var $clocks = $('.box--location__time');

    function formatTime(hours, minutes) {

        if (hours === 0) {
            hours = 12;
        }

        if (hours &lt; 10) {
            hours = "0" + hours;
        }

        if (minutes &lt; 10) {
            minutes = "0" + minutes;
        }

        return {
            hours: hours,
            minutes: minutes
        }
    }

    function displayTime(time, $clockDiv) {

        var currentTime = new Date(time);

        var hours = currentTime.getUTCHours();
        var minutes = currentTime.getUTCMinutes();
        var seconds = currentTime.getUTCSeconds();
        var initSeconds = seconds;

        var displayTime = formatTime(hours, minutes);

        $clockDiv.html(displayTime.hours + ":" + displayTime.minutes + ":" + seconds);

        setInterval(function() {

            if (initSeconds &gt; 60) {
                initSeconds = 1;
            } else {
                initSeconds++;
            }

            currentTime.setSeconds(initSeconds);

            hours = currentTime.getUTCHours();
            minutes = currentTime.getUTCMinutes();
            seconds = currentTime.getUTCSeconds();

            displayTime = formatTime(hours, minutes);

            $clockDiv.html(displayTime.hours + ":" + displayTime.minutes + ":" + seconds);

        }, 1000);

    }



    $clocks.each(function() {

        displayTime($(this).data('time'), $(this));

    });

};
</code></pre>
     <p>I then use the setSeconds method to update the date object based on the amount of seconds past since page load (simple interval function), and update the HTML</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>The Op requested this only using javascript. Using PHP as well sort of defeats the purpose, as PHP has a lot of functions to do this as well.</span> <span> - </span> <span class="display-name">RockyK</span> <span> </span> <span class="date">15 Sep 2018 at 23:37</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@rocky well it's impossible to use only JavaScript, unless you also use nodeJS, because at some point it has to connect to an API that is powered by server side code</span> <span> - </span> <span class="display-name">B''H Bi'ezras -- Boruch Hashem</span> <span> </span> <span class="date">16 Sep 2020 at 07:24</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_8"><span>Answer 8</span> <span class="arrow"> <a href="#answer_7">↑</a> </span> <span class="arrow"> <a href="#answer_9">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>coco puffs</span>
     </div>
     <div>
      <span> Answered: </span> <span>12 Nov 2016 at 22:31</span>
     </div>
    </div>
    <div>
     <p>The most reliable way I've found to display the local time of a city or location is by tapping into a Time Zone API such as <a href="https://developers.google.com/maps/documentation/timezone/intro" rel="nofollow noreferrer">Google Time Zone API</a>. It returns the correct time zone, and more importantly, Day Light Savings Time offset of any location, which just using JavaScript's Date() object cannot be done as far as I'm aware. There's a good tutorial on using the API to get and display the local time <a href="http://www.javascriptkit.com/dhtmltutors/local-time-google-time-zone-api.shtml" rel="nofollow noreferrer">here</a>:</p>
     <pre class="lang-js prettyprint-override"><code>var loc = '35.731252, 139.730291' // Tokyo expressed as lat,lng tuple
var targetDate = new Date() // Current date/time of user computer
var timestamp = targetDate.getTime() / 1000 + targetDate.getTimezoneOffset() * 60 // Current UTC date/time expressed as seconds since midnight, January 1, 1970 UTC
var apikey = 'YOUR_TIMEZONE_API_KEY_HERE'
var apicall = 'https://maps.googleapis.com/maps/api/timezone/json?location=' + loc + '&amp;timestamp=' + timestamp + '&amp;key=' + apikey

var xhr = new XMLHttpRequest() // create new XMLHttpRequest2 object
xhr.open('GET', apicall) // open GET request
xhr.onload = function() {
  if (xhr.status === 200) { // if Ajax request successful
    var output = JSON.parse(xhr.responseText) // convert returned JSON string to JSON object
    console.log(output.status) // log API return status for debugging purposes
    if (output.status == 'OK') { // if API reports everything was returned successfully
      var offsets = output.dstOffset * 1000 + output.rawOffset * 1000 // get DST and time zone offsets in milliseconds
      var localdate = new Date(timestamp * 1000 + offsets) // Date object containing current time of Tokyo (timestamp + dstOffset + rawOffset)
      console.log(localdate.toLocaleString()) // Display current Tokyo date and time
    }
  } else {
    alert('Request failed.  Returned status of ' + xhr.status)
  }
}
xhr.send() // send request
</code></pre>
     <p>From: <a href="http://www.javascriptkit.com/dhtmltutors/local-time-google-time-zone-api.shtml" rel="nofollow noreferrer">Displaying the Local Time of Any City using JavaScript and Google Time Zone API</a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_9"><span>Answer 9</span> <span class="arrow"> <a href="#answer_8">↑</a> </span> <span class="arrow"> <a href="#answer_10">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Sushil</span>
     </div>
     <div>
      <span> Answered: </span> <span>22 Oct 2020 at 14:58</span>
     </div>
    </div>
    <div>
     <p>I found this function is very useful during all of my projects. you can also use it.</p>
     <pre><code>getStartTime(){
    let date = new Date();
    var tz = date.toString().split("GMT")[1].split(" (")[0];
    tz = tz.substring(1,5);
    let hOffset = parseInt(tz[0]+tz[1]);
    let mOffset = parseInt(tz[2]+tz[3]);
    let offset = date.getTimezoneOffset() * 60 * 1000;
    let localTime = date.getTime();
    let utcTime = localTime + offset;
    let austratia_brisbane = utcTime + (3600000 * hOffset) + (60000 * mOffset);
    let customDate = new Date(austratia_brisbane);

    let data = {
        day: customDate.getDate(),
        month: customDate.getMonth() + 1,
        year: customDate.getFullYear(),
        hour: customDate.getHours(),
        min: customDate.getMinutes(),
        second: customDate.getSeconds(),
        raw: customDate,
        stringDate: customDate.toString()
    }

    return data;
  }
</code></pre>
     <p>this will give you the time depending on your time zone.</p>
     <p>Thanks.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_10"><span>Answer 10</span> <span class="arrow"> <a href="#answer_9">↑</a> </span> <span class="arrow"> <a href="#answer_11">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>mplungjan</span>
     </div>
     <div>
      <span> Answered: </span> <span>16 Sep 2020 at 07:45</span>
     </div>
    </div>
    <div>
     <p>Here is a version that works well in September 2020 using fetch and <a href="https://worldtimeapi.org/api" rel="nofollow noreferrer">https://worldtimeapi.org/api</a></p>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code>fetch("https://worldtimeapi.org/api/ip")
  .then(response =&gt; response.json())
  .then(data =&gt; console.log(data.dst,data.datetime));</code></pre>
      </div>
     </div>
     <p></p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_11"><span>Answer 11</span> <span class="arrow"> <a href="#answer_10">↑</a> </span> <span class="arrow"> <a href="#answer_12">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>amit saini</span>
     </div>
     <div>
      <span> Answered: </span> <span>20 Feb 2021 at 17:23</span>
     </div>
    </div>
    <div>
     <pre class="lang-js prettyprint-override"><code>new Date(Date.now() + (-1*new Date().getTimezoneOffset()*60000)).toISOString()
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>2</td>
        <td><span>Improve this answer by adding an explanation of how the code solves the problem.</span> <span> - </span> <span class="display-name">Charlie Wallace</span> <span> </span> <span class="date">20 Feb 2021 at 17:45</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_12"><span>Answer 12</span> <span class="arrow"> <a href="#answer_11">↑</a> </span> <span class="arrow"> <a href="#answer_13">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>DJA</span>
     </div>
     <div>
      <span> Answered: </span> <span>15 Apr 2021 at 12:16</span>
     </div>
    </div>
    <div>
     <p>I needed to report to the server the local time something happened on the client. (In this specific business case UTC provides no value). I needed to use toIsoString() to have the format compatible with .Net MVC but toIsoString() this always converts it to UTC time (which was being sent to the server).</p>
     <p>Inspired by the 'amit saini' answer I now use this</p>
     <pre><code>    function toIsoStringInLocalTime(date) {
        return new Date((date.getTime() + (-date.getTimezoneOffset() * 60000))).toISOString()
    }
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_13"><span>Answer 13</span> <span class="arrow"> <a href="#answer_12">↑</a> </span> <span class="arrow"> <a href="#answer_14">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>user3768731</span>
     </div>
     <div>
      <span> Answered: </span> <span>7 Jul 2014 at 05:45</span>
     </div>
    </div>
    <div>
     <p>my code is</p>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code>function display_c(){
  var refresh=1000; // Refresh rate in milli seconds
  mytime=setTimeout('display_ct()',refresh)
}

  function display_ct() {
  var strcount
  var x = new Date()
  document.getElementById('ct').innerHTML = x;
  tt=display_c();
}</code></pre>
       <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;body onload=display_ct();&gt;
  &lt;span id='ct' &gt;&lt;/span&gt;
&lt;/body&gt;</code></pre>
      </div>
     </div>
     <p></p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_14"><span>Answer 14</span> <span class="arrow"> <a href="#answer_13">↑</a> </span> <span class="arrow"> <a href="#answer_15">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>B''H Bi'ezras -- Boruch Hashem</span>
     </div>
     <div>
      <span> Answered: </span> <span>16 Sep 2020 at 07:30</span>
     </div>
    </div>
    <div>
     <p>You can also make your own nodeJS endpoint, publish it with something like heroku, and access it</p>
     <pre><code>require("http").createServer(function (q,r) {
    r.setHeader("accees-control-allow-origin","*")
    r.end(Date.now())
}).listen(process.env.PORT || 80)
</code></pre>
     <p>Then just access it on JS</p>
     <pre><code>fetch ("http://someGerokuApp")
.then(r=&gt;r.text)
. then (r=&gt;console.log(r))
</code></pre>
     <p>This will still be relative to whatever computer the node app is hosted on, but perhaps you can get the location somehow and provide different endpoints fit the other timezones based on the current one (for example if the server happens to be in California then for a new York timezone just add <code>1000*60*60*3</code> milliseconds to Date.now() to add 3 hours)</p>
     <p>For simplicity, if it's possible to get the location from the server and send it as a response header, you can just do the calculations for the different time zones in the client side</p>
     <p>In fact using heroku they allow you to specify a region that it should be deployed at <a href="https://devcenter.heroku.com/articles/regions#specifying-a-region" rel="nofollow noreferrer">https://devcenter.heroku.com/articles/regions#specifying-a-region</a> you can use this as reference..</p>
     <p>EDIT just realized the timezone is in the date string itself, can just pay the whole thing as a header to be read by the client</p>
     <pre><code>require("http").createServer(function (q,r) {
    var d= new Date()
    r.setHeader("accees-control-allow-origin","*")
    r.setHeader("zman", d.toString())
    r.end(d.getTime())
}).listen(process.env.PORT || 80)
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_15"><span>Answer 15</span> <span class="arrow"> <a href="#answer_14">↑</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>-1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Sumit</span>
     </div>
     <div>
      <span> Answered: </span> <span>22 Aug 2014 at 06:47</span>
     </div>
    </div>
    <div>
     <p>Try on this way</p>
     <pre><code>    function timenow(){
    var now= new Date(), 
    ampm= 'am', 
    h= now.getHours(), 
    m= now.getMinutes(), 
    s= now.getSeconds();
    if(h&gt;= 12){
        if(h&gt;12) h -= 12;
        ampm= 'pm';
    }

    if(m&lt;10) m= '0'+m;
    if(s&lt;10) s= '0'+s;
    return now.toLocaleDateString()+ ' ' + h + ':' + m + ':' + s + ' ' + ampm;
}

toLocaleDateString()
</code></pre>
     <p>is a function to change the date time format like <code>toLocaleDateString("en-us")</code></p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>