<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Updating address bar with new URL without hash or reloading the page</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>Updating address bar with new URL without hash or reloading the page</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>735</span>
    </div>
    <div>
     <span>Asker: </span> <span>David Murdoch</span>
    </div>
    <div>
     <span>Asked: </span> <span>26 Jul 2010 at 20:18</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/3338642/updating-address-bar-with-new-url-without-hash-or-reloading-the-page">source</a>
    </div>
   </div>
   <div>
    <p>I either dreamt about chrome (dev channel) implementing a way to update the address bar via javascript (the path, not domain) without reloading the page or they really have done this.</p>
    <p>However, I can't find the article I <em>think</em> I read.</p>
    <p>Am I crazy or is there a way to do this (in Chrome)?</p>
    <p>p.s. I'm not talking about window.location.hash, et al. If the above exists <a href="https://stackoverflow.com/a/824356/160173">the answer to this question</a> will be untrue.</p>
   </div>
   <div class="tags">
    <span class="tag">javascript</span><span class="tag">ajax</span><span class="tag">google-chrome</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td>3</td>
       <td><span>@tobiaskienzler When that question was originally asked back in 2009, it was not possible.</span> <span> - </span> <span class="display-name">David Murdoch</span> <span> </span> <span class="date">24 Aug 2016 at 11:34</span></td>
      </tr>
      <tr>
       <td>8</td>
       <td><span>Of course not. But now it is, the <i>questions</i> ask for the same. A shame though that the other one has an outdated answer accepted (by you, I noticed)... You know what? Let's dupe-close the other way around, no-one said the "original" has to be the older one, in fact there are precedents</span> <span> - </span> <span class="display-name">Tobias Kienzler</span> <span> </span> <span class="date">24 Aug 2016 at 11:45</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>@tobiaskienzler, the other question doesn't have an outdated accepted answer.</span> <span> - </span> <span class="display-name">David Murdoch</span> <span> </span> <span class="date">24 Aug 2016 at 11:48</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>ok, not outdated, but more complicated. Still, the two questions do appear to be pretty much the same to me, but maybe I'm missing a nuance here...</span> <span> - </span> <span class="display-name">Tobias Kienzler</span> <span> </span> <span class="date">24 Aug 2016 at 11:56</span></td>
      </tr>
      <tr>
       <td>3</td>
       <td><span>@TobiasKienzler it's a 6 years old question, why you have to bother with this question? Just enjoy the amazing answer and implement it on your application. For 6 years thousands of SO users agreed that it's an amazing questions, please leave it as it is.</span> <span> - </span> <span class="display-name">Imam Assidiqqi</span> <span> </span> <span class="date">24 Dec 2016 at 09:43</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>982</span>
     </div>
     <div>
      <span>Answerer: </span> <span>David Murdoch</span>
     </div>
     <div>
      <span> Answered: </span> <span>27 Jul 2010 at 01:34</span>
     </div>
    </div>
    <div>
     <p><strong>You can now do this in most "modern" browsers!</strong></p>
     <p>Here is the original article I read (posted July 10, 2010): <a href="http://spoiledmilk.com/blog/html5-changing-the-browser-url-without-refreshing-page/" rel="noreferrer">HTML5: Changing the browser-URL without refreshing page</a>.</p>
     <p>For a more in-depth look into pushState/replaceState/popstate (aka the HTML5 History API) <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" rel="noreferrer">see the MDN docs</a>.</p>
     <p>TL;DR, you can do this:</p>
     <pre><code>window.history.pushState("object or string", "Title", "/new-url");
</code></pre>
     <p>See my answer to <a href="https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page/3354511#3354511">Modify the URL without reloading the page</a> for a basic how-to.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>3</td>
        <td><span>Ah, the functionality is in WebKit and landed a few months ago &lt;<a href="https://bugs.webkit.org/show_bug.cgi?id=36152" rel="nofollow noreferrer">bugs.webkit.org/show_bug.cgi?id=36152</a>&gt;. Nice find!</span> <span> - </span> <span class="display-name">oldestlivingboy</span> <span> </span> <span class="date">27 Jul 2010 at 01:46</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>This can now be done in Chrome, Safari, FF4+, and IE10pp3+! (From David Murdoch's answer to <a href="http://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page" title="modify the url without reloading the page">stackoverflow.com/questions/824349/…</a> )</span> <span> - </span> <span class="display-name">Zach Lysobey</span> <span> </span> <span class="date">19 Dec 2011 at 17:48</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>What about IE9 and below? Any similar solutions for them?</span> <span> - </span> <span class="display-name">shubniggurath</span> <span> </span> <span class="date">26 Feb 2013 at 16:07</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>There are all sorts of <code>history</code> hacks out there. See this SO question for more info: <a href="http://stackoverflow.com/questions/2358928/whats-the-best-library-to-do-a-url-hash-history-in-jquery" title="whats the best library to do a url hash history in jquery">stackoverflow.com/questions/2358928/…</a></span> <span> - </span> <span class="display-name">David Murdoch</span> <span> </span> <span class="date">26 Feb 2013 at 18:08</span></td>
       </tr>
       <tr>
        <td>15</td>
        <td><span>Protip: you can use relative paths with these functions as well (e.g. <code>../new-url</code> or <code>../../new-url</code>. They seem to do what you would expect in Chrome at least.</span> <span> - </span> <span class="display-name">Mahn</span> <span> </span> <span class="date">3 Aug 2013 at 09:29</span></td>
       </tr>
       <tr>
        <td>6</td>
        <td><span>I'd like to add that <code>window.replaceState</code> is much easier to set up and often preferable, e.g. when you want to update the URL after the user changes the value of some dropdown or search field. If you want to use <code>pushState</code>, then you also need to properly support <code>onpopstate</code> event.</span> <span> - </span> <span class="display-name">Kos</span> <span> </span> <span class="date">31 Jul 2016 at 08:06</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>What is “object or string” supposed to be?</span> <span> - </span> <span class="display-name">fwyzard</span> <span> </span> <span class="date">21 Mar 2020 at 18:57</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@fwzard <code>state</code>. The <code>state</code> object is a JavaScript object which is associated with the new history entry created by <code>pushState()</code>. Whenever the user navigates to the new <code>state</code>, a <code>popstate</code> event is fired, and the <code>state</code> property of the event contains a copy of the history entry's <code>state</code> object. The <code>state</code> object can be anything that can be serialized. So it's actually more than just <code>"object or string"</code>. Docs: <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/pushState" rel="nofollow noreferrer">developer.mozilla.org/en-US/docs/Web/API/History/pushState</a></span> <span> - </span> <span class="display-name">David Murdoch</span> <span> </span> <span class="date">25 Mar 2020 at 22:11</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">↑</a> </span> <span class="arrow"> <a href="#answer_3">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>195</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Pawel</span>
     </div>
     <div>
      <span> Answered: </span> <span>1 Sep 2016 at 16:35</span>
     </div>
    </div>
    <div>
     <p>Changing only what's after hash - old browsers</p>
     <pre><code>document.location.hash = 'lookAtMeNow';
</code></pre>
     <p>Changing full URL. Chrome, Firefox, IE10+</p>
     <pre><code>history.pushState('data to be passed', 'Title of the page', '/test');
</code></pre>
     <p>The above will add a new entry to the history so you can press Back button to go to the previous state. To change the URL in place without adding a new entry to history use</p>
     <pre><code>history.replaceState('data to be passed', 'Title of the page', '/test');
</code></pre>
     <p>Try running these in the console now!</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>20</td>
        <td><span><code>replaceState</code> was exactly what I needed, thanks for expanding on original response.</span> <span> - </span> <span class="display-name">Choylton B. Higginbottom</span> <span> </span> <span class="date">21 Sep 2016 at 23:07</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>'the domain and protocol must be the same as original!' this prevent some fishing site to change the address bar url.</span> <span> - </span> <span class="display-name">Rick</span> <span> </span> <span class="date">26 Sep 2017 at 10:49</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>You should not pass an absolute URL to this function. If you do, you most likely need to build it dynamically from the current scheme, host, and port - which is a lot of work when you could just make it a relative URL ("foo.html" or even "/foo.html") and let the browser take care of it.</span> <span> - </span> <span class="display-name">DimeCadmium</span> <span> </span> <span class="date">17 Jun 2018 at 05:20</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@DimeCadmium nice simplification. Updated.</span> <span> - </span> <span class="display-name">Pawel</span> <span> </span> <span class="date">17 Jun 2018 at 20:02</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span><code>history.replaceState</code> add to history in ff 66.0b1</span> <span> - </span> <span class="display-name">azzamsa</span> <span> </span> <span class="date">25 Jan 2019 at 18:09</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@azzamsa must've been a bug. It's not happening in more recent versions</span> <span> - </span> <span class="display-name">Pawel</span> <span> </span> <span class="date">7 Oct 2020 at 10:09</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_3"><span>Answer 3</span> <span class="arrow"> <a href="#answer_2">↑</a> </span> <span class="arrow"> <a href="#answer_4">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>37</span>
     </div>
     <div>
      <span>Answerer: </span> <span>metamagikum</span>
     </div>
     <div>
      <span> Answered: </span> <span>4 Jul 2017 at 11:01</span>
     </div>
    </div>
    <div>
     <p>Update to Davids answer to <strong>even detect browsers that do not support pushstate</strong>:</p>
     <pre><code>if (history.pushState) {
  window.history.pushState(stateObj, "title", "url");
} else {
  window.history.replaceState(stateObj, "title**", 'url');
  // ** It seems that current browsers other than Safari don't support pushState
  // title attribute. We can achieve the same thing by setting it in JS.
  document.title = "Title";
}
</code></pre>
     <p><strong>stateObj</strong></p>
     <p>The state object is a JavaScript object which is associated with the history entry passed to the replaceState method. The state object can be null.</p>
     <p><strong>title</strong></p>
     <p>Most browsers currently ignore this parameter, although they may use it in the future. Passing the empty string here should be safe against future changes to the method. Alternatively, you could pass a short title for the state.</p>
     <p><strong>url</strong> <em>Optional</em></p>
     <p>The URL of the history entry. The new URL must be of the same origin as the current URL; otherwise replaceState throws an exception.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>25</td>
        <td><span>document.location.href reloads the page</span> <span> - </span> <span class="display-name">paullb</span> <span> </span> <span class="date">29 Jul 2017 at 05:29</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Umm, i see the compatibility in caniuse (<a href="https://caniuse.com/?search=pushstate" rel="nofollow noreferrer">pushstate</a> and <a href="https://caniuse.com/?search=replacestate" rel="nofollow noreferrer">replacestate</a>), both are same, it's not support old browser</span> <span> - </span> <span class="display-name">syahid246</span> <span> </span> <span class="date">18 May 2022 at 18:13</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_4"><span>Answer 4</span> <span class="arrow"> <a href="#answer_3">↑</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>16</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Kevin Mendez</span>
     </div>
     <div>
      <span> Answered: </span> <span>3 Mar 2020 at 17:22</span>
     </div>
    </div>
    <div>
     <pre><code>var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?foo=bar';
window.history.pushState({path:newurl},'',newurl);
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>11</td>
        <td><span>While this code snippet may solve the question, <a href="//meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion.</span> <span> - </span> <span class="display-name">Maximouse</span> <span> </span> <span class="date">3 Mar 2020 at 18:03</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@MaxiMouse thanks for your sugerence, i will take it in mind.</span> <span> - </span> <span class="display-name">Kevin Mendez</span> <span> </span> <span class="date">19 Apr 2020 at 02:39</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>Suggested edit: const url = new URL(window.location); url.searchParams.set('foo', 'bar'); window.history.pushState({}, '', url);</span> <span> - </span> <span class="display-name">user3579536</span> <span> </span> <span class="date">15 Nov 2020 at 17:45</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>