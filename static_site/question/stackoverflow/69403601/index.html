<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>reordering datable will mix values</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>reordering datable will mix values</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>1</span>
    </div>
    <div>
     <span>Asker: </span> <span>Trombone0904</span>
    </div>
    <div>
     <span>Asked: </span> <span>1 Oct 2021 at 09:29</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/69403601/reordering-datable-will-mix-values">source</a>
    </div>
   </div>
   <div>
    <p>I work wit <a href="https://datatables.net/extensions/rowreorder/examples/initialisation/restrictedOrdering.html" rel="nofollow noreferrer">DataTables</a> and would like to realize drag and drop reordering. My Code a the moment:</p>
    <p><strong>HTML</strong></p>
    <pre><code>&lt;div class="table-responsive"&gt;
                      &lt;table id="tablePositionen" class="table table-lg hover table-striped"&gt;
                          &lt;thead&gt;
                          &lt;tr&gt;
                              &lt;th&gt;Bezeichnung&lt;/th&gt;
                              &lt;th&gt;Menge&lt;/th&gt;
                              &lt;th&gt;Preis&lt;/th&gt;
                              &lt;th&gt;Gesamt&lt;/th&gt;
                              &lt;th class="text-right"&gt;&lt;/th&gt;
                          &lt;/tr&gt;
                          &lt;/thead&gt;
                          &lt;tbody&gt;
                              &lt;tr&gt;
                                  &lt;td&gt;Article 1&lt;/td&gt;
                                  &lt;td&gt;1,00&lt;/td&gt;
                                  &lt;td&gt;10,00 €&lt;/td&gt;
                                  &lt;td&gt;10,00 €&lt;/td&gt;
                                  &lt;td class="text-right"&gt;
                                      &lt;div class="dropdown"&gt;
                                          &lt;a href="#" class="btn btn-outline-light btn-sm btn-floating"
                                             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"&gt;
                                            &lt;i class="fa fa-ellipsis-h" aria-hidden="true"&gt;&lt;/i&gt;
                                          &lt;/a&gt;
                                          &lt;div class="dropdown-menu dropdown-menu-right"&gt;
                                              &lt;button class="dropdown-item" type="button"&gt;Bearbeiten&lt;/button&gt;
                                              &lt;button class="dropdown-item" type="button"&gt;Löschen&lt;/button&gt;
                                          &lt;/div&gt;
                                       &lt;/div&gt;
                                  &lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                    &lt;td&gt;Article 2&lt;/td&gt;
                                    &lt;td&gt;2,00&lt;/td&gt;
                                    &lt;td&gt;56,00 €&lt;/td&gt;
                                    &lt;td&gt;56,00 €&lt;/td&gt;
                                    &lt;td class="text-right"&gt;
                                        &lt;div class="dropdown"&gt;
                                            &lt;a href="#" class="btn btn-outline-light btn-sm btn-floating"
                                               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"&gt;
                                              &lt;i class="fa fa-ellipsis-h" aria-hidden="true"&gt;&lt;/i&gt;
                                            &lt;/a&gt;
                                            &lt;div class="dropdown-menu dropdown-menu-right"&gt;
                                                &lt;button class="dropdown-item" type="button"&gt;Bearbeiten&lt;/button&gt;
                                                &lt;button class="dropdown-item" type="button"&gt;Löschen&lt;/button&gt;
                                            &lt;/div&gt;
                                         &lt;/div&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                          &lt;/tbody&gt;
                      &lt;/table&gt;
                  &lt;/div&gt;
</code></pre>
    <p><strong>JS</strong></p>
    <pre><code>var tablePositionen = $('#tablePositionen').DataTable({
        columnDefs: [
            { targets: [0], orderable: true, className: 'reorder' },
            { targets: '_all', orderable: false }
        ],
        "ordering": false,
        "paging": false,
        rowReorder: true,
        "lengthMenu": [[10], [10]],
        "language": {
            "url": "https:////cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/German.json"
        }
    });
</code></pre>
    <p>My Table looks like this:</p>
    <p><a href="https://i.stack.imgur.com/ZxT1z.png" rel="nofollow noreferrer"><img src="ZxT1z.png" alt="enter image description here"></a></p>
    <p>And If now drag and drop the second row above the first row, the other columns values will not be the correct one:</p>
    <p><a href="https://i.stack.imgur.com/rdxRq.gif" rel="nofollow noreferrer"><img src="rdxRq.gif" alt="enter image description here"></a></p>
    <p>Where is my mistake??</p>
   </div>
   <div class="tags">
    <span class="tag">javascript</span><span class="tag">datatables</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td></td>
       <td><span>table-responsive, is it from bootstrap? or somewhere else?</span> <span> - </span> <span class="display-name">Iria</span> <span> </span> <span class="date">1 Oct 2021 at 09:32</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>have you tried setting ordering as true?</span> <span> - </span> <span class="display-name">Iria</span> <span> </span> <span class="date">1 Oct 2021 at 09:32</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>If you can see, the first column "Bezeichnung" will be sorted. but the other column values stay on old position.</span> <span> - </span> <span class="display-name">Trombone0904</span> <span> </span> <span class="date">1 Oct 2021 at 09:33</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>I don't know which framework you are using, but you can get the event, reordering them, get the new order, updating the list with the new order, and then start again. If you are using a particular framework or ui components, maybe there is a tool for this that does it for you</span> <span> - </span> <span class="display-name">Iria</span> <span> </span> <span class="date">1 Oct 2021 at 09:38</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>I don't understand your question. I am using the basic DataTables: <a href="https://datatables.net" rel="nofollow noreferrer">datatables.net</a></span> <span> - </span> <span class="display-name">Trombone0904</span> <span> </span> <span class="date">1 Oct 2021 at 09:41</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>have you check on support? there is a link on that page</span> <span> - </span> <span class="display-name">Iria</span> <span> </span> <span class="date">1 Oct 2021 at 09:59</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>1 Oct 2021 at 15:07</span>
     </div>
    </div>
    <div>
     <p>The changes I made to resolve your issue:</p>
     <p>(1) Added a "sequence" column as the first column in the table.</p>
     <p>(2) Changed the DataTable initialization options to hide that sequence column, and, instead, allow the user to perform a drag from anywhere in a row (as opposed to the default location which is the first column only).</p>
     <p>(3) Removed the remaining unneeded options (although you can add back anything you need such as <code>"paging": false</code>). Note that some options contradicted each other, such as <code>paging</code> and <code>lengthMenu</code>.</p>
     <p>(4) Made a minor change to the language URL (too many forward slashes). This is not relevant to the drag/drop issue.</p>
     <p>Here is the result:</p>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code>$(document).ready(function() {

var tablePositionen = $('#tablePositionen').DataTable({
        rowReorder: {
            selector: 'tr'
        },
        columnDefs: [
            { targets: 0, visible: false }
        ],
        "language": {
            "url": "https:////cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/German.json"
        }
    });
} );</code></pre>
       <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Demo&lt;/title&gt;
  &lt;script src="https://code.jquery.com/jquery-3.5.1.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"&gt;&lt;/script&gt;
  &lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css"&gt;
  &lt;link rel="stylesheet" type="text/css" href="https://datatables.net/media/css/site-examples.css"&gt;

  &lt;!-- row reorder --&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/rowreorder/1.2.8/js/dataTables.rowReorder.min.js"&gt;&lt;/script&gt;
  &lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/rowreorder/1.2.8/css/rowReorder.dataTables.min.css"/&gt; 

&lt;/head&gt;

&lt;body&gt;

&lt;div style="margin: 20px;"&gt;

&lt;table id="tablePositionen" class="table table-lg hover table-striped"&gt;
  &lt;thead&gt;
  &lt;tr&gt;
      &lt;th&gt;Seq.&lt;/th&gt;
      &lt;th&gt;Bezeichnung&lt;/th&gt;
      &lt;th&gt;Menge&lt;/th&gt;
      &lt;th&gt;Preis&lt;/th&gt;
      &lt;th&gt;Gesamt&lt;/th&gt;
      &lt;th class="text-right"&gt;&lt;/th&gt;
  &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;Article 1&lt;/td&gt;
          &lt;td&gt;1,00&lt;/td&gt;
          &lt;td&gt;10,00 €&lt;/td&gt;
          &lt;td&gt;10,00 €&lt;/td&gt;
          &lt;td class="text-right"&gt;
              &lt;div class="dropdown"&gt;
                  &lt;a href="#" class="btn btn-outline-light btn-sm btn-floating"
                     data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"&gt;
                    &lt;i class="fa fa-ellipsis-h" aria-hidden="true"&gt;&lt;/i&gt;
                  &lt;/a&gt;
                  &lt;div class="dropdown-menu dropdown-menu-right"&gt;
                      &lt;button class="dropdown-item" type="button"&gt;Bearbeiten&lt;/button&gt;
                      &lt;button class="dropdown-item" type="button"&gt;Löschen&lt;/button&gt;
                  &lt;/div&gt;
               &lt;/div&gt;
          &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
            &lt;td&gt;2&lt;/td&gt;
            &lt;td&gt;Article 2&lt;/td&gt;
            &lt;td&gt;2,00&lt;/td&gt;
            &lt;td&gt;56,00 €&lt;/td&gt;
            &lt;td&gt;56,00 €&lt;/td&gt;
            &lt;td class="text-right"&gt;
                &lt;div class="dropdown"&gt;
                    &lt;a href="#" class="btn btn-outline-light btn-sm btn-floating"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"&gt;
                      &lt;i class="fa fa-ellipsis-h" aria-hidden="true"&gt;&lt;/i&gt;
                    &lt;/a&gt;
                    &lt;div class="dropdown-menu dropdown-menu-right"&gt;
                        &lt;button class="dropdown-item" type="button"&gt;Bearbeiten&lt;/button&gt;
                        &lt;button class="dropdown-item" type="button"&gt;Löschen&lt;/button&gt;
                    &lt;/div&gt;
                 &lt;/div&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;/div&gt;



&lt;/body&gt;
&lt;/html&gt;</code></pre>
      </div>
     </div>
     <p></p>
     <p>Just to add: All of the row reorder <a href="https://datatables.net/extensions/rowreorder/examples/" rel="nofollow noreferrer">examples</a> use an initial column to support reordering (the <code>Seq.</code> column I added). This is required - although I don't recall seeing this explicitly mentioned in the documentation. For your case, I chose to hide this initial (but required) column, and use the "full row" drag option.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>