<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Datatables/JQuery/Javascript - Research Abstract and "Open" Button in same TD, word "Open" being added to exported export</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>Datatables/JQuery/Javascript - Research Abstract and "Open" Button in same TD, word "Open" being added to exported export</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>0</span>
    </div>
    <div>
     <span>Asker: </span> <span>tenebris silentio</span>
    </div>
    <div>
     <span>Asked: </span> <span>14 Aug 2020 at 17:21</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/63417362/datatables-jquery-javascript-research-abstract-and-open-button-in-same-td-w">source</a>
    </div>
   </div>
   <div>
    <p>I'm creating a dataset of funded research projects for a client using Jquery and Datatables. Everything is working out fine right now, except the word "Open" embedded into my button is also being included in the export. The issue is that users don't want the research abstract to appear by default when they open the webpage, but they want to ability to either open it up in a modal or export their results and see it there. There could be 200 projects added to this and each abstract has around 1,000 characters, therefore, I'm trying to make it invisible by default. I can get the abstract to appear within a modal and I can get it to appear in the exported PDF/XLSX/CSV file, however I'm getting the abstract + "Open" in the output. I get why this is happening - I have the abstract and the button in the same data cell, but I don't know how else to make this work. Any help is appreciated.</p>
    <p><strong>Bottom Line</strong>: I don't want the word "Open" from my button being concatenated with the research abstract field in the exported output.</p>
    <p>Here's my codepen: <a href="https://codepen.io/tenebris_silentio/pen/eYZmPQE" rel="nofollow noreferrer">https://codepen.io/tenebris_silentio/pen/eYZmPQE</a></p>
    <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;

&lt;script&gt;
$(document).ready(function() {
    $('#example').DataTable( {
        dom: 'Bfrtip',

        buttons: [
            {
                extend: 'copyHtml5',
                exportOptions: {
                    columns: [ 0, ':visible' ]
                }
            },
            {
                extend: 'excelHtml5',
                exportOptions: {
                    columns: ':visible'
                }
            },
            {
                extend: 'csvHtml5',
                exportOptions: {
                    columns: ':visible'
                }
            },


            {
                extend: 'pdfHtml5',
                orientation: 'landscape',
                exportOptions: {
                    columns: ':visible'
                }
            },

            'colvis'
        ]
    } );
} );
&lt;/script&gt;



&lt;table id="example" class="display"&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th class="all" data-toggle="tooltip" title="The known name of the project." &gt;Project Name&lt;/th&gt;
      &lt;th class="all" data-toggle="tooltip" title="The provided unique ID that distinguishes projects."&gt;Project Number&lt;/th&gt;
      &lt;th class="all" data-toggle="tooltip" title="The conclusing time point of a project, which is sometimes, but not always the point at which funding ends."&gt;End Date&lt;/th&gt;
      &lt;th class="all" data-toggle="tooltip" title="The primary funder of the project."&gt;Funder&lt;/th&gt;
      &lt;th class="all" data-toggle="tooltip" title="The principal investigator(s) or person responsible for the project."&gt;PI&lt;/th&gt;
      &lt;th style="all"&gt;Source&lt;/th&gt;
      &lt;th style="all"&gt;Keywords&lt;/th&gt;
      &lt;th style="all" data-toggle="tooltip" title="A list of project descriptors."&gt;Tags&lt;/th&gt;
      &lt;th style="all"&gt;Clinical Setting&lt;/th&gt;
      &lt;th style="all"&gt;Project URL&lt;/th&gt;
      &lt;th class="all" data-toggle="tooltip" title="A brief description on the scope and aims of a project."&gt;Abstract&lt;/th&gt;

    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;

        &lt;td&gt;Measuring Patient Handling and Mobility Experiences&lt;/td&gt;

        &lt;td&gt;NIH 17423424&lt;/td&gt;

        &lt;td&gt;1/1/2016&lt;/td&gt;

        &lt;td&gt;National Institutes of Health&lt;/td&gt;

        &lt;td&gt;John Smith, Ph.D&lt;/td&gt;

       &lt;td&gt;National Institutes of Health&lt;/td&gt;

       &lt;td&gt;Mobility, Distance, Measurement&lt;/td&gt;

       &lt;td&gt;digital&lt;/td&gt;

       &lt;td&gt;primary care&lt;/td&gt;

       &lt;td&gt;&lt;a href="https://www.testwebsite.com"&gt;Abstract Page&lt;/a&gt;&lt;/td&gt;

        &lt;td&gt;&lt;div id="ex1"class="modal"&gt;
  &lt;p&gt;
  &lt;b&gt;Abstract&lt;p&gt;&lt;/b&gt;                    Background: Safe Patient Handling and Mobility (SPHM) consists of ergonomic techniques and equipment to move patients who cannot move independently. SPHM helps minimize adverse events (pressure ulcers, falls), and staff injuries. Despite benefits, we know little about how patients experience assisted mobility. With valid and reliable scales, we can measure patient experiences, thus facilitating improved care, more tailored evaluation, and more targeted clinical staff education. Patients in rehabilitation are an ideal group to study.
  &lt;b&gt;&lt;/p&gt;
  &lt;a href="#" rel="modal:close"&gt;&lt;/a&gt;
  &lt;/div&gt;
  &lt;p&gt;&lt;a href="#ex1" rel="modal:open"&gt;&lt;button class="button"&gt;&lt;span&gt;Open&lt;/span&gt;&lt;/button&gt;&lt;/a&gt;&lt;/p&gt;&lt;/td&gt;

  &lt;/tbody&gt;
&lt;/table&gt;

</code></pre>
   </div>
   <div class="tags">
    <span class="tag">javascript</span><span class="tag">html</span><span class="tag">jquery</span><span class="tag">datatables</span><span class="tag">bootstrap-modal</span>
   </div>
   <hr>
   <div class="comment">
    <table>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>14 Aug 2020 at 18:30</span>
     </div>
    </div>
    <div>
     <p>In each of your <code>exportOptions</code> sections (one per button), you can add an option to handle this - for example:</p>
     <pre><code>exportOptions: {
  columns: ':visible',
  format: {
    body: function ( data, row, column, node ) {
      var text = node.textContent;
      return column === 10 ? text.replace( /Open$/, '' ).trim() : data;
    }
  }
}
</code></pre>
     <p>How this works:</p>
     <p>For each row of data, if the column index is 10 (the 11th visible column) then the <code>format.body</code> function will extract the text from that node using <code>node.textContent</code>.</p>
     <p>Then the final unwanted "Open" text will be removed - and any remaining trailing spaces will be trimmed.</p>
     <p>For all other columns, the cell's data is passed through unchanged.</p>
     <p>See the <code>exportData</code> documentation <a href="https://datatables.net/reference/api/buttons.exportData()" rel="nofollow noreferrer">here</a>, for reference.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>This worked perfectly. Thank you for the code and explanation.</span> <span> - </span> <span class="display-name">tenebris silentio</span> <span> </span> <span class="date">17 Aug 2020 at 11:56</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>