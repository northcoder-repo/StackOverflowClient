<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How to reload datatable by using new url and some parameters without reinitialize it</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>How to reload datatable by using new url and some parameters without reinitialize it</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>4</span>
    </div>
    <div>
     <span>Asker: </span> <span>Cutis</span>
    </div>
    <div>
     <span>Asked: </span> <span>17 Feb 2021 at 13:56</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/66243388">source</a>
    </div>
   </div>
   <div>
    <p>I know I can make ajax request on datatable using ajax.url like <a href="https://datatables.net/reference/api/ajax.url()" rel="nofollow noreferrer">this</a> :</p>
    <pre><code>var table = $('#example').DataTable( {
    ajax: "/mylink"
} );

...

table.ajax.url( 'newData.json' ).load();
</code></pre>
    <p>But how can I pass data as parameters to url using the same syntax? I try <code>table.ajax.url( 'mylink' ).data(myData).load();</code> . Obsviouly it is not solution.</p>
    <p>I do not want to destroy and reinitialize the datatable in order to use :</p>
    <pre><code>...
"ajax" : {
        "url" : "mylink",
        "data" : myData
 }
 ...
</code></pre>
    <p>What do I do? What is the syntax using existing initialized table (here js var table)? thanks</p>
   </div>
   <div class="tags">
    <span class="tag">ajax</span><span class="tag">datatables</span>
   </div>
   <hr>
   <div class="comment">
    <table>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>11</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>17 Feb 2021 at 15:11</span>
     </div>
    </div>
    <div>
     <p>In your DataTables <code>ajax</code> section, instead of using the <em>object</em> form of the <code>data</code> option, you can use the <em>function</em> form. This allows you to dynamically pass in your request data for each new ajax call.</p>
     <p>So, instead of this:</p>
     <pre><code>"data" : myData
</code></pre>
     <p>It would be this:</p>
     <pre><code>"data": function () {
  return myData;
}
</code></pre>
     <p>And, as you already note, you can use the <code>ajax.url()</code> call to specify the new URL:</p>
     <pre><code>table.ajax.url( 'newData.json' ).load();
</code></pre>
     <hr>
     <p><strong>Warning</strong>: This assumes you are <em>not</em> using server-side processing, as this will overwrite the server-side request data which is auto-generated by DataTables. If you are using server-side processing, then you have to merge your custom data into the pre-existing request data.</p>
     <p>The <a href="https://datatables.net/reference/option/ajax" rel="noreferrer">documentation</a> shows an example for that, using jQuery <code>extend</code>:</p>
     <pre><code>"data": function ( d ) {
  return $.extend( {}, d, {
    "extra_search": $('#extra').val()
  } );
}
</code></pre>
     <p>You don't <em>need</em> to use <code>$.extend</code>. You just need to be careful that you do not overwrite the request data generated by Datatables.</p>
     <p>Another way to handle this is to simply append data to the data structure represented by <code>d</code> in <code>"data": function ( d )</code>:</p>
     <pre><code>"data": function ( d ) {
  d.extra_search = $('#extra').val();
}
</code></pre>
     <hr>
     <p><strong>Update</strong> with a more detailed example</p>
     <p>Here is a full example, which you can copy into a html file and run for yourself, if you wish. It uses data from a dummy JSON provider, just for testing.</p>
     <p>The HTML, showing the table and a button. The button is how I tested the ability to call a new URL and pass new request parameters to that new URL:</p>
     <pre><code>&lt;div style="margin: 20px;"&gt;
    &lt;button id="button_one" type="button"&gt;Resubmit&lt;/button&gt;
    &lt;br&gt;&lt;br&gt;
    &lt;table id="example" class="display" style="width:100%"&gt;&lt;/table&gt;
&lt;/div&gt;
</code></pre>
     <p>Here is the related script containing the DataTable definition and a function which calls the new URL (with new request parameters):</p>
     <pre><code>&lt;script&gt;

$(document).ready(function() {

  // ajax for initial table creation:
  var requestUrl = "https://jsonplaceholder.typicode.com/posts";
  var requestData = { "name": "Abel", "location": "here" };

  var table = $('#example').DataTable( {
    ajax: {
      method: "GET",
      url: requestUrl,
      "data": function ( ) {
        return requestData;
      },
      dataSrc: "",  
    },
    "columns": [
      { "title": "User ID", "data": "userId" },
      { "title": "ID", "data": "id" },
      { "title": "Title", "data": "title" }
    ]
            
  } );
  
  $("#button_one").click(function() {
    // subsequent ajax call, with button click:
    requestUrl = "https://jsonplaceholder.typicode.com/todos";
    requestData = { "name": "Charlie", "location": "there" };
    table.ajax.url( requestUrl ).load();
  });
  
} );

&lt;/script&gt;
</code></pre>
     <p>The key points in this example are:</p>
     <ol>
      <li>
       <p>There are 2 different URLs. The first one is used when DataTables is created. The second one is used when the button is clicked.</p></li>
      <li>
       <p>There are 2 different sets of request data, for the two URLs.</p></li>
     </ol>
     <p>Using this approach, you can repeatedly call <code>table.ajax.url( requestUrl ).load()</code> with different URLs and different sets of request data, without needing to destroy the DataTable.</p>
     <hr>
     <p><strong>Handling Form Data</strong></p>
     <p>Here is a simple HTML form:</p>
     <pre class="lang-html prettyprint-override"><code>&lt;form id="filter-form"&gt;
    City:&lt;input type="text" id="city" name="city"&gt;
    Country:&lt;input type="text" id="country" name="country"&gt;
    &lt;input type="submit" value="Submit"&gt;
&lt;/form&gt; 
</code></pre>
     <p>For testing, I have the following JavaScript which captures the contents of the form into an array:</p>
     <pre><code>var form_data = [];

$( "#filter-form" ).submit(function( event ) {
  event.preventDefault();
  form_data = $( this ).serializeArray();
  table.ajax.url( url ).load();
});
</code></pre>
     <p>The end result is data like this in the <code>form_data</code> variable:</p>
     <pre><code>[
  {
    "name": "city",
    "value": "Berlin"
  },
  {
    "name": "country",
    "value": "Germany"
  }
]
</code></pre>
     <p>Now I can merge that data into the automatically created server-side request data. This is where I can choose to use the <code>$.extend()</code> function I mentioned above:</p>
     <pre><code>  $('#example').DataTable( {
    serverSide: true,
    ajax: { 
      method: "POST",
      url: url, // from a variable
      data: function( d ) {
        return $.extend( {}, d, { "my_extra_data": form_data } );
      }
    },
    ... //whatever else is in your DataTable definition...
  });
</code></pre>
     <p>This function results in request data like the following:</p>
     <pre><code>{
    "draw": "2",
    "columns[0][data]": "id",
    "columns[0][name]": "",
      ...
    "start": "0",
    "length": "10",
    "search[value]": "",
    "search[regex]": "false",
    "my_extra_data[0][name]": "city",
    "my_extra_data[0][value]": "Berlin",
    "my_extra_data[1][name]": "country",
    "my_extra_data[1][value]": "Germany"
}
</code></pre>
     <p>You can see your <code>my_extra_data</code> values are included along with the server-side auto-generated request data. And all of this gets sent to the server as part of your request.</p>
     <p>If you are using <code>POST</code> then it's in the request body.</p>
     <p>If you are using <code>GET</code>, then it's the same data - but added to the URL as a query string.</p>
     <p>In both cases, it's converted to the standard string representation used by form data.</p>
     <p>It's then up to the server-side code to access this data in the usual way.</p>
     <p>NOTE: You may have expected your URL-encoded form data to be provided as this:</p>
     <pre><code>...&amp;city=Berlin&amp;country=Germany
</code></pre>
     <p>But instead it is provided as arrays of name/value pairs:</p>
     <pre><code>&amp;my_extra_data%5B0%5D%5Bvalue%5D=Berlin&amp;my_extra_data%5B1%5D%5Bname%5D=country&amp;my_extra_data%5B1%5D%5Bvalue%5D=Germany
</code></pre>
     <p>So, there is extra server-side work needed to parse this data.</p>
     <p>If you want to convert your form data <em>directly</em> into a JavaScript object like this:</p>
     <pre><code>{ "city": "Berlin", "country", "Germany" }
</code></pre>
     <p>then take a look at the answers to this question:</p>
     <p><a href="https://stackoverflow.com/questions/1184624/convert-form-data-to-javascript-object-with-jquery">Convert form data to JavaScript object with jQuery</a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>I want to use table.ajax.url( 'newData.json' ).load(); with url and parameters (data I must pass). I am afraid your answer currently is not helping me, or I don't understand your solution</span> <span> - </span> <span class="display-name">Cutis</span> <span> </span> <span class="date">17 Feb 2021 at 16:08</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>I have provided a more detailed example, showing the approach. Let me know if that clarifies my answer - or not. And, let me know if I have misunderstood what you are trying to do, of course.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">17 Feb 2021 at 16:33</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Thanks @andrewjames for your explanation. In my case it is loaded from serverside, and when I apply table.ajax.url('myurl'+"?filter_author="+filter_author).load‌​() it works. the first initialization uses only url "myurl". But the issue is I need to send more params. and these are from form. so it will be painful to add each param to the url using &amp; and ?. This is why I am asking a simply method to do that.</span> <span> - </span> <span class="display-name">Cutis</span> <span> </span> <span class="date">18 Feb 2021 at 12:30</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Can you clarify what you mean by "<i>it is loaded from serverside</i>"? Does that mean your DataTable is using <code>serverSide: true</code>? Or does it mean something else? (You don't need to build a string using <code>?</code> and <code>&amp;</code> - you can use the approach I have provided - but with some changes to account for the data being in a form, and for <code>serverSide</code>, if you are using that).</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">18 Feb 2021 at 13:05</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Yes I mean serverside:true.` but with some changes to account for the data being in a form, and for serverSide` so what are these changes I need to make for form data? when I check your solution, the ajax request on button click does not have submitted data.</span> <span> - </span> <span class="display-name">Cutis</span> <span> </span> <span class="date">18 Feb 2021 at 15:55</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I added some more notes relating to form data and server-side processing.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">18 Feb 2021 at 19:54</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Thanks so much @andrewjames for being so patient and kind.</span> <span> - </span> <span class="display-name">Cutis</span> <span> </span> <span class="date">19 Feb 2021 at 13:40</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>