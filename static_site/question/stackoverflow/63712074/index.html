<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>UTF-8 does not print characters to the console</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>UTF-8 does not print characters to the console</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>8</span>
    </div>
    <div>
     <span>Asker: </span> <span>Yassin Hajaj</span>
    </div>
    <div>
     <span>Asked: </span> <span>2 Sep 2020 at 19:05</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/63712074/utf-8-does-not-print-characters-to-the-console">source</a>
    </div>
   </div>
   <div>
    <p>I have the following code</p>
    <pre><code>public class MainDefault {
        public static void main (String[] args) {
                System.out.println("²³");
                System.out.println(Arrays.toString("²³".getBytes()));
        }
}
</code></pre>
    <p>But can't seem to print the special characters to the console</p>
    <p>When I do the following, I get the following result</p>
    <pre><code>$ javac MainDefault.java
$ java MainDefault
</code></pre>
    <p><a href="https://i.stack.imgur.com/YqKEd.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/YqKEd.png" alt="MainDefaultPrinting"></a></p>
    <p>On the other hand, when I compile it and run it like this</p>
    <pre><code>$ javac -encoding UTF8 MainDefault.java
$ java MainDefault
</code></pre>
    <p><a href="https://i.stack.imgur.com/wrvzm.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/wrvzm.png" alt="MainDefaultUTF8CompilationOnly"></a></p>
    <p>And when I run it using the file encoding UTF8 flag, I get the following</p>
    <pre><code>$ java -Dfile.encoding=UTF8 MainDefault
</code></pre>
    <p><a href="https://i.stack.imgur.com/PSafY.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/PSafY.png" alt="MainDefaultUTF8CompilationAndRun"></a></p>
    <p>It's doesn't seem to be a problem with the console (Git Bash on Windows 10), as it prints the characters normally</p>
    <p><a href="https://i.stack.imgur.com/URPsy.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/URPsy.png" alt="Echo"></a></p>
    <p>Thanks for your help</p>
   </div>
   <div class="tags">
    <span class="tag">java</span><span class="tag">encoding</span><span class="tag">utf-8</span><span class="tag">compilation</span><span class="tag">character-encoding</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td></td>
       <td><span>Maybe <a href="https://stackoverflow.com/questions/48402025/unicode-output-java-windows-cmd">this</a> or <a href="https://stackoverflow.com/questions/2168350/java-charset-problem-on-linux">this one</a> (I tried this from IntelliJ and saw the correct output)</span> <span> - </span> <span class="display-name">Gryphon</span> <span> </span> <span class="date">2 Sep 2020 at 19:16</span></td>
      </tr>
      <tr>
       <td>1</td>
       <td><span>The sequence of numbers that comprise the string -- -62,-78,-62,-77 -- are (as unsigned bytes) 0xC2,0xB2,0xC2,0xB3. These are the CP437 values for the ASCII box characters that appear in the screenshots. These values probably appear in other character sets as well, but not in UTF-8 or even ISO-88591-1. It looks as if either the file being compiled is not UTF-8, or the terminal displaying the output is not set up to display UTF-8. If the problem is in the encoding of the file, then System.out.println("\u00B2\u00B3") should produce the correct output, as these are the Unicode escapes for ²³</span> <span> - </span> <span class="display-name">Kevin Boone</span> <span> </span> <span class="date">2 Sep 2020 at 21:21</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>I get the expected output on Mac and also on <a href="https://github.com/fabriziocucci/git-bash-for-mac" rel="nofollow noreferrer">Git Bash for Mac</a>. Probably, it's a problem with Windows.</span> <span> - </span> <span class="display-name">Arvind Kumar Avinash</span> <span> </span> <span class="date">5 Sep 2020 at 11:22</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>12</span>
     </div>
     <div>
      <span>Answerer: </span> <span>jccampanero</span>
     </div>
     <div>
      <span> Answered: </span> <span>5 Sep 2020 at 18:42</span>
     </div>
    </div>
    <div>
     <p>Your code are not printing the right characters in the console because your Java program and the console are using different character sets, different encodings.</p>
     <p>If you want to obtain the same characters, you first need to determine which character sets are in place.</p>
     <p>This process will depend on the "console" in which you are outputting your results.</p>
     <p>If you are working with Windows and <code>cmd</code>, as @RickJames suggested, you can use the <code>chcp</code> command to determine the active code page.</p>
     <p>Oracle provides the Java full supported encodings information, and the correspondence with other alias - code pages in this case - in <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html" rel="noreferrer">this</a> page.</p>
     <p><a href="https://stackoverflow.com/questions/46047993/is-there-any-mapping-table-between-windows-code-and-java-charset">This</a> stackoverflow answer also provides some guidance about the mapping between Windows Code Pages and Java charsets.</p>
     <p>As you can see in the provided links, the code page for <code>UTF-8</code> is <code>65001</code>.</p>
     <p>If you are using Git Bash (MinTTY), you can follow @kriegaex instructions to verify or configure <code>UTF-8</code> as the terminal emulator encoding.</p>
     <p>Linux and UNIX, or UNIX derived systems like Mac OS, do not use code page identifiers, but locales. The locale information can vary between systems, but you can either use the <code>locale</code> command or try to inspect the <code>LC_*</code> system variables to find the required information.</p>
     <p>This is the output of the <code>locale</code> command in my system:</p>
     <pre class="lang-sh prettyprint-override"><code>LANG="es_ES.UTF-8"
LC_COLLATE="es_ES.UTF-8"
LC_CTYPE="es_ES.UTF-8"
LC_MESSAGES="es_ES.UTF-8"
LC_MONETARY="es_ES.UTF-8"
LC_NUMERIC="es_ES.UTF-8"
LC_TIME="es_ES.UTF-8"
LC_ALL=
</code></pre>
     <p>Once you know this information, you need to run your Java program with the <code>file.encoding</code> VM option corresponding to the right charset:</p>
     <pre class="lang-sh prettyprint-override"><code>java -Dfile.encoding=UTF8 MainDefault
</code></pre>
     <p>Some classes, like <code>PrintStream</code> or <code>PrintWriter</code>, allows you to indicate the <code>Charset</code> in which the information will be outputted.</p>
     <p>The <code>-encoding</code> <code>javac</code> option only allows you to specify the character encoding used by source files.</p>
     <p>If you are using Windows with Git Bash, consider also reading this @rmunge <a href="https://stackoverflow.com/a/63872923/13942448">answer</a>: it provides information about a possible bug in the tool that may be the reason for the problem and that prevents the terminal from running correctly out of the box without the need for manual encoding adjustments.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>Hi JCCampanero, this helped me find the correct answer so I'll consider it as the valid one. What I did to print the characters to the console was to use <code>chcp.com 65001</code> and then ran my scripts again, and it worked :D</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">12 Sep 2020 at 07:19</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Thank you very much @YassinHajaj! I am very happy to know that the answer was helpful.</span> <span> - </span> <span class="display-name">jccampanero</span> <span> </span> <span class="date">12 Sep 2020 at 08:46</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@YassinHajaj please note that chcp only changes the OEM codepage of the running console. After closing and opening the console again the codepage will be set back to default.</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">13 Sep 2020 at 16:57</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>This answer does not explain the reason for the described behavior. It only gives some general hints for workarounds that shouldn't be required.</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">13 Sep 2020 at 17:10</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I am sorry you think the answer is not correct @rmunge. In it, I just tried to explain that. regardless of the output system (terminal, console, etc.), the problem arises from using a different character set in Java and on that output system, and tried to help the user how he can solve the problem or avoid it.</span> <span> - </span> <span class="display-name">jccampanero</span> <span> </span> <span class="date">13 Sep 2020 at 17:33</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@jccampanero I didn't write that your answer is wrong. But changing the codepage and overriding file.encoding to UTF-8 shouldn't be necessary if the used Git Bash version would work correctly. The root cause of the problem is a bug in Git for Windows, resp. MSYS2 (see my latest answer to the question for details). You are describing a valid temporal workaround but since changing the codepage through chcp does only impacts current console it is just a workaround and not a real solution.</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">13 Sep 2020 at 18:29</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@jccampanero don't get me wrong. your answer is not wrong. i just want to avoid that others who are facing the same issue start playing around with codepages and charsets after reading the accepted answer although an update of git for windows could solve the problem easily. please check my second answer to this question, maybe you could also add a small hint to your accepted answer. then i would of course upvote your answer again</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">13 Sep 2020 at 18:41</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@rmunge Please, do not worry. In fact, your answer is very well documented and provide a great background information. I upvoted it and updated my answer with a reference to it. At the end, the only important thing is that the answer is as useful as possible to the users.</span> <span> - </span> <span class="display-name">jccampanero</span> <span> </span> <span class="date">14 Sep 2020 at 12:40</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Thanks @jccampanero. Collaborative answering at its best :-)</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">14 Sep 2020 at 16:16</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">↑</a> </span> <span class="arrow"> <a href="#answer_3">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>5</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Tharindu Sathischandra</span>
     </div>
     <div>
      <span> Answered: </span> <span>9 Sep 2020 at 04:05</span>
     </div>
    </div>
    <div>
     <p>I am also using the <em>Git Bash on Windows 10</em> and It works totally fine for me.</p>
     <p>Here's how it prints,</p>
     <p><a href="https://i.stack.imgur.com/ZQ0lg.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/ZQ0lg.png" alt="Trying to reproduce it in Git Bash on Windows 10"></a></p>
     <p>Terminal version is <code>mintty 3.0.2 (x86_64-pc-msys)</code> and My text properties were,</p>
     <p><a href="https://i.stack.imgur.com/fWAWz.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/fWAWz.png" alt="enter image description here"></a></p>
     <p>So, I tried to reproduce your outputs by changing Character Sets;</p>
     <p><a href="https://i.stack.imgur.com/BPptW.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/BPptW.png" alt="enter image description here"></a></p>
     <p>By setting Character Set to <code>CP437 (OEM codepage)</code> (Note that this automatically changed Locale to <code>C</code> too), I could be able to get the output as you got.</p>
     <p><a href="https://i.stack.imgur.com/sJVco.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/sJVco.png" alt="enter image description here"></a></p>
     <p>And then after when I change it back to <code>UTF-8 (Unicode)</code>, the I could get the output as expected!</p>
     <p><a href="https://i.stack.imgur.com/RfIy8.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/RfIy8.png" alt="enter image description here"></a></p>
     <p>Therefore, it is clear that the problem is with your console's Character Set.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>This is basically a duplicate of my own answer from a few days ago, even the screenshots are the same. This one is just more verbose.</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">11 Sep 2020 at 04:00</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@kriegaex I wanted reproduce and resolve the problem, so then we could clearly understand where the fault is. So, I posted what I did.</span> <span> - </span> <span class="display-name">Tharindu Sathischandra</span> <span> </span> <span class="date">11 Sep 2020 at 13:53</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_3"><span>Answer 3</span> <span class="arrow"> <a href="#answer_2">↑</a> </span> <span class="arrow"> <a href="#answer_4">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>5</span>
     </div>
     <div>
      <span>Answerer: </span> <span>rmunge</span>
     </div>
     <div>
      <span> Answered: </span> <span>13 Sep 2020 at 16:18</span>
     </div>
    </div>
    <div>
     <p><strong>The short version:</strong></p>
     <p>The unexpected behavior is reproducible with the following setup:</p>
     <ul>
      <li>
       <p>Windows 10 with English, German or French language, or any other language that leads to ANSI and OEM codepages that encode ² and ³ differently</p></li>
      <li>
       <p>Git for Windows 2.27.0 (installed with default setting i.e. configured to use MinTTY and experimental support for pseudo consoles disabled)</p></li>
      <li>
       <p>Source code is stored in UTF-8 encoding</p></li>
     </ul>
     <p>To get correct bahavior:</p>
     <ul>
      <li>
       <p>Either re-install Git for Windows 2.27.0 and enable experimental support for pseudo consoles on the last page of the installer or upgrade to latest 2.28 version</p></li>
      <li>
       <p>Compile your code with javac -encoding UTF8</p></li>
      <li>
       <p>Call java without overriding file.encoding</p></li>
     </ul>
     <p><strong>The medium version:</strong></p>
     <p>Git for Windows 2.27.0 uses a version of <a href="https://www.msys2.org/" rel="noreferrer">MSYS2</a> that does not set the code page for MinTTY by calling <a href="https://learn.microsoft.com/en-us/windows/console/setconsolecp" rel="noreferrer">SetConsoleCP</a> when support for pseudo consoles is disabled. The Java runtime determines the codepage for <code>System.out</code> by calling <a href="https://learn.microsoft.com/en-us/windows/console/getconsolecp" rel="noreferrer">GetConsoleCP</a>. Since no codepage is set when Java is executed within MinTTY terminal, the call fails and Java uses the charset returned by <code>Charset.defaultCharset()</code> as fallback. But in a Windows installation as describe above, <code>Charset.defaultCharset()</code> returns <a href="https://en.wikipedia.org/wiki/Windows-1252" rel="noreferrer">Cp-1252</a> while the default charset for consoles is <a href="https://en.wikipedia.org/wiki/Code_page_850" rel="noreferrer">Cp-850</a>. The two codepages are not fully compatible. This leads to the strange output.</p>
     <p><strong>The long version:</strong></p>
     <p>Windows has two types of codepages: ANSI and OEM codepages. The first type is intended for UI applications that do not support Unicode and the later is used for console applications. Both types encode a single character in 1 Byte but they are not fully compatible.</p>
     <p>Therefore on Windows Java has to deal with two charsets instead of one:</p>
     <ul>
      <li><code>Charset.defaultCharset()</code> returns the ANSI codepage (usually cp-1252). This charset is specified by the <em>file.encoding</em> system property. If not specified as VM argument, the java executable determines the ANSI codepage and adds the system property during initialization. <code>String.getBytes()</code> uses the charset returned by <code>Charset.defaultCharset()</code>.</li>
      <li><code>System.out</code> uses the OEM codepage for consoles (usually cp-850). The java executable gets this codepage by calling the <a href="https://learn.microsoft.com/en-us/windows/console/getconsolecp" rel="noreferrer">GetConsoleCP</a> function and sets the it as value for the internal system properties, <em>sun.stdout.encoding</em> and <em>sun.stdout.encoding</em>. When the call to <a href="https://learn.microsoft.com/en-us/windows/console/getconsolecp" rel="noreferrer">GetConsoleCP</a> fails the charset returned by <code>Charset.defaultCharset()</code> is used. This only happens when the console in which java.exe is executed hasn't set the OEM codepage before, by calling <a href="https://learn.microsoft.com/en-us/windows/console/setconsolecp" rel="noreferrer">SetConsoleCP</a></li>
     </ul>
     <p>So what happens now in the setup mentioned above?</p>
     <pre><code>$ javac MainDefault.java
$ java MainDefault
</code></pre>
     <p><a href="https://i.stack.imgur.com/YqKEd.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/YqKEd.png" alt="enter image description here"></a></p>
     <p>The native call of <a href="https://learn.microsoft.com/en-us/windows/console/getconsolecp" rel="noreferrer">GetConsoleCP</a> fails due to the <a href="https://github.com/msys2/MSYS2-packages/issues/1974https://github.com/msys2/MSYS2-packages/issues/1974" rel="noreferrer">bug in MSYS2</a>. Therefore <code>System.out</code> falls back to the charset returned by <code>Charset.defaultCharset()</code> which is cp-1252. But the OEM codepage of the console is cp-850. Therefore System.out.println("²³") produces unexpected output.</p>
     <p>The source code is stored in UTF-8. Encoding "²³" in UTF-8 requires 4 Bytes. But due to the missing <em>-encoding</em> parameter javac assumes default encoding that uses one byte per character. Therefore it interprets the 4 Bytes as 4 characters. <code>String.getBytes</code> uses the 1-Byte, based ANSI code page, cp-1252 and therefore returns 4 bytes.</p>
     <pre><code>$ javac -encoding UTF8 MainDefault.java
$ java MainDefault
</code></pre>
     <p><a href="https://i.stack.imgur.com/wrvzm.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/wrvzm.png" alt="enter image description here"></a></p>
     <p>With the <em>-encoding UTF8</em> parameter javac interprets the UTF-8 encoded source as UTF-8. So the 4 bytes of "²³" are correclty recognized as two characters. <code>System.out</code> encodes the two characters in cp-1252 which leads to 2 bytes. But since the console still uses cp-850 the output is still corrupted. <code>String.getBytes</code> encodes the wo characters also in cp-1252 which leads to 2 bytes.</p>
     <pre><code>$ java -Dfile.encoding=UTF8 MainDefault
</code></pre>
     <p><a href="https://i.stack.imgur.com/PSafY.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/PSafY.png" alt="enter image description here"></a></p>
     <p>The system property, <em>file.encoding</em> overrides the charset returned by <code>Charset.defaultCharset()</code> that is also used by <code>String.getBytes()</code>. The two characters which were first wrongly interpreted by javac as 4 characters in 8-Bit encoding are now correclty encoded in UTF-8 as two characters encoded in two bytes per character. This leads to 4 bytes. Since <em>file.encoding</em> does not have any effect on the charset that is used by <code>System.out</code> the 4 (and not 2, due the wrong interpretation of javac) characters are still encoded in cp-1252, the console still uses cp-850 and you get still a corrupted output.</p>
     <p><a href="https://i.stack.imgur.com/opFOc.png" rel="noreferrer"><img src="/question/stackoverflow/63712074/opFOc.png" alt="enter image description here"></a></p>
     <p>Your console can print ²³ since the console's 8-Bit OEM code page (cp-850) supports both characters. But it encodes it slightly different than the ANSI code page cp-1252 that is used by <code>System.out</code> ;-)</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>Hello @rmunge, thank you for the extended answer, but I swear that using chcp.com 65001 fixed it for me, it might be interesting to add it there</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">14 Sep 2020 at 10:37</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@YassinHajaj using chcp.com 65001 changes the OEM codepage to UTF-8, -Dfile.encoding changes the charset returned by Charset.defaultCharset() also to UTF-8. Due to the bug in Git Bash the charset of System.out also falls back to UTF-8. Since the console now also uses UTF-8, everything works and it is a valid workaround. The workaround will also work with newer Git Bash versions that do not contain the bug, but be aware that you have to execute chcp.com on every new console before you execute java ;-)</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">14 Sep 2020 at 16:12</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@rmunge, for me the default code page after upgrading to 2.28 is US-ASCII (ID 20127, also confirmed by chcp.com). Experimental console support is enabled. So for me your workaround does not work as described, I need a combination of UTF-8 mintyy in settings, <code>chcp.com 850</code> (how strange!) in Git Bash and optionally <code>-Dfile.encoding=UTF8</code> (actually has no effect, also super strange). My Windows 10 is German, BTW. Now I regret having upgraded my older Git version after getting curious about your solution. Before, my own solution worked just fine, not it no longer does. Git/MSYS2 is buggy now!</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">15 Sep 2020 at 04:03</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span><code>chcp.com 65001</code> also works, but without chcp the Java output is always wrong. Just in case you are involved in MSYS2 or Git for Windows, do you know if this is being actively worked on and maybe fixed anytime soon? Otherwise I might downgrade my Git again.</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">15 Sep 2020 at 04:09</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Okay, I just downgraded to Git 2.15.1.windows.2 (I still had the old installer from 2017 in my downloads folder) and everything is fine again, my own solution works and I did not notice any immediate problems after the forced downgrade.</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">15 Sep 2020 at 04:13</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@kriegaex I also have a Windows 10 with German language and my default code page is 850. cp-20127 is actually a 7-Bit US-ASCII, that's really strange. What does chcp.com return when you execute it within cmd.exe? Maybe it's a general configuration issue with your Windows 10. Windows 10 German should have code page 850 as default. When your console codepage only supports 7-Bit ASCII then it is of course impossible to write any Unicode character that are not covered by US-ASCII.</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">15 Sep 2020 at 14:35</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@kriegaex As already explained in my answer: &lt;code&gt;-Dfile.encoding=UTF8&lt;/code&gt; actually does not have any impact on the charset that is used by &lt;code&gt;System.out&lt;/code&gt; on a Windows OS. And no, I'm not involved in the development of Git for windows. But I also don't think that your issue directly realtes to Git Bash. Sounds more like a general issue with the default OEM codepage. So output of chcp witin windows console /cmd.exe) would be interesting.</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">15 Sep 2020 at 14:38</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span><code>-Dfile.encoding</code> <b>does</b> have an impact on the output seen on Git Bash in my case (now reverted to Git 2.15 where it works normally, like I said). Like I also already said, I know 20127 is US-ASCII. In my normal CMD I call <code>chcp 65001</code>, I put that into the registry for auto-start. I had this setting for years. So it is also UTF-8. In Git Bash 2.15 <code>chcp.com</code> shows 850, in 2.28 it shows 20127. In current Git versions console handling is simply broken, your workaround (which doesn't work as described for me) is not my way to go but a downgrade, which works beautifully.</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">16 Sep 2020 at 00:22</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_4"><span>Answer 4</span> <span class="arrow"> <a href="#answer_3">↑</a> </span> <span class="arrow"> <a href="#answer_5">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>4</span>
     </div>
     <div>
      <span>Answerer: </span> <span>kriegaex</span>
     </div>
     <div>
      <span> Answered: </span> <span>5 Sep 2020 at 11:04</span>
     </div>
    </div>
    <div>
     <p>The hex codes look okay for UTF-8. Maybe your character set for Git Bash is not UTF-8. For me it looks like this:</p>
     <p><a href="https://i.stack.imgur.com/Bo4AY.png" rel="nofollow noreferrer"><img src="/question/stackoverflow/63712074/Bo4AY.png" alt="Text and font settings for mintty (Git Bash)"></a></p>
     <p>The console output then also looks fine:</p>
     <p><a href="https://i.stack.imgur.com/LXt3v.png" rel="nofollow noreferrer"><img src="/question/stackoverflow/63712074/LXt3v.png" alt="Console output UTF-8"></a></p>
     <hr>
     <p><strong>Update 2020-09-13:</strong> Here is proof that <code>chcp.com &lt;codepage&gt;</code> does <strong>not</strong> work in Git Bash (mintty). It has no effect whatsoever. You really do have to select the correct codepage in the mintty settings dialogue.</p>
     <p><a href="https://i.stack.imgur.com/V4ua6.gif" rel="nofollow noreferrer"><img src="/question/stackoverflow/63712074/V4ua6.gif" alt="screen recording of Git Bash mintty"></a></p>
     <hr>
     <p><strong>Update 2020-09-15:</strong> Okay, after I read @rmunge's answer I upgraded to Git 2.28 and could reproduce the OP's problem and also use the <code>chcp</code> workaround (it did not work as described by @rmunge in my case). Because Git (or MSYS2, respectively) are so buggy in the latest versions and I don't wish to use <code>chcp.com</code> from inside Git Bash every time I open a new console, I just downgraded to version 2.15.1 which I had used for 3 years without any problems before. Maybe there are later versions without the console bug, I did not try but just use my old installer from the downloads folder on my computer. I recommend everyone to do the same and now work around this ugly bug. With a non-buggy console version, it just works like I described.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>Thank you so much for your time but this does not solve it unfortunately</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">12 Sep 2020 at 07:20</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>You are being unfair! The solution you accepted is for CMD, but the screenshots you posted are from Git Bash (which you are also mentioning in the text) with mintty terminal, I can see it because the command prompt is from a Bash-like shell. The chcp command is completely useless for mintty and Git Bash. For your question my answer is correct, the accepted answer is for CMD only. How can you accept a question and award 500 points for something answering a question you didn't ask?</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">12 Sep 2020 at 09:39</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Hi @kriegarx... chcp.com worked on git bash, i dont really understand your point.. it works and I award the bounty to the answer thats the closest to reality, his answer is that one.. no need to get fully emotional, those are virtual points..</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">12 Sep 2020 at 10:44</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>No, it doesn't. I just re-tested it. <code>chcp.com 65001</code> has no effect on mintty Git Bash. Even though a subsequent <code>chcp.com</code> displays "65001", the output is wrong. The result only looks correct when in the mintty console settings you select UTF-8. If you like, I can post a screen video proving it. If you claim otherwise, please post a screen video proving what you say. It is just not true!</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">13 Sep 2020 at 04:38</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span><b>Update:</b> I just added a screen recording (animated GIF) to my answer. It proves that my answer is correct. Like I said, <code>chcp.com</code> only works in CMD console. Even the guy who answered the question confirms that and points to my answer for Git Bash. You thanked him for <code>chcp 65001</code> even though you never asked about CMD but explicitly about Git Bash.</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">13 Sep 2020 at 05:02</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I promise Ill verify what youre saying once I open my second PC.</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">13 Sep 2020 at 09:26</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I verified, and it turns out chcp.com fixed it.. Nothing else</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">14 Sep 2020 at 10:35</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I posted a video proving what I said. You write one sentence without any proof, so I don't believe you. Where is your screen video comparable to mine?</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">14 Sep 2020 at 16:12</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Okay, because of <a href="https://stackoverflow.com/a/63872923/1082681">this new answer</a> I became curious and upgraded to the latest Git version. I was using an older one behaving as described here. I never had problems with it. The new one 2.28.0 is broken, for me even more broken than described in the other answer. So there are now bugs which did not exist in my older Git version. I assume that you also use 2.27 or 2.28, hence you have the problems described here and need to abuse chcp.com which actually ought not have any effect on mintty. Probably it does due to the experimental console support.</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">15 Sep 2020 at 03:58</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Please also note my latest update in the answer above. My recommendation is a Git downgrade to a version without console bugs in MSYS2 instead of ugly workarounds, if you do not depend on the very latest bleeding-edge Git features (I surely don't, 2.15 is fine for me).</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">15 Sep 2020 at 04:20</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_5"><span>Answer 5</span> <span class="arrow"> <a href="#answer_4">↑</a> </span> <span class="arrow"> <a href="#answer_6">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>vvg</span>
     </div>
     <div>
      <span> Answered: </span> <span>10 Sep 2020 at 14:44</span>
     </div>
    </div>
    <div>
     <p>On Windows, it has to do with your code page. You can use the command chcp to set the code page you want (for eg: if you want to set it up for a specific program launched) or you can specify the charset corresponding to the codepage in the java commanline.</p>
     <p>If the current codepage does not support the characters you are printing, you will see garbage in the console.</p>
     <p>The reason why different shells may behave differently is due to the codepage/charsets that are loaded by default.</p>
     <p>Please check out this SO post for how it is done: <a href="https://stackoverflow.com/questions/14030811/system-out-character-encoding">System.out character encoding</a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>Indeed I needed to change the code page of my terminal, thank you too !</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">12 Sep 2020 at 07:21</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_6"><span>Answer 6</span> <span class="arrow"> <a href="#answer_5">↑</a> </span> <span class="arrow"> <a href="#answer_7">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>ElpieKay</span>
     </div>
     <div>
      <span> Answered: </span> <span>22 Feb 2021 at 00:57</span>
     </div>
    </div>
    <div>
     <p>I encountered the same problem in git bash for Windows. <code>java</code> and <code>javac</code> cannot print Chinese characters properly. Setting git-bash's character set as UTF8 does not help. <code>chcp</code> does not work either. From git bash's installation wizard, I had known that programs like <code>python</code> do not work properly without <code>winpty</code>. I had added <code>alias python='winpty python</code> to <code>~/.bashrc</code>. So I tried <code>winpty java Foo.java</code> and <code>winpty javac Foo.java</code>, and luckily the problem was gone. I added the aliases to <code>~/.bashrc</code> to fix the problem:</p>
     <pre><code>alias java='winpty java'
alias javac='wintpy javac'
</code></pre>
     <p>The recent versions(v2.2x) of git bash for Windows have included an experimental feature about <code>winpty</code>, but it seems it still has some problems, so I've kept these aliases so far.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_7"><span>Answer 7</span> <span class="arrow"> <a href="#answer_6">↑</a> </span> <span class="arrow"> <a href="#answer_8">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Rick James</span>
     </div>
     <div>
      <span> Answered: </span> <span>4 Sep 2020 at 01:33</span>
     </div>
    </div>
    <div>
     <p>Hex <code>C2B2 C2B3</code>, when interpreted as UTF-8 is <code>²³</code>.</p>
     <p>I assume you are using a Windows "cmd terminal"?</p>
     <p>The command "chcp" controls the "code page". chcp 65001 provides utf8, but it needs a special charset installed, too. To set the font in the console window: Right-click on the title of the window → Properties → Font → pick Lucida Console</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>Both the screenshots and the OP's own words tell you that he is using Git Bash, not cmd.exe. ;-)</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">5 Sep 2020 at 11:05</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Bash is a scripting language; cmd is the rendering app. They are separate animals. (You need both.)</span> <span> - </span> <span class="display-name">Rick James</span> <span> </span> <span class="date">5 Sep 2020 at 21:10</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>You want to nitpick here? Then I will, too: Both Cmd and Bash are shells (command processors). You can start Bash from Cmd and vice versa. If you start Git Bash on Windows by just clicking the icon, a mintty terminal emulator window in a separate process is automatically started, just like when you click on the Windows terminal icon it also starts a conhost.exe for the terminal. If you open subshells, no additional terminal processes will be started. See also my answer here with mintty settings screenshots. Of course starting bash.exe from Windows terminal is possible, but a rare use case.</span> <span> - </span> <span class="display-name">kriegaex</span> <span> </span> <span class="date">6 Sep 2020 at 04:30</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_8"><span>Answer 8</span> <span class="arrow"> <a href="#answer_7">↑</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>rmunge</span>
     </div>
     <div>
      <span> Answered: </span> <span>11 Sep 2020 at 21:53</span>
     </div>
    </div>
    <div>
     <p>Please verify that your Windows 10 installation does <strong>not</strong> have Unicode UTF-8 support enabled. You can see this option by going to Settings and then: All Settings -&gt; Time &amp; Language -&gt; Language -&gt; "Administrative Language Settings"</p>
     <p>This is what it looks like - the feature should be unchecked.</p>
     <p><a href="https://i.stack.imgur.com/dv0tU.png" rel="nofollow noreferrer"><img src="/question/stackoverflow/63712074/dv0tU.png" alt="enter image description here"></a></p>
     <p><strong>Rationale:</strong></p>
     <p><code>"²³".getBytes()</code> returns the encoding of the string, based on the detected default charset. On a Windows 10 system the default charset should usually be a 1-Byte based encoding, independent from whether you launch java.exe from a Windows console or from Git Bash. But your first screenshot shows a 4-Byte encoding that is actually UTF-8. So your JVM seems to detect UTF-8 as the wrong default charset that is incompatible with the codepage of your console.</p>
     <p>Your console can print ²³ because both characters are supported by the used code page, but the encoding is based on one byte per character while UTF-8 encoding requires 2 Bytes for each of these two characters.</p>
     <p>I have no simple explanation for your second screenshot but be aware that Git Bash is based on <a href="https://www.msys2.org/" rel="nofollow noreferrer">MSYS2</a> which again uses <a href="https://mintty.github.io/" rel="nofollow noreferrer">mintty</a> terminal emulator. While MSYS2 uses UTF-8, and mintty also seems to support UTF-8 the whole thing is wrapped within a Windows console that is based on an OEM codepage that is incompatible to UTF-8. The whole thing then runs on an operating system that internally uses UTF-16. Now combined with a beta setting that overrules the whole OEM codebase concept on OS-level this setup provides enough complexity for some incomprehensible behavior.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>Thank you so much for your time but this does not solve it unfortunately</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">12 Sep 2020 at 07:20</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Too bad. :-( Please extend your code with <i>System.out.println(Charset.defaultCharset().name());</i> and share the output when you execute it in Git Bash and cmd.exe (without specifying any additional VM args). Would be interesting to know if my first assumption about the wrong default charset is right and whether there's a difference between Git Bash and cmd.exe.</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">12 Sep 2020 at 11:23</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@YassinHajaj how do you exactly start your Git Bash? Do you click on the "Git Bash" shortcut or do you execute git-bash.exe or even bash.exe directly? What java version do you use?</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">12 Sep 2020 at 11:33</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Hey @rmunge, to give you a bit more context, the popup contained French &amp; the box was unticked. I open git bash by right clicking in Explorer and cliking on "Open Git Bash" or sometimes I click on the windows start (bottom left) and type "Git.." and then enter because Git bash comes first</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">12 Sep 2020 at 13:09</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>About the Sysout, I'll definitely provide you with this info soon, because it's on another PC that's not on ATM, once I have it on, I'll let you know</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">12 Sep 2020 at 13:10</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@YassinHajaj after digging a bit in JVM native code I think I have found the root cause. Please see the new answer. Hope that finally nails it down. Was a nice weekend puzzle ;-)</span> <span> - </span> <span class="display-name">rmunge</span> <span> </span> <span class="date">13 Sep 2020 at 16:20</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Hi @rmunge, thank you very much for the effort, BTW I have printed the required info to the console if you want to take a look at. Familiar on how to create a chat here?</span> <span> - </span> <span class="display-name">Yassin Hajaj</span> <span> </span> <span class="date">14 Sep 2020 at 10:42</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>