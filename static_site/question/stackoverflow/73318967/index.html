<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>As done the research put the name in the title in datatables</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>As done the research put the name in the title in datatables</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>0</span>
    </div>
    <div>
     <span>Asker: </span> <span>Bruno</span>
    </div>
    <div>
     <span>Asked: </span> <span>11 Aug 2022 at 10:13</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/73318967/as-done-the-research-put-the-name-in-the-title-in-datatables">source</a>
    </div>
   </div>
   <div>
    <p>I have the following table where I print with datatables.</p>
    <p></p>
    <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
     <div class="snippet-code">
      <pre class="snippet-code-js lang-js prettyprint-override"><code>var cars = [
   {nome:  "Teste", Discricao:  "Teste1",},
   {nome:  "Teste2", Discricao:  "Teste3",},
];

$(function () { 
  $('.cons-assid').on("click", function() {
    $("#consultassid tbody").empty();
          
      var linha = ``; 

        $('.consultassid &gt; tbody &gt; tr').remove();
        var colab = [];
        for (var i = 0; i &lt; cars.length; i++) {
        colab = cars[i].nome;
        linha += `&lt;tr"&gt;
                      &lt;td class="text-center text-muted"&gt; ${cars[i].nome}&lt;/td&gt;
                      &lt;td class="text-center text-muted"&gt; ${cars[i].Discricao}&lt;/td&gt;
                    &lt;/tr&gt;`;
                    
      }
                    
      $("#consultassid tbody").html(linha);

      $('.consultassid').dataTable({ 
        dom: 'Bflrtip',
        "pagingType": "full_numbers", 
        "iDisplayLength": 10,                          
        "oLanguage": {
        "sProcessing": "Aguarde enquanto os dados são carregados ...",
        "sLengthMenu": "Mostrar _MENU_ registos por página",
        "sZeroRecords": "Nenhum registo correspondente ao criterio encontrado",
        "sInfoEmpty": "Exibindo 0 a 0 de 0 registos",
        "sInfo": "Exibindo de _START_ a _END_ de _TOTAL_ registos",
        "sInfoFiltered": "",
        "sSearch": "&lt;span class='glyphicon glyphicon-search'&gt;&lt;/span&gt;",
        "oPaginate": {
          "sFirst":    "&lt;i class='fa fa-fast-backward' aria-hidden='true'&gt;&lt;/i&gt;",
          "sPrevious": "&lt;i class='fa fa-backward' aria-hidden='true'&gt;&lt;/i&gt;&lt;/span&gt;",
          "sNext":     "&lt;i class='fa fa-forward' aria-hidden='true'&gt;&lt;/i&gt;",
          "sLast":     "&lt;i class='fa fa-fast-forward' aria-hidden='true'&gt;&lt;/i&gt;"
          }
        },
        buttons: [
          {
              extend: 'print',
                      text: 'print',
                      title: '&lt;div style="text-align: left;"&gt;Colaborador:  ' +colab+  '&lt;/div&gt;',
                      exportOptions: {
                          columns: function ( idx, data, node ) {
                            if (idx &gt;= 4) {
                                return data;
                            }
                          }
                        },
                      customize: function ( win ) {
                          $(win.document.body)
                              .css( 'font-size', '12pt' );
        
                          $(win.document.body).find( 'table' )
                              .addClass( 'compact' )
                              .css( 'font-size', 'inherit' );
                      }
          }
        ]
      });   
      
    });
  });
  
  $(function() {
    $(".btn-show").click(function(e) {
      e.preventDefault();
      el = $(this).data('element');
      $(el).show();
      $("section &gt; div").not(el).hide();
    });
});
  
$(function() {
    $(".btn-hide").click(function(e) {
      e.preventDefault();
      el = $(this).data('element');
      $(el).hide();
    });
});</code></pre>
      <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"&gt;&lt;/script&gt;
&lt;link href="https://cdn.datatables.net/1.11.4/css/dataTables.bootstrap5.min.css" rel="stylesheet"&gt;
&lt;link href="https://cdn.datatables.net/buttons/2.2.2/css/buttons.bootstrap5.min.css" rel="stylesheet"&gt;
&lt;script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.datatables.net/1.11.4/js/dataTables.bootstrap5.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.bootstrap5.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.print.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.colVis.min.js"&gt;&lt;/script&gt;

&lt;a href="s103" data-element="#minhaDiv103" class="btn-show cons-assid"&gt;
    &lt;i class="metismenu-icon pe-7s-wristwatch"&gt;&lt;/i&gt;
    Assiduidade
&lt;/a&gt;
&lt;section id="s103"&gt;
  &lt;div style="display:none" id="minhaDiv103"&gt;
    &lt;table class="align-middle mb-0 table table-borderless table-striped table-hover consultassid" id="consultassid"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th class="text-center"&gt;Colaborador&lt;/th&gt;
                &lt;th class="text-center"&gt;Serviço&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;

        &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/div&gt;
&lt;/section&gt;</code></pre>
     </div>
    </div>
    <p></p>
    <p>After returning the table, the search field of the datatables itself appears. So if you search for a name of a contributor, I want the title when printing to return the name of that contributor. The way I have it, the name of the last contributor returns in the title after running the for, and it should return the name I put in the search field.</p>
    <p>Can you help to solve this problem?</p>
   </div>
   <div class="tags">
    <span class="tag">javascript</span><span class="tag">html</span><span class="tag">datatables</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td></td>
       <td><span>the <code>data</code> variable is not defined anywhere</span> <span> - </span> <span class="display-name">Diego D</span> <span> </span> <span class="date">11 Aug 2022 at 11:36</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>@diegod I have already completed the question, is it better to also put the query to the database?</span> <span> - </span> <span class="display-name">Bruno</span> <span> </span> <span class="date">11 Aug 2022 at 11:42</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>a question should be as clear as possible so that people have all the needed information to face the problem. Such code cannot run because the <code>data</code> variable is undefined and it's too hard to reverse its logic for the sake of answering a question. No you shouldn't put the query to the database.. you should put a sample of data already populated that will make that code runnable per se. I mean if you wish to raise the chance to receive a meaningful feedback. By the way after you edited the question, the code has a syntax error</span> <span> - </span> <span class="display-name">Diego D</span> <span> </span> <span class="date">11 Aug 2022 at 11:46</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>@diegod Thanks for the tip. I already paste it in order to work and test. If searching for test when printing it shows the name test2, which is the last line returned. I wanted it to return the name I'm looking for</span> <span> - </span> <span class="display-name">Bruno</span> <span> </span> <span class="date">11 Aug 2022 at 13:50</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>11 Aug 2022 at 14:48</span>
     </div>
    </div>
    <div>
     <p>You said "<em>it should return the name I put in the search field</em>".</p>
     <p>If you want to print the text that the user entered into the search field, you need to use a function instead of a static string.</p>
     <p>You are using this:</p>
     <pre class="lang-js prettyprint-override"><code>title: '&lt;div style="text-align: left;"&gt;Colaborador:  ' +colab+  '&lt;/div&gt;',
</code></pre>
     <p>Change it to this:</p>
     <pre><code>title: function () {
  let colab = $( 'input.form-control' ).val();
  return '&lt;div style="text-align: left;"&gt;Colaborador:  ' +  colab +  '&lt;/div&gt;';
}
</code></pre>
     <p>When you use a hard-coded string, that value is calculated when the web page first loads, and then it is never re-calculated. DataTables always uses the same value.</p>
     <p>But if you use a function in your DataTable's <code>title</code> option, that function is re-executed every time you print the table.</p>
     <p>You will probably want to enhance the above code, to deal with cases where the user does not type anything (empty string).</p>
     <hr>
     <p>In your question you also say "<em>I want the title when printing to return the name of that contributor</em>". That is different from "<em>the name I put in the search field</em>". If you type <code>teste3</code>, then the printout will display <code>Colaborador: Teste3</code> - which is <em>not</em> the name of that record's contributor (the name is <code>Teste2</code>).</p>
     <p>So the question is not completely clear - but I think using the function is the answer you need.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>