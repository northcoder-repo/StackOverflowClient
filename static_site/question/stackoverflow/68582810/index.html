<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>Converting dropdown menu to select2</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>Converting dropdown menu to select2</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>1</span>
    </div>
    <div>
     <span>Asker: </span> <span>dfahsjdahfsudaf</span>
    </div>
    <div>
     <span>Asked: </span> <span>29 Jul 2021 at 21:09</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/68582810/converting-dropdown-menu-to-select2">source</a>
    </div>
   </div>
   <div>
    <p>I am attempting to create a datatable where the user can filter the table using dropdown menus. The first dropdown menu "project_select" fills with all the unique values from a column of the data table. The second dropdown menu "hr_select" fills with values based on the user's selection from the "project_select" dropdown menu.</p>
    <p>Currently, the dropdown menus are mapped to span elements in the html. I am looking to convert these span elements to select2.</p>
    <p>This is my desired html code:</p>
    <pre><code>    &lt;label for="project_select"&gt;&lt;/label&gt;&lt;select id="project_select" class="js-example-basic-single" style="width: 10%"&gt;
    &lt;option&gt;&lt;/option&gt;
&lt;/select&gt;
    &lt;label for="hr_select"&gt;&lt;/label&gt;&lt;select id="hr_select" class="js-example-basic-multiple" multiple="multiple" style="width:15%"&gt;
    &lt;option&gt;&lt;/option&gt;
&lt;/select&gt;
</code></pre>
    <p>However, when I try and replace the span elements with that desired HTML code.. it doesn't work.</p>
    <p>This is my code: <a href="https://jsfiddle.net/dfahsjdahfsudaf/nL6q21g9/16/" rel="nofollow noreferrer">https://jsfiddle.net/dfahsjdahfsudaf/nL6q21g9/16/</a></p>
    <p>Thanks in advance for any help!</p>
   </div>
   <div class="tags">
    <span class="tag">html</span><span class="tag">jquery</span><span class="tag">css</span><span class="tag">datatables</span><span class="tag">jquery-select2</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td></td>
       <td><span>The <code>&lt;span&gt;</code> elements in your Fiddle are irrelevant to using a S2 select. Here is a demo: <a href="https://jsfiddle.net/mj7hLd1f/" rel="nofollow noreferrer">https://jsfiddle.net/mj7hLd1f/</a>. To make this Fiddle, I took your Fiddle and I made 3 changes: (1) I added the S2 JS and CSS libraries; (2) I gave each of the <code>&lt;select&gt;</code> elements an ID; and then (3) I initialized the selects: <code>$('#project_s2').select2();</code> and <code>$('#hr_s2').select2();</code>. Is this what you are looking to do?</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">29 Jul 2021 at 21:37</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>From that point onward, there is a world of Select2 customizations that you can apply, of course. But my Fiddle is just the absolute basics.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">29 Jul 2021 at 21:38</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>Sorry - I forgot to save my Fiddle - I updated the link in the first comment.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">29 Jul 2021 at 21:41</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>@andrewjames thank you so much!</span> <span> - </span> <span class="display-name">dfahsjdahfsudaf</span> <span> </span> <span class="date">29 Jul 2021 at 22:43</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>29 Jul 2021 at 23:42</span>
     </div>
    </div>
    <div>
     <p>I converted my comments to an answer for future visitors to this question:</p>
     <p>The steps needed to convert your standard selects to "Select2" selects are:</p>
     <ol>
      <li>Add the required libraries to the page:</li>
     </ol>
     <pre><code>&lt;link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" /&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"&gt;&lt;/script&gt;
</code></pre>
     <ol start="2">
      <li>Give IDs to each of the current <code>&lt;select&gt;</code> elements:</li>
     </ol>
     <pre><code>select = $('&lt;select id="project_s2"&gt;&lt;option value=""&gt;&lt;/option&gt;&lt;/select&gt;');
</code></pre>
     <p>and:</p>
     <pre><code>select = $('&lt;select id="hr_s2" multiple&gt;&lt;option value=""&gt;&lt;/option&gt;&lt;/select&gt;');
</code></pre>
     <ol start="3">
      <li>Use those IDs to initialize Select2:</li>
     </ol>
     <pre><code>$('#project_s2').select2();
$('#hr_s2').select2();
</code></pre>
     <p>The end result is:</p>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code>var dataSet = [{
    "Project_Name": "A",
    "ID": "65",
    "HR": "0",
  },
  {
    "Project_Name": "A",
    "ID": "65",
    "HR": "10",
  },
  {
    "Project_Name": "B",
    "ID": "65",
    "HR": "0",

  },
  {
    "Project_Name": "B",
    "ID": "65",
    "HR": "20",
  },
  {
    "Project_Name": "C",
    "ID": "65",
    "HR": "20",

  },
  {
    "Project_Name": "C",
    "ID": "65",
    "HR": "100",
  },

];

$(document).ready(function() {

  var table = $('#example').DataTable({
    data: dataSet,
    orderCellsTop: true,
    columns: [{
        data: "Project_Name"
      },
      {
        data: "ID"
      },
      {
        data: "HR"
      }
    ],
    initComplete: function() {
      this.api().columns([0, 2]).every(function() {
        var column = this;
        var colIdx = column.index();
        var node;
        var select;
        if (colIdx === 0) {
          node = $('#project_select');
          select = $('&lt;select id="project_s2" style="width: 40%"&gt;&lt;option value=""&gt;&lt;/option&gt;&lt;/select&gt;');
        } else {
          node = $('#hr_select');
          select = $('&lt;select id="hr_s2" style="width: 20%" multiple&gt;&lt;option value=""&gt;&lt;/option&gt;&lt;/select&gt;');
        }

        select.appendTo($(node).empty())
          .on('change', function() {
            var val = $(this).val();
            if (colIdx === 0) {
              val = $.fn.dataTable.util.escapeRegex(val);
              column.search(val ? '^' + val + '$' : '', true, false).draw();
              rebuildPositionSelect();
            } else {
              var vals = val.map(x =&gt; $.fn.dataTable.util.escapeRegex(x)).join('|');
              column.search(vals ? '^' + vals + '$' : '', true, false).draw();
            }
          });

        column.data().unique().sort().each(function(val) {
          select.append('&lt;option value="' + val + '"&gt;' + val + '&lt;/option&gt;')
        });

      });
      $('#project_s2').select2();
      $('#hr_s2').select2();
    }
  });

  function rebuildPositionSelect() {
    var select = $('#hr_select select').empty().append('&lt;option value=""&gt;&lt;/option&gt;');
    var column = table.column(2, {
      search: 'applied'
    });
    column.search('').draw();
    column.data().unique().sort().each(function(val) {
      select.append('&lt;option value="' + val + '"&gt;' + val + '&lt;/option&gt;');
    });
  }

});</code></pre>
       <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!doctype html&gt;
&lt;html&gt;

  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Demo&lt;/title&gt;
    &lt;script src="https://code.jquery.com/jquery-3.5.1.js"&gt;&lt;/script&gt;
    &lt;script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"&gt;&lt;/script&gt;
    &lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css"&gt;
    &lt;link rel="stylesheet" type="text/css" href="https://datatables.net/media/css/site-examples.css"&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" /&gt;
   &lt;script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"&gt;&lt;/script&gt;

  &lt;/head&gt;

  &lt;body&gt;

    &lt;div style="margin: 20px;"&gt;

      &lt;div&gt;
        &lt;span&gt;Project: &lt;/span&gt;
        &lt;span id="project_select"&gt;&lt;/span&gt;
        &lt;span&gt; HR: &lt;/span&gt;
        &lt;span id="hr_select"&gt;&lt;/span&gt;
      &lt;/div&gt;

      &lt;br&gt;&lt;br&gt;

      &lt;table id="example" class="display dataTable cell-border" style="width:100%"&gt;
        &lt;thead&gt;
          &lt;tr&gt;
            &lt;th&gt;Project_Name&lt;/th&gt;
            &lt;th&gt;ID&lt;/th&gt;
            &lt;th&gt;HR&lt;/th&gt;
          &lt;/tr&gt;
        &lt;/thead&gt;
      &lt;/table&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
      </div>
     </div>
     <p></p>
     <p>As mentioned in the comments, this is a very basic set-up for each Select2 drop-down.</p>
     <p>To customize them further you can provide options - for example:</p>
     <pre><code>$('#project_s2').select2( { 
  theme: "classic",
  placeholder: 'Select an option'
} );
</code></pre>
     <p><strong>Final Note:</strong></p>
     <p>The use of basic <code>&lt;span&gt;</code> elements in the above example, only minimal layout/styling may be insufficient for your needs. So, you will probably want to provide CSS customizations which provide a better overall layout. But those changes should not affect your Select2 elements.</p>
     <p>For example, adding in <code>style="width: 40%"</code> (as shown above) makes a difference - but that may not be what you want, in your specific case.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>