<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>How can I download and save a file from the Internet using Java?</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>How can I download and save a file from the Internet using Java?</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>463</span>
    </div>
    <div>
     <span>Asker: </span> <span>echoblaze</span>
    </div>
    <div>
     <span>Asked: </span> <span>28 May 2009 at 14:53</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/921262/how-can-i-download-and-save-a-file-from-the-internet-using-java">source</a>
    </div>
   </div>
   <div>
    <p>There is an online file (such as <code>http://www.example.com/information.asp</code>) I need to grab and save to a directory. I know there are several methods for grabbing and reading online files (URLs) line-by-line, but is there a way to just download and save the file using Java?</p>
   </div>
   <div class="tags">
    <span class="tag">java</span><span class="tag">download</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td>2</td>
       <td><span>related <a href="http://stackoverflow.com/questions/8324862/how-to-create-file-object-from-url-object" title="how to create file object from url object">stackoverflow.com/questions/8324862/…</a></span> <span> - </span> <span class="display-name">Adriano</span> <span> </span> <span class="date">11 Jul 2013 at 07:00</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span><a href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy(java.io.InputStream,%20java.nio.file.Path,%20java.nio.file.CopyOption...)" rel="nofollow noreferrer">docs.oracle.com/javase/7/docs/api/java/nio/file/…</a></span> <span> - </span> <span class="display-name">Grigoriev Nick</span> <span> </span> <span class="date">19 Aug 2020 at 08:18</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>582</span>
     </div>
     <div>
      <span>Answerer: </span> <span>dfa</span>
     </div>
     <div>
      <span> Answered: </span> <span>28 May 2009 at 15:16</span>
     </div>
    </div>
    <div>
     <p>Give <a href="http://en.wikipedia.org/wiki/New_I/O" rel="noreferrer">Java NIO</a> a try:</p>
     <pre><code>URL website = new URL("http://www.website.com/information.asp");
ReadableByteChannel rbc = Channels.newChannel(website.openStream());
FileOutputStream fos = new FileOutputStream("information.html");
fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
</code></pre>
     <p>Using <code>transferFrom()</code> is <strong>potentially</strong> much more efficient than a simple loop that reads from the source channel and writes to this channel. Many operating systems can transfer bytes directly from the source channel into the filesystem cache without actually copying them.</p>
     <p>Check more about it <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html" rel="noreferrer">here</a>.</p>
     <p><strong>Note</strong>: The third parameter in transferFrom is the maximum number of bytes to transfer. <code>Integer.MAX_VALUE</code> will transfer at most 2^31 bytes, <code>Long.MAX_VALUE</code> will allow at most 2^63 bytes (larger than any file in existence).</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>6</td>
        <td><span>hey what is that shifty bit?</span> <span> - </span> <span class="display-name">willcodejavaforfood</span> <span> </span> <span class="date">28 May 2009 at 15:18</span></td>
       </tr>
       <tr>
        <td>8</td>
        <td><span>@willcodejavaforfood: it is just an alias for 16777216. An arbitrary long block size. A magic costant (beware it!)</span> <span> - </span> <span class="display-name">dfa</span> <span> </span> <span class="date">28 May 2009 at 15:23</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>@will, the shift is just another way of representing 2^24 (the amount he is reading from the channel)</span> <span> - </span> <span class="display-name">z -</span> <span> </span> <span class="date">28 May 2009 at 15:24</span></td>
       </tr>
       <tr>
        <td>4</td>
        <td><span>What if that file is bigger than 16777216 bytes?</span> <span> - </span> <span class="display-name">serg</span> <span> </span> <span class="date">28 May 2009 at 15:34</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>sorry to sound like a total noob, but should i be closing fos? regardless of that, thanks, it works perfectly!</span> <span> - </span> <span class="display-name">echoblaze</span> <span> </span> <span class="date">28 May 2009 at 15:44</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Would it still be wise to close the FileOutputStream? Or does the transferFrom method do something different that it isn't required anymore?</span> <span> - </span> <span class="display-name">Austin</span> <span> </span> <span class="date">24 Jul 2012 at 08:36</span></td>
       </tr>
       <tr>
        <td>8</td>
        <td><span>1 &lt;&lt; 24 just seems so arbitrary, would something like Long.MAX_VALUE make more sense?</span> <span> - </span> <span class="display-name">Uku Loskit</span> <span> </span> <span class="date">29 Sep 2012 at 17:13</span></td>
       </tr>
       <tr>
        <td>26</td>
        <td><span>Close all three with Java 7 try-with-resource: try (InputStream inputStream = website.openStream(); ReadableByteChannel readableByteChannel = Channels.newChannel(inputStream); FileOutputStream fileOutputStream = new FileOutputStream(outputFileName)) { fileOutputStream.getChannel().transferFrom(readableByteCh‌​annel, 0, 1 &lt;&lt; 24); }</span> <span> - </span> <span class="display-name">mazatwork</span> <span> </span> <span class="date">8 Nov 2012 at 09:44</span></td>
       </tr>
       <tr>
        <td>86</td>
        <td><span>This will only download the first 16MB of a file: <a href="http://stackoverflow.com/questions/8405062/downloading-files-with-java" title="downloading files with java">stackoverflow.com/questions/8405062/downloading-files-with-j‌​ava</a></span> <span> - </span> <span class="display-name">Ben McCann</span> <span> </span> <span class="date">12 Jan 2013 at 21:04</span></td>
       </tr>
       <tr>
        <td>4</td>
        <td><span>Just use Integer.MAX_VALUE if your file can be bigger than 16 MB (or even Long.MAX_VALUE if it can be bigger than 2 GB).</span> <span> - </span> <span class="display-name">Konrad Höffner</span> <span> </span> <span class="date">29 May 2013 at 12:53</span></td>
       </tr>
       <tr>
        <td>33</td>
        <td><span>@kirdie and if I want more than <code>8388608</code> TB?</span> <span> - </span> <span class="display-name">Cruncher</span> <span> </span> <span class="date">15 Oct 2013 at 14:02</span></td>
       </tr>
       <tr>
        <td>6</td>
        <td><span>Is there any way to track the progress of the download with this method?</span> <span> - </span> <span class="display-name">moomoohk</span> <span> </span> <span class="date">19 Dec 2013 at 02:50</span></td>
       </tr>
       <tr>
        <td>24</td>
        <td><span>A single call isn't adequate. <code>transferFrom()</code> isnt' specified to complete the entire transfer in a single call. That's why it returns a count. You have to loop.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">23 Jul 2014 at 02:32</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@dfa, would you mind including also the slighly more modern solution mentioned <a href="http://stackoverflow.com/a/30394778">here</a>?</span> <span> - </span> <span class="display-name">aioobe</span> <span> </span> <span class="date">22 May 2015 at 11:00</span></td>
       </tr>
       <tr>
        <td>14</td>
        <td><span>Why was this answer even accepted? <code>URL::openStream()</code>returns just a regular stream, meaning the entire traffic is still being copied through Java byte[] arrays instead of remaining in native buffers. Only <code>fos.getChannel()</code>is actually a native channel, so the overhead remains in full. That's zero gains from using NIO in this case. Apart from being broken, as EJP and Ben MacCann correctly noticed.</span> <span> - </span> <span class="display-name">Ext3h</span> <span> </span> <span class="date">29 Sep 2015 at 09:54</span></td>
       </tr>
       <tr>
        <td>4</td>
        <td><span>If you're using NIO, be consistent and also use <code>FileChannel.open(Paths.get("information.html"), StandardOpenOption.CREATE, StandardOpenOption.TRUNCATE_EXISTING, StandardOpenOption.WRITE)</code> instead of <code>FileOutputStream</code></span> <span> - </span> <span class="display-name">fabian</span> <span> </span> <span class="date">16 Dec 2016 at 13:06</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@fabian that's an NIO/2 addition of Java 7, which came out two years after this question was originally answered. That being said, it might make sense to update the answer with the new method.</span> <span> - </span> <span class="display-name">Leo Izen</span> <span> </span> <span class="date">25 Jun 2017 at 12:52</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I tried transferFrom in android. With Long.MAX_VALUE give an "invalid parameter" value. Then I changed it in Integer.MAX_VALUE and it gives an OutOfMemory due to trying to allocate 2^31 bytes. So it does not work for every java.nio implementations.</span> <span> - </span> <span class="display-name">ARLabs</span> <span> </span> <span class="date">7 May 2018 at 16:56</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@EJP How can this use of <code>transferFrom()</code> fail to complete the entire transfer (ignoring exceptions)? The stream, opened from the url, blocks its <code>read</code> methods until input is available so the <code>transferFrom()</code> method only stops if its source channel has fewer than the requested number of bytes remaining.</span> <span> - </span> <span class="display-name">Kröw</span> <span> </span> <span class="date">10 Jul 2018 at 22:19</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>How to set encoding utf-8</span> <span> - </span> <span class="display-name">Asad Rao</span> <span> </span> <span class="date">4 Apr 2020 at 17:28</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span><a href="https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy(java.io.InputStream,%20java.nio.file.Path,%20java.nio.file.CopyOption...)" rel="nofollow noreferrer">docs.oracle.com/javase/7/docs/api/java/nio/file/…</a></span> <span> - </span> <span class="display-name">Grigoriev Nick</span> <span> </span> <span class="date">19 Aug 2020 at 08:19</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>that's for normal http get parameter.... what about combining with post for downloading a same call?</span> <span> - </span> <span class="display-name">gumuruh</span> <span> </span> <span class="date">3 Nov 2020 at 02:25</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@Kröw Because there is nothing in the Javadoc that says it will transfer the entire stream. That's why it returns a count. You have to loop. Blocking has nothing to do with it.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">17 Jun 2021 at 11:26</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@user207421 "Blocking has nothing to do with it" The documentation for <code>transferFrom()</code> points out the cases in which the call can fail, and describes them with regard to whether or not the source stream is blocking. So no, blocking has everything to do with it.</span> <span> - </span> <span class="display-name">Kröw</span> <span> </span> <span class="date">17 Jun 2021 at 12:23</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@Kröw Those sections in the JavaDoc are specific examples of how such a phenomenon might occur. It is not an exhaustive list of cases.</span> <span> - </span> <span class="display-name">Leo Izen</span> <span> </span> <span class="date">11 Sep 2021 at 05:33</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">↑</a> </span> <span class="arrow"> <a href="#answer_3">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>534</span>
     </div>
     <div>
      <span>Answerer: </span> <span>卢声远 Shengyuan Lu</span>
     </div>
     <div>
      <span> Answered: </span> <span>23 Aug 2011 at 04:12</span>
     </div>
    </div>
    <div>
     <p>Use Apache <a href="http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/FileUtils.html#copyURLToFile(java.net.URL,%20java.io.File)" rel="noreferrer">Commons IO</a>. It is just one line of code:</p>
     <pre><code>FileUtils.copyURLToFile(URL, File)
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>30</td>
        <td><span>Nice! Just what I'm looking for! I knew Apache libraries would already cover this. BTW, it's recommended to use the overloaded version with timeout parameters!</span> <span> - </span> <span class="display-name">Hendy Irawan</span> <span> </span> <span class="date">23 Jan 2012 at 15:11</span></td>
       </tr>
       <tr>
        <td>9</td>
        <td><span>...and when using that overloaded version, remember that the timeouts are specified in milliseconds, not seconds.</span> <span> - </span> <span class="display-name">László van den Hoek</span> <span> </span> <span class="date">6 Jul 2012 at 12:00</span></td>
       </tr>
       <tr>
        <td>5</td>
        <td><span>Take note that <code>copyURLToFile</code> with timeout parameter is only available since version 2.0 of Commons IO library. See <a href="http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html" rel="nofollow noreferrer">Java docs</a></span> <span> - </span> <span class="display-name">Stanley</span> <span> </span> <span class="date">12 Apr 2013 at 04:00</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@卢声远 how can we add cookies to the request?</span> <span> - </span> <span class="display-name">Pacerier</span> <span> </span> <span class="date">15 Aug 2014 at 16:52</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>"The method copyURLToFile(URL, File) in the type FileUtils is not applicable for the arguments (String, String)"</span> <span> - </span> <span class="display-name">William</span> <span> </span> <span class="date">20 Feb 2015 at 09:36</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Agreed. Mark this as the accepted answer. Why re-invent the wheel?</span> <span> - </span> <span class="display-name">Nicholas Terry</span> <span> </span> <span class="date">17 Mar 2015 at 20:32</span></td>
       </tr>
       <tr>
        <td>8</td>
        <td><span>what if basic authentication header has to be added to the request? is there a workaround?</span> <span> - </span> <span class="display-name">damian</span> <span> </span> <span class="date">2 Apr 2015 at 14:30</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>Although this is "short", it's actually very slow.</span> <span> - </span> <span class="display-name">sguan</span> <span> </span> <span class="date">7 Dec 2015 at 04:51</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>A native Java solution is better than an external library, IMO.</span> <span> - </span> <span class="display-name">ndm13</span> <span> </span> <span class="date">9 Dec 2015 at 12:40</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>so in Java 8, this is not a thing anymore? Link is dad, and Eclipse doesn't know <code>FileUtils</code>.</span> <span> - </span> <span class="display-name">phil294</span> <span> </span> <span class="date">4 Oct 2016 at 19:04</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@Blauhirn commons-io is an external library, available from the <a href="http://commons.apache.org/proper/commons-io/" rel="nofollow noreferrer">Apache Commons website</a>. I have just fixed the broken link to the Javadoc in the answer.</span> <span> - </span> <span class="display-name">Pont</span> <span> </span> <span class="date">10 Oct 2016 at 07:02</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>How can I use this method, when I'm behind a proxy?</span> <span> - </span> <span class="display-name">asmaier</span> <span> </span> <span class="date">19 Dec 2017 at 10:21</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_3"><span>Answer 3</span> <span class="arrow"> <a href="#answer_2">↑</a> </span> <span class="arrow"> <a href="#answer_4">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>130</span>
     </div>
     <div>
      <span>Answerer: </span> <span>xuesheng</span>
     </div>
     <div>
      <span> Answered: </span> <span>4 Jun 2014 at 15:16</span>
     </div>
    </div>
    <div>
     <p>Simpler <a href="https://en.wikipedia.org/wiki/Non-blocking_I/O_(Java)" rel="noreferrer">non-blocking I/O</a> usage:</p>
     <pre><code>URL website = new URL("http://www.website.com/information.asp");
try (InputStream in = website.openStream()) {
    Files.copy(in, target, StandardCopyOption.REPLACE_EXISTING);
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>6</td>
        <td><span>Unfortunately this silently fails (downloads 0 bytes) in case there is a redirect such as "302 Found".</span> <span> - </span> <span class="display-name">Alexander K</span> <span> </span> <span class="date">9 Jan 2016 at 05:43</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>@AlexanderK But why would you blindly download such a resource anyway?</span> <span> - </span> <span class="display-name">xuesheng</span> <span> </span> <span class="date">12 Jan 2016 at 18:23</span></td>
       </tr>
       <tr>
        <td>5</td>
        <td><span>Despite the fact this is an elegant solution, behind the scenes this approach could silently betray you. Files.copy( InputStream, Paths, FileOption) delegates the copy process to the Files.copy( InputStream, OutputStream ). This last method does not check for the end of stream (-1) but checks for no byte read (0). It means that, if your network had a little pause, it could read 0 bytes and end the copy process, even if the stream isn't finished to be downloaded by the OS.</span> <span> - </span> <span class="display-name">Miere</span> <span> </span> <span class="date">13 Apr 2016 at 13:17</span></td>
       </tr>
       <tr>
        <td>6</td>
        <td><span>@Miere It is impossible for <code>InputStream.read()</code> to return zero unless you provided a zero length buffer or count, 'little pause' or otherwise. It will block until at least one byte has been transferred or end of stream or an error occurs. Your claim about the internals of <code>Files.copy()</code> is baseless.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">5 Jul 2016 at 09:26</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>I have an unit test that reads a binary file with 2.6TiB. Using Files.copy it always fails on my HDD storage server (XFS) but it fails only a few times my SSH one. Looking at JDK 8 the code of File.copy I've identified that it checks for '&gt; 0' to leave the 'while' loop. I just copied the exactly same code with the -1 and both unit tests never stopped again. Once InputStream can represent Network and local file descriptors, and both IO operations are subject to OS context switching, I cant see why my claim is baseless. One may claim it be working by luck, but it gave no headaches any more.</span> <span> - </span> <span class="display-name">Miere</span> <span> </span> <span class="date">6 Jul 2016 at 16:50</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Is there a way to discover the extension before downloading?</span> <span> - </span> <span class="display-name">Cardinal System</span> <span> </span> <span class="date">7 Nov 2017 at 23:26</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@CardinalSystem I believe you can <code>Path path = Paths.get("https://docs.oracle.com/javase/7/docs/api/java/ni‌​o/file/Path.html"); String fileName = path.getFileName().toString(); String ext = fileName.substring(fileName.lastIndexOf("."), fileName.length());</code> But there are libraries out there that will do the job (Apache Commons/Guava)</span> <span> - </span> <span class="display-name">xuesheng</span> <span> </span> <span class="date">13 Nov 2017 at 10:02</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@CardinalSystem Of course you cannot guarantee that extension will really correspond to its binary contents:) So, perhaps, you'll need to double-check after downloading</span> <span> - </span> <span class="display-name">xuesheng</span> <span> </span> <span class="date">13 Nov 2017 at 10:05</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>What would be path where file is stored?</span> <span> - </span> <span class="display-name">WISHY</span> <span> </span> <span class="date">18 Jul 2022 at 14:30</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>It will save it to the <code>target</code> path</span> <span> - </span> <span class="display-name">xuesheng</span> <span> </span> <span class="date">19 Jul 2022 at 05:48</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_4"><span>Answer 4</span> <span class="arrow"> <a href="#answer_3">↑</a> </span> <span class="arrow"> <a href="#answer_5">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>88</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Ben Noland</span>
     </div>
     <div>
      <span> Answered: </span> <span>28 May 2009 at 15:16</span>
     </div>
    </div>
    <div>
     <pre><code>public void saveUrl(final String filename, final String urlString)
        throws MalformedURLException, IOException {
    BufferedInputStream in = null;
    FileOutputStream fout = null;
    try {
        in = new BufferedInputStream(new URL(urlString).openStream());
        fout = new FileOutputStream(filename);

        final byte data[] = new byte[1024];
        int count;
        while ((count = in.read(data, 0, 1024)) != -1) {
            fout.write(data, 0, count);
        }
    } finally {
        if (in != null) {
            in.close();
        }
        if (fout != null) {
            fout.close();
        }
    }
}
</code></pre>
     <p>You'll need to handle exceptions, probably external to this method.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>6</td>
        <td><span>How to download very faster? Like download accelerator?</span> <span> - </span> <span class="display-name">digz6666</span> <span> </span> <span class="date">10 Jan 2012 at 07:08</span></td>
       </tr>
       <tr>
        <td>11</td>
        <td><span>If <code>in.close</code> throws an exception, <code>fout.close</code> is not called.</span> <span> - </span> <span class="display-name">Beryllium</span> <span> </span> <span class="date">9 Aug 2013 at 15:15</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@ComFreek That is simply untrue. Using a <code>BufferedInputStream</code> has precisely zero effect on socket timeouts. I had already refuted that as 'urban myth' in my comments to the 'background details' you cited. Three years earlier.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">23 Jul 2014 at 02:33</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@EJP Thank you for the correction! I removed my comment (for the archive: I linked to <a href="http://stackoverflow.com/a/2965406/603003">this answer</a> stating that <code>BufferedInputStream</code> "can cause unpredictable failures").</span> <span> - </span> <span class="display-name">ComFreek</span> <span> </span> <span class="date">24 Jul 2014 at 15:53</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>+1 My only objection to this answer (and others here) is that the caller cannot distinguish the event "not found" from some connection error (upon which you might want to retry).</span> <span> - </span> <span class="display-name">leonbloy</span> <span> </span> <span class="date">20 May 2017 at 21:34</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@leonbloy That's not correct. 'Not found' becomes a <code>FileNotFoundException</code>. Nothing else does. <i>Ergo</i> the caller can distinguish.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">30 Jul 2017 at 10:54</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span><code>MalformedURLException</code> extends <code>IOException</code>, so you only have to throw the <code>IOException</code></span> <span> - </span> <span class="display-name">Alex Jone</span> <span> </span> <span class="date">22 Aug 2017 at 21:09</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_5"><span>Answer 5</span> <span class="arrow"> <a href="#answer_4">↑</a> </span> <span class="arrow"> <a href="#answer_6">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>32</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Jan Nielsen</span>
     </div>
     <div>
      <span> Answered: </span> <span>1 Dec 2017 at 17:18</span>
     </div>
    </div>
    <div>
     <p>Here is a concise, readable, JDK-only solution with properly closed resources:</p>
     <pre><code>static long download(String url, String fileName) throws IOException {
    try (InputStream in = URI.create(url).toURL().openStream()) {
        return Files.copy(in, Paths.get(fileName));
    }
}
</code></pre>
     <p>Two lines of code and no dependencies.</p>
     <p>Here's a <a href="https://github.com/JanStureNielsen/so-downloader" rel="nofollow noreferrer">complete file downloader example</a> program with output, error checking, and command line argument checks:</p>
     <pre><code>package so.downloader;

import java.io.IOException;
import java.io.InputStream;
import java.net.URI;
import java.nio.file.Files;
import java.nio.file.Paths;

public class Application {
    public static void main(String[] args) throws IOException {
        if (2 != args.length) {
            System.out.println("USAGE: java -jar so-downloader.jar &lt;source-URL&gt; &lt;target-filename&gt;");
            System.exit(1);
        }

        String sourceUrl = args[0];
        String targetFilename = args[1];

        long bytesDownloaded = download(sourceUrl, targetFilename);

        System.out.println(String.format("Downloaded %d bytes from %s to %s.", bytesDownloaded, sourceUrl, targetFilename));
    }

    static long download(String url, String fileName) throws IOException {
        try (InputStream in = URI.create(url).toURL().openStream()) {
            return Files.copy(in, Paths.get(fileName));
        }
    }    
}
</code></pre>
     <p>As noted in the <a href="https://github.com/JanStureNielsen/so-downloader" rel="nofollow noreferrer">so-downloader repository</a> README:</p>
     <p>To run file download program:</p>
     <pre><code>java -jar so-downloader.jar &lt;source-URL&gt; &lt;target-filename&gt;
</code></pre>
     <p>For example:</p>
     <pre><code>java -jar so-downloader.jar https://github.com/JanStureNielsen/so-downloader/archive/main.zip so-downloader-source.zip
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>this works for me thanks. I have URL to PDF file and it downloads the exact PDF without using any library for PDF. I appreciate it very much</span> <span> - </span> <span class="display-name">Phil</span> <span> </span> <span class="date">27 Jul 2022 at 18:32</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_6"><span>Answer 6</span> <span class="arrow"> <a href="#answer_5">↑</a> </span> <span class="arrow"> <a href="#answer_7">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>23</span>
     </div>
     <div>
      <span>Answerer: </span> <span>z -</span>
     </div>
     <div>
      <span> Answered: </span> <span>28 May 2009 at 15:01</span>
     </div>
    </div>
    <div>
     <p>Downloading a file requires you to read it. Either way, you will have to go through the file in some way. Instead of line by line, you can just read it by bytes from the stream:</p>
     <pre><code>BufferedInputStream in = new BufferedInputStream(new URL("http://www.website.com/information.asp").openStream())
byte data[] = new byte[1024];
int count;
while((count = in.read(data, 0, 1024)) != -1)
{
    out.write(data, 0, count);
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_7"><span>Answer 7</span> <span class="arrow"> <a href="#answer_6">↑</a> </span> <span class="arrow"> <a href="#answer_8">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>19</span>
     </div>
     <div>
      <span>Answerer: </span> <span>BullyWiiPlaza</span>
     </div>
     <div>
      <span> Answered: </span> <span>1 Feb 2015 at 23:22</span>
     </div>
    </div>
    <div>
     <p>When using Java 7+, use the following method to download a file from the Internet and save it to some directory:</p>
     <pre><code>private static Path download(String sourceURL, String targetDirectory) throws IOException
{
    URL url = new URL(sourceURL);
    String fileName = sourceURL.substring(sourceURL.lastIndexOf('/') + 1, sourceURL.length());
    Path targetPath = new File(targetDirectory + File.separator + fileName).toPath();
    Files.copy(url.openStream(), targetPath, StandardCopyOption.REPLACE_EXISTING);

    return targetPath;
}
</code></pre>
     <p>Documentation is <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy(java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...)" rel="nofollow noreferrer">here</a>.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>I wish there was a <code>StandardCopyOption</code> to rename the file instead of replacing existing.</span> <span> - </span> <span class="display-name">Sridhar Sarnobat</span> <span> </span> <span class="date">1 Oct 2022 at 17:26</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_8"><span>Answer 8</span> <span class="arrow"> <a href="#answer_7">↑</a> </span> <span class="arrow"> <a href="#answer_9">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>17</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Brian Risk</span>
     </div>
     <div>
      <span> Answered: </span> <span>28 Nov 2014 at 14:18</span>
     </div>
    </div>
    <div>
     <p>This answer is almost exactly like the selected answer, but with two enhancements: it's a method and it closes out the FileOutputStream object:</p>
     <pre><code>    public static void downloadFileFromURL(String urlString, File destination) {
        try {
            URL website = new URL(urlString);
            ReadableByteChannel rbc;
            rbc = Channels.newChannel(website.openStream());
            FileOutputStream fos = new FileOutputStream(destination);
            fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
            fos.close();
            rbc.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>3</td>
        <td><span>A single call isn't adequate. <code>transferFrom()</code> isnt' specified to complete the entire transfer in a single call. That's why it returns a count. You have to loop.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">5 Jul 2016 at 09:30</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>And your code doesn't close anything if there is an exception.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">17 Jun 2021 at 11:29</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_9"><span>Answer 9</span> <span class="arrow"> <a href="#answer_8">↑</a> </span> <span class="arrow"> <a href="#answer_10">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>10</span>
     </div>
     <div>
      <span>Answerer: </span> <span>mumair</span>
     </div>
     <div>
      <span> Answered: </span> <span>21 Apr 2013 at 08:06</span>
     </div>
    </div>
    <div>
     <pre><code>import java.io.*;
import java.net.*;

public class filedown {
    public static void download(String address, String localFileName) {
        OutputStream out = null;
        URLConnection conn = null;
        InputStream in = null;

        try {
            URL url = new URL(address);
            out = new BufferedOutputStream(new FileOutputStream(localFileName));
            conn = url.openConnection();
            in = conn.getInputStream();
            byte[] buffer = new byte[1024];

            int numRead;
            long numWritten = 0;

            while ((numRead = in.read(buffer)) != -1) {
                out.write(buffer, 0, numRead);
                numWritten += numRead;
            }

            System.out.println(localFileName + "\t" + numWritten);
        } 
        catch (Exception exception) { 
            exception.printStackTrace();
        } 
        finally {
            try {
                if (in != null) {
                    in.close();
                }
                if (out != null) {
                    out.close();
                }
            } 
            catch (IOException ioe) {
            }
        }
    }

    public static void download(String address) {
        int lastSlashIndex = address.lastIndexOf('/');
        if (lastSlashIndex &gt;= 0 &amp;&amp;
        lastSlashIndex &lt; address.length() - 1) {
            download(address, (new URL(address)).getFile());
        } 
        else {
            System.err.println("Could not figure out local file name for "+address);
        }
    }

    public static void main(String[] args) {
        for (int i = 0; i &lt; args.length; i++) {
            download(args[i]);
        }
    }
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>6</td>
        <td><span>If <code>in.close</code> throws an exception, <code>out.close</code> is not called.</span> <span> - </span> <span class="display-name">Beryllium</span> <span> </span> <span class="date">9 Aug 2013 at 15:17</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_10"><span>Answer 10</span> <span class="arrow"> <a href="#answer_9">↑</a> </span> <span class="arrow"> <a href="#answer_11">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>9</span>
     </div>
     <div>
      <span>Answerer: </span> <span>belgariontheking</span>
     </div>
     <div>
      <span> Answered: </span> <span>28 May 2009 at 15:29</span>
     </div>
    </div>
    <div>
     <p>Personally, I've found <a href="http://hc.apache.org/httpclient-3.x/index.html" rel="noreferrer">Apache's HttpClient</a> to be more than capable of everything I've needed to do with regards to this. <a href="http://hc.apache.org/httpclient-3.x/tutorial.html" rel="noreferrer">Here</a> is a great tutorial on using HttpClient</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>2</td>
        <td><span>also commons-io is a great library</span> <span> - </span> <span class="display-name">dfa</span> <span> </span> <span class="date">28 May 2009 at 15:32</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_11"><span>Answer 11</span> <span class="arrow"> <a href="#answer_10">↑</a> </span> <span class="arrow"> <a href="#answer_12">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>6</span>
     </div>
     <div>
      <span>Answerer: </span> <span>msangel</span>
     </div>
     <div>
      <span> Answered: </span> <span>1 Aug 2015 at 22:51</span>
     </div>
    </div>
    <div>
     <p>This is another Java 7 variant based on <a href="https://stackoverflow.com/a/27190621/449553">Brian Risk's answer</a> with usage of a <em>try-with</em> statement:</p>
     <pre><code>public static void downloadFileFromURL(String urlString, File destination) throws Throwable {

    URL website = new URL(urlString);
    try(
        ReadableByteChannel rbc = Channels.newChannel(website.openStream());
        FileOutputStream fos = new FileOutputStream(destination);
       ) {

        fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
    }
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>A single call isn't adequate. <code>transferFrom()</code> isnt' specified to complete the entire transfer in a single call. That's why it returns a count. You have to loop.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">5 Jul 2016 at 09:30</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I don't know why you're addressing that stupid question to me. It doesn't have anything to do with what I said, and I really decline to have words put into my mouth.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">30 Jul 2017 at 15:31</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_12"><span>Answer 12</span> <span class="arrow"> <a href="#answer_11">↑</a> </span> <span class="arrow"> <a href="#answer_13">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>3</span>
     </div>
     <div>
      <span>Answerer: </span> <span>leonbloy</span>
     </div>
     <div>
      <span> Answered: </span> <span>21 May 2017 at 01:43</span>
     </div>
    </div>
    <div>
     <p>There are many elegant and efficient answers here. But the conciseness can make us lose some useful information. In particular, one <strong>often does not want to consider a connection error an Exception</strong>, and one might want to treat differently some kind of network-related errors - for example, to decide if we should retry the download.</p>
     <p>Here's a method that does not throw Exceptions for network errors (only for truly exceptional problems, as malformed url or problems writing to the file)</p>
     <pre><code>/**
 * Downloads from a (http/https) URL and saves to a file. 
 * Does not consider a connection error an Exception. Instead it returns:
 *  
 *    0=ok  
 *    1=connection interrupted, timeout (but something was read)
 *    2=not found (FileNotFoundException) (404) 
 *    3=server error (500...) 
 *    4=could not connect: connection timeout (no internet?) java.net.SocketTimeoutException
 *    5=could not connect: (server down?) java.net.ConnectException
 *    6=could not resolve host (bad host, or no internet - no dns)
 * 
 * @param file File to write. Parent directory will be created if necessary
 * @param url  http/https url to connect
 * @param secsConnectTimeout Seconds to wait for connection establishment
 * @param secsReadTimeout Read timeout in seconds - trasmission will abort if it freezes more than this 
 * @return See above
 * @throws IOException Only if URL is malformed or if could not create the file
 */
public static int saveUrl(final Path file, final URL url, 
  int secsConnectTimeout, int secsReadTimeout) throws IOException {
    Files.createDirectories(file.getParent()); // make sure parent dir exists , this can throw exception
    URLConnection conn = url.openConnection(); // can throw exception if bad url
    if( secsConnectTimeout &gt; 0 ) conn.setConnectTimeout(secsConnectTimeout * 1000);
    if( secsReadTimeout &gt; 0 ) conn.setReadTimeout(secsReadTimeout * 1000);
    int ret = 0;
    boolean somethingRead = false;
    try (InputStream is = conn.getInputStream()) {
        try (BufferedInputStream in = new BufferedInputStream(is); OutputStream fout = Files
                .newOutputStream(file)) {
            final byte data[] = new byte[8192];
            int count;
            while((count = in.read(data)) &gt; 0) {
                somethingRead = true;
                fout.write(data, 0, count);
            }
        }
    } catch(java.io.IOException e) { 
        int httpcode = 999;
        try {
            httpcode = ((HttpURLConnection) conn).getResponseCode();
        } catch(Exception ee) {}
        if( somethingRead &amp;&amp; e instanceof java.net.SocketTimeoutException ) ret = 1;
        else if( e instanceof FileNotFoundException &amp;&amp; httpcode &gt;= 400 &amp;&amp; httpcode &lt; 500 ) ret = 2; 
        else if( httpcode &gt;= 400 &amp;&amp; httpcode &lt; 600 ) ret = 3; 
        else if( e instanceof java.net.SocketTimeoutException ) ret = 4; 
        else if( e instanceof java.net.ConnectException ) ret = 5; 
        else if( e instanceof java.net.UnknownHostException ) ret = 6;  
        else throw e;
    }
    return ret;
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_13"><span>Answer 13</span> <span class="arrow"> <a href="#answer_12">↑</a> </span> <span class="arrow"> <a href="#answer_14">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Mike</span>
     </div>
     <div>
      <span> Answered: </span> <span>19 Mar 2016 at 16:53</span>
     </div>
    </div>
    <div>
     <p>It's possible to download the file with with Apache's <code>HttpComponents</code> instead of <a href="https://commons.apache.org/proper/commons-io/" rel="nofollow noreferrer">Commons IO</a>. This code allows you to download a file in Java according to its URL and save it at the specific destination.</p>
     <pre><code>public static boolean saveFile(URL fileURL, String fileSavePath) {

    boolean isSucceed = true;

    CloseableHttpClient httpClient = HttpClients.createDefault();

    HttpGet httpGet = new HttpGet(fileURL.toString());
    httpGet.addHeader("User-Agent", "Mozilla/5.0 (Windows NT 6.3; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0");
    httpGet.addHeader("Referer", "https://www.google.com");

    try {
        CloseableHttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity fileEntity = httpResponse.getEntity();

        if (fileEntity != null) {
            FileUtils.copyInputStreamToFile(fileEntity.getContent(), new File(fileSavePath));
        }

    } catch (IOException e) {
        isSucceed = false;
    }

    httpGet.releaseConnection();

    return isSucceed;
}
</code></pre>
     <p>In contrast to the single line of code:</p>
     <pre><code>FileUtils.copyURLToFile(fileURL, new File(fileSavePath),
                        URLS_FETCH_TIMEOUT, URLS_FETCH_TIMEOUT);
</code></pre>
     <p>This code will give you more control over a process and let you specify not only time-outs, but <code>User-Agent</code> and <code>Referer</code> values, which are critical for many websites.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_14"><span>Answer 14</span> <span class="arrow"> <a href="#answer_13">↑</a> </span> <span class="arrow"> <a href="#answer_15">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Valentyn Kolesnikov</span>
     </div>
     <div>
      <span> Answered: </span> <span>6 May 2017 at 17:07</span>
     </div>
    </div>
    <div>
     <p>There is a method, <code>U.fetch(url)</code>, in the <a href="https://github.com/javadev/underscore-java" rel="nofollow noreferrer">underscore-java</a> library.</p>
     <p>File <em>pom.xml</em>:</p>
     <pre class="lang-xml prettyprint-override"><code>&lt;dependency&gt;
  &lt;groupId&gt;com.github.javadev&lt;/groupId&gt;
  &lt;artifactId&gt;underscore&lt;/artifactId&gt;
  &lt;version&gt;1.84&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
     <p>Code example:</p>
     <pre><code>import com.github.underscore.U;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;

public class Download {
    public static void main(String[] args) throws IOException {
        Files.write(Paths.get("data.bin"),
            U.fetch("https://stackoverflow.com/questions"
                + "/921262/how-to-download-and-save-a-file-from-internet-using-java").blob());
    }
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>1</td>
        <td><span>how useful is this answer, when the link becomes invalid? Please look at <a href="https://stackoverflow.com/questions/how-to-answer">How to Answer</a></span> <span> - </span> <span class="display-name">JimHawkins</span> <span> </span> <span class="date">25 Jul 2017 at 08:10</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>You code won't compiles. Question ask for solution in <code>Java</code>, but your answer look like <code>JavaScript</code></span> <span> - </span> <span class="display-name">talex</span> <span> </span> <span class="date">25 Jul 2017 at 12:10</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@talex I added pom.xml section and improved code example.</span> <span> - </span> <span class="display-name">Valentyn Kolesnikov</span> <span> </span> <span class="date">30 Jul 2017 at 10:19</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>The question is about saving data to a file in a directory, not reading it all into a string, which is invalid in the case of binary data.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">17 Jun 2021 at 11:35</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@user207421 I added example with saving binary file. Files.write(Paths.get("data.bin"), U.fetch(url).blob()).</span> <span> - </span> <span class="display-name">Valentyn Kolesnikov</span> <span> </span> <span class="date">18 Jun 2021 at 01:15</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>What is <code>U</code> here?</span> <span> - </span> <span class="display-name">Drishti Jain</span> <span> </span> <span class="date">2 Nov 2022 at 10:24</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_15"><span>Answer 15</span> <span class="arrow"> <a href="#answer_14">↑</a> </span> <span class="arrow"> <a href="#answer_16">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>leonbloy</span>
     </div>
     <div>
      <span> Answered: </span> <span>20 May 2017 at 23:50</span>
     </div>
    </div>
    <div>
     <p>To summarize (and somehow polish and update) previous answers. The three following methods are practically equivalent. (I added explicit timeouts, because I think they are a must. Nobody wants a download to freeze forever when the connection is lost.)</p>
     <pre><code>public static void saveUrl1(final Path file, final URL url,
    int secsConnectTimeout, int secsReadTimeout))
    throws MalformedURLException, IOException {

    // Files.createDirectories(file.getParent()); // Optional, make sure parent directory exists
    try (BufferedInputStream in = new BufferedInputStream(
         streamFromUrl(url, secsConnectTimeout,secsReadTimeout));
         OutputStream fout = Files.newOutputStream(file)) {

            final byte data[] = new byte[8192];
            int count;
            while((count = in.read(data)) &gt; 0)
                fout.write(data, 0, count);
        }
}

public static void saveUrl2(final Path file, final URL url,
    int secsConnectTimeout, int secsReadTimeout))
    throws MalformedURLException, IOException {

    // Files.createDirectories(file.getParent()); // Optional, make sure parent directory exists
    try (ReadableByteChannel rbc = Channels.newChannel(
             streamFromUrl(url, secsConnectTimeout, secsReadTimeout)
        );
        FileChannel channel = FileChannel.open(file,
             StandardOpenOption.CREATE,
             StandardOpenOption.TRUNCATE_EXISTING,
             StandardOpenOption.WRITE)
        ) {

        channel.transferFrom(rbc, 0, Long.MAX_VALUE);
    }
}

public static void saveUrl3(final Path file, final URL url,
    int secsConnectTimeout, int secsReadTimeout))
    throws MalformedURLException, IOException {

    // Files.createDirectories(file.getParent()); // Optional, make sure parent directory exists
    try (InputStream in = streamFromUrl(url, secsConnectTimeout,secsReadTimeout) ) {
        Files.copy(in, file, StandardCopyOption.REPLACE_EXISTING);
    }
}

public static InputStream streamFromUrl(URL url,int secsConnectTimeout,int secsReadTimeout) throws IOException {
    URLConnection conn = url.openConnection();
    if(secsConnectTimeout&gt;0)
        conn.setConnectTimeout(secsConnectTimeout*1000);
    if(secsReadTimeout&gt;0)
        conn.setReadTimeout(secsReadTimeout*1000);
    return conn.getInputStream();
}
</code></pre>
     <p>I don't find significant differences, and all seem right to me. They are safe and efficient. (Differences in speed seem hardly relevant - I write 180&nbsp;MB from the local server to a SSD disk in times that fluctuate around 1.2 to 1.5 secs). They don't require external libraries. All work with arbitrary sizes and (to my experience) HTTP redirections.</p>
     <p>Additionally, all throw <code>FileNotFoundException</code> if the resource is not found (error 404, typically), and <code>java.net.UnknownHostException</code> if the DNS resolution failed; other IOException correspond to errors during transmission.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_16"><span>Answer 16</span> <span class="arrow"> <a href="#answer_15">↑</a> </span> <span class="arrow"> <a href="#answer_17">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Sachin Rane</span>
     </div>
     <div>
      <span> Answered: </span> <span>27 May 2018 at 10:57</span>
     </div>
    </div>
    <div>
     <p>Below is the sample code to download a movie from the Internet with Java code:</p>
     <pre><code>URL url = new
URL("http://103.66.178.220/ftp/HDD2/Hindi%20Movies/2018/Hichki%202018.mkv");
    BufferedInputStream bufferedInputStream = new  BufferedInputStream(url.openStream());
    FileOutputStream stream = new FileOutputStream("/home/sachin/Desktop/test.mkv");

    int count = 0;
    byte[] b1 = new byte[100];

    while((count = bufferedInputStream.read(b1)) != -1) {
        System.out.println("b1:" + b1 + "&gt;&gt;" + count + "&gt;&gt; KB downloaded:" + new File("/home/sachin/Desktop/test.mkv").length()/1024);
        stream.write(b1, 0, count);
    }
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>Generally, answers are much more helpful if they include an explanation of what the code is intended to do, and why that solves the problem without introducing others.</span> <span> - </span> <span class="display-name">Tim Diekmann</span> <span> </span> <span class="date">27 May 2018 at 11:18</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>This code never closes anything, and uses a ridiculously small buffer,</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">17 Jun 2021 at 11:31</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_17"><span>Answer 17</span> <span class="arrow"> <a href="#answer_16">↑</a> </span> <span class="arrow"> <a href="#answer_18">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>ruslanKhodzhaev</span>
     </div>
     <div>
      <span> Answered: </span> <span>15 May 2021 at 17:31</span>
     </div>
    </div>
    <div>
     <p>Solution on java.net.http.HttpClient using Authorization:</p>
     <pre><code>HttpClient client = HttpClient.newHttpClient();

HttpRequest request = HttpRequest.newBuilder()
        .GET()
        .header("Accept", "application/json")
        // .header("Authorization", "Basic ci5raG9kemhhZXY6NDdiYdfjlmNUM=") if you need
        .uri(URI.create("https://jira.google.ru/secure/attachment/234096/screenshot-1.png"))
        .build();

HttpResponse&lt;InputStream&gt; response = client.send(request, HttpResponse.BodyHandlers.ofInputStream());

try (InputStream in = response.body()) {
    Files.copy(in, Paths.get(target + "screenshot-1.png"), StandardCopyOption.REPLACE_EXISTING);
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>"Authorization" is commented out. What is its role (in light of the first sentence's <i>"...using Authorization"</i>)?</span> <span> - </span> <span class="display-name">Peter Mortensen</span> <span> </span> <span class="date">11 Sep 2021 at 08:29</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>This doesn't even compile (also indicated by the syntax highligting) - near <code>"screenshot-1.png""</code>.</span> <span> - </span> <span class="display-name">Peter Mortensen</span> <span> </span> <span class="date">11 Sep 2021 at 08:29</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@PeterMortensen If resource is free, you don't need Authorization. Syntax error has been fixed.</span> <span> - </span> <span class="display-name">ruslanKhodzhaev</span> <span> </span> <span class="date">12 Sep 2021 at 09:18</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_18"><span>Answer 18</span> <span class="arrow"> <a href="#answer_17">↑</a> </span> <span class="arrow"> <a href="#answer_19">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>airsquared</span>
     </div>
     <div>
      <span> Answered: </span> <span>19 Apr 2023 at 03:12</span>
     </div>
    </div>
    <div>
     <p>One liner with the built-in <a href="https://openjdk.org/groups/net/httpclient/intro.html" rel="nofollow noreferrer">Java HTTP Client</a> added in Java 11:</p>
     <pre><code>URI url = ...;
Path path = ...; // output file path
HttpClient.newHttpClient().send(HttpRequest.newBuilder(path).build(), HttpResponse.BodyHandlers.ofFile(dir));
</code></pre>
     <p>If you're making multiple requests, you can reuse the HttpClient and the body handler.</p>
     <p>You can also customize the request by adding parameters to the <code>HttpRequest</code> and customize writing/creating the file by adding parameters to the <code>HttpResponse.BodyHandlers.ofFile</code> method.</p>
     <p>No need to worry about closing resources.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_19"><span>Answer 19</span> <span class="arrow"> <a href="#answer_18">↑</a> </span> <span class="arrow"> <a href="#answer_20">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>oktieh</span>
     </div>
     <div>
      <span> Answered: </span> <span>19 Aug 2014 at 21:25</span>
     </div>
    </div>
    <div>
     <p>There is an issue with simple usage of:</p>
     <pre><code>org.apache.commons.io.FileUtils.copyURLToFile(URL, File)
</code></pre>
     <p>if you need to download and save very large files, or in general if you need automatic retries in case connection is dropped.</p>
     <p>I suggest Apache HttpClient in such cases, along with org.apache.commons.io.FileUtils. For example:</p>
     <pre><code>GetMethod method = new GetMethod(resource_url);
try {
    int statusCode = client.executeMethod(method);
    if (statusCode != HttpStatus.SC_OK) {
        logger.error("Get method failed: " + method.getStatusLine());
    }
    org.apache.commons.io.FileUtils.copyInputStreamToFile(
        method.getResponseBodyAsStream(), new File(resource_file));
    } catch (HttpException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
    method.releaseConnection();
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>This code doesn't handle retries any better than any other answer or comment here: that is to say, it doesn't do them at all.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">17 Jun 2021 at 11:32</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_20"><span>Answer 20</span> <span class="arrow"> <a href="#answer_19">↑</a> </span> <span class="arrow"> <a href="#answer_21">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Celestine</span>
     </div>
     <div>
      <span> Answered: </span> <span>12 Jul 2017 at 20:25</span>
     </div>
    </div>
    <div>
     <p>You can do this in one line using <a href="https://github.com/intlink/netloader" rel="nofollow noreferrer">netloader for Java</a>:</p>
     <pre><code>new NetFile(new File("my/zips/1.zip"), "https://example.com/example.zip", -1).load(); // Returns true if succeed, otherwise false.
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_21"><span>Answer 21</span> <span class="arrow"> <a href="#answer_20">↑</a> </span> <span class="arrow"> <a href="#answer_22">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Suchin Madusha</span>
     </div>
     <div>
      <span> Answered: </span> <span>28 Jan 2021 at 09:59</span>
     </div>
    </div>
    <div>
     <p>This can read a file on the Internet and write it into a file.</p>
     <pre><code>import java.net.URL;
import java.io.FileOutputStream;
import java.io.File;

public class Download {
    public static void main(String[] args) throws Exception {
         URL url = new URL("https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png");  // Input URL
         FileOutputStream out = new FileOutputStream(new File("out.png"));  // Output file
         out.write(url.openStream().readAllBytes());
         out.close();
    }
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_22"><span>Answer 22</span> <span class="arrow"> <a href="#answer_21">↑</a> </span> <span class="arrow"> <a href="#answer_23">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>-1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>bpjoshi</span>
     </div>
     <div>
      <span> Answered: </span> <span>16 Nov 2017 at 11:36</span>
     </div>
    </div>
    <div>
     <p>If you are behind a proxy, you can set the proxies in the Java program as below:</p>
     <pre><code>Properties systemSettings = System.getProperties();
systemSettings.put("proxySet", "true");
systemSettings.put("https.proxyHost", "HTTPS proxy of your org");
systemSettings.put("https.proxyPort", "8080");
</code></pre>
     <p>If you are not behind a proxy, don't include the lines above in your code. Full working code to download a file when you are behind a proxy.</p>
     <pre><code>public static void main(String[] args) throws IOException {
    String url = "https://raw.githubusercontent.com/bpjoshi/fxservice/master/src/test/java/com/bpjoshi/fxservice/api/TradeControllerTest.java";
    OutputStream outStream = null;
    URLConnection connection = null;
    InputStream is = null;
    File targetFile = null;
    URL server = null;

    // Setting up proxies
    Properties systemSettings = System.getProperties();
        systemSettings.put("proxySet", "true");
        systemSettings.put("https.proxyHost", "HTTPS proxy of my organisation");
        systemSettings.put("https.proxyPort", "8080");
        // The same way we could also set proxy for HTTP
        System.setProperty("java.net.useSystemProxies", "true");
        // Code to fetch file
    try {
        server = new URL(url);
        connection = server.openConnection();
        is = connection.getInputStream();
        byte[] buffer = new byte[is.available()];
        is.read(buffer);

        targetFile = new File("src/main/resources/targetFile.java");
        outStream = new FileOutputStream(targetFile);
        outStream.write(buffer);
    } catch (MalformedURLException e) {
        System.out.println("THE URL IS NOT CORRECT ");
        e.printStackTrace();
    } catch (IOException e) {
        System.out.println("I/O exception");
        e.printStackTrace();
    }
    finally{
        if(outStream != null)
            outStream.close();
    }
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span><code>systemSettings.put("proxySet", "true");</code> is an urban myth deriving from the HotJava bean that became defunct in 1998. In any Sun or Oracle JDK it does exactly nothing. Proof: set it to <code>false</code> in any situation when you need the other proxy settings and watch it continue to work.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">17 Jun 2021 at 11:37</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>hmm interesting, gonna check more about it. thanks</span> <span> - </span> <span class="display-name">bpjoshi</span> <span> </span> <span class="date">18 Jun 2021 at 05:19</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_23"><span>Answer 23</span> <span class="arrow"> <a href="#answer_22">↑</a> </span> <span class="arrow"> <a href="#answer_24">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>-1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Ashish Gupta</span>
     </div>
     <div>
      <span> Answered: </span> <span>30 May 2020 at 22:04</span>
     </div>
    </div>
    <div>
     <p>First method using the new channel</p>
     <pre><code>ReadableByteChannel aq = Channels.newChannel(new url("https//asd/abc.txt").openStream());
FileOutputStream fileOS = new FileOutputStream("C:Users/local/abc.txt")
FileChannel writech = fileOS.getChannel();
</code></pre>
     <p>Second method using FileUtils</p>
     <pre><code>FileUtils.copyURLToFile(new url("https//asd/abc.txt", new local file on system("C":/Users/system/abc.txt"));
</code></pre>
     <p>Third method using</p>
     <pre><code>InputStream xy = new ("https//asd/abc.txt").openStream();
</code></pre>
     <p>This is how we can download file by using basic Java code and other third-party libraries. These are just for quick reference. Please google with the above keywords to get detailed information and other options.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>3rd method does not compile. Neither the 1st nor the 3rd woudl actually copy anything.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">17 Jun 2021 at 11:39</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_24"><span>Answer 24</span> <span class="arrow"> <a href="#answer_23">↑</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>-2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Gegi4321</span>
     </div>
     <div>
      <span> Answered: </span> <span>1 Jul 2017 at 19:52</span>
     </div>
    </div>
    <div>
     <pre><code>public class DownloadManager {

    static String urls = "[WEBSITE NAME]";

    public static void main(String[] args) throws IOException{
        URL url = verify(urls);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        InputStream in = null;
        String filename = url.getFile();
        filename = filename.substring(filename.lastIndexOf('/') + 1);
        FileOutputStream out = new FileOutputStream("C:\\Java2_programiranje/Network/DownloadTest1/Project/Output" + File.separator + filename);
        in = connection.getInputStream();
        int read = -1;
        byte[] buffer = new byte[4096];
        while((read = in.read(buffer)) != -1){
            out.write(buffer, 0, read);
            System.out.println("[SYSTEM/INFO]: Downloading file...");
        }
        in.close();
        out.close();
        System.out.println("[SYSTEM/INFO]: File Downloaded!");
    }
    private static URL verify(String url){
        if(!url.toLowerCase().startsWith("http://")) {
            return null;
        }
        URL verifyUrl = null;

        try{
            verifyUrl = new URL(url);
        }catch(Exception e){
            e.printStackTrace();
        }
        return verifyUrl;
    }
}
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>1</td>
        <td><span>You can improve your answer by providing information how does your code work instead of just dumping it.</span> <span> - </span> <span class="display-name">Matej Kormuth</span> <span> </span> <span class="date">1 Jul 2017 at 22:26</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>and by fixing it to close resources if there is an exception.</span> <span> - </span> <span class="display-name">user207421</span> <span> </span> <span class="date">17 Jun 2021 at 11:38</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>