<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How animate for delete action in dataTable?</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>How animate for delete action in dataTable?</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>-1</span>
    </div>
    <div>
     <span>Asker: </span> <span>mhm.map</span>
    </div>
    <div>
     <span>Asked: </span> <span>30 Oct 2021 at 09:46</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/69778464/how-animate-for-delete-action-in-datatable">source</a>
    </div>
   </div>
   <div>
    <p>I have a piece of code that delete a record and reload dataTable. I want to animate this action as such that on click the button the record of dataTable fade out and then delete from Data Base. this is my code:</p>
    <pre><code> $(document).on('click', '.delete', function() {
        var _id = $(this).attr("id");
        data._id = $(this).attr("id");
        data.operation = "deleteorderdetail";
        // alert(data.operation);
        if (confirm("Are you sure?")) {
            $.ajax({
                url: 'delete.php',
                method: 'POST',
                data,
                success: function(data) {
                    $(this).parentsUntil("tr").hide(1000); -----&gt; not work !                        
                    dataTable.ajax.reload();
                }
            });
        } else {
            return false;
        }
</code></pre>
    <p>Best regards....</p>
   </div>
   <div class="tags">
    <span class="tag">jquery</span><span class="tag">ajax</span><span class="tag">datatable</span>
   </div>
   <hr>
   <div class="comment">
    <table>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Neeraj</span>
     </div>
     <div>
      <span> Answered: </span> <span>30 Oct 2021 at 10:00</span>
     </div>
    </div>
    <div>
     <p>for <strong>Datatable</strong> try this may help you try like this</p>
     <pre><code>   var row = $(this).closest('tr');
                        row.fadeOut(400, function () {
                            dataTable.row(row).remove().draw(false);
                        });
</code></pre>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code> $(document).on('click', '.delete', function() {
        var _id = $(this).attr("id");
        data._id = $(this).attr("id");
        data.operation = "deleteorderdetail";
        // alert(data.operation);
        if (confirm("Are you sure?")) {
            $.ajax({
                url: 'delete.php',
                method: 'POST',
                data,
                success: function(data) {
                  var row = $(this).closest('tr');
                    row.fadeOut(400, function () {
                        dataTable.row(row).remove().draw(false);
                    });
                }
            });
        } else {
            return false;
        }</code></pre>
      </div>
     </div>
     <p></p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>not work for me! I am using DATATABLE plugin....</span> <span> - </span> <span class="display-name">mhm.map</span> <span> </span> <span class="date">30 Oct 2021 at 10:11</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>check now it's may work!</span> <span> - </span> <span class="display-name">Neeraj</span> <span> </span> <span class="date">30 Oct 2021 at 10:18</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I checked it again . The record removed but without any animate...</span> <span> - </span> <span class="display-name">mhm.map</span> <span> </span> <span class="date">30 Oct 2021 at 10:34</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>now, simply add animation I updated the code to check this may helpful.</span> <span> - </span> <span class="display-name">Neeraj</span> <span> </span> <span class="date">30 Oct 2021 at 10:42</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">↑</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>30 Oct 2021 at 17:10</span>
     </div>
    </div>
    <div>
     <p>You can make the following changes to your approach:</p>
     <ol>
      <li>Capture the clicked item into its own variable:</li>
     </ol>
     <pre class="lang-js prettyprint-override"><code>var clickedItem = $(this);
</code></pre>
     <ol start="2">
      <li>
       <p>Use this clicked item when you select the row to be hidden.</p></li>
      <li>
       <p>Instead of using <code>parentsUntil</code>, use <code>closest</code>. Using <code>parentsUntil</code> will select every ancestor from your clicked object up to <em>but not including</em> the selected element (the <code>&lt;tr&gt;</code> in your case). I assume that what you want is to hide the entire row.</p></li>
     </ol>
     <p>The reason for performing step 1: If you try to use <code>$(this).closest("tr").hide(1000);</code>, then <code>$(this)</code> will refer to the jQuery Ajax object in which <code>$(this)</code> is located.</p>
     <p>The end result:</p>
     <pre class="lang-js prettyprint-override"><code>$(document).on('click', '.delete', function() {
  var clickedItem = $(this); // capture clicked item
  var _id = $(this).attr("id");
  data._id = $(this).attr("id");
  data.operation = "deleteorderdetail";
  if (confirm("Are you sure?")) {
    $.ajax({
      url: 'delete.php',
      method: 'POST',
      data,
      success: function(data) {
        clickedItem.closest("tr").hide(1000); // use clicked item                 
        dataTable.ajax.reload();
      }
    });
  } else {
    return false;
  }
});
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>It's not work. I did not see desired result. I think the reload() method prevents to see desired result</span> <span> - </span> <span class="display-name">mhm.map</span> <span> </span> <span class="date">1 Nov 2021 at 05:21</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@mhm.map you tried ? row.fadeOut(400, function () { dataTable.row(row).remove().draw(false); });</span> <span> - </span> <span class="display-name">Neeraj</span> <span> </span> <span class="date">1 Nov 2021 at 06:13</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>This approach works for me, so there may be some information missing from the question.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">1 Nov 2021 at 10:43</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>