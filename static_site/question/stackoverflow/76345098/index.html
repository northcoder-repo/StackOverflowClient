<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>Bootstrap DataTables not working properly in my website</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>Bootstrap DataTables not working properly in my website</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>0</span>
    </div>
    <div>
     <span>Asker: </span> <span>Antonio Avila</span>
    </div>
    <div>
     <span>Asked: </span> <span>27 May 2023 at 02:30</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/76345098/bootstrap-datatables-not-working-properly-in-my-website">source</a>
    </div>
   </div>
   <div>
    <p>Error when using data tables, sources order</p>
    <p>Hi, I'm making a website with boostrap 5 and I'm trying to make a dataTable type table, only the options that data tables have in boostrap don't work. For a moment it worked fine but I don't really remember what I did that stopped looking good hahha. <a href="https://i.stack.imgur.com/0Q0AJ.png" rel="nofollow noreferrer">index.html</a></p>
    <p>I think I have a mistake in the order of my head and where the data table goes.</p>
    <p>HTML</p>
    <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
  &lt;head&gt;

  &lt;title&gt;Tutorial API JavaScript&lt;/title&gt;

  &lt;meta charset="utf-8"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;

  &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"&gt;
  &lt;link rel="stylesheet" href= "https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css"&gt;

  &lt;script src="https://code.jquery.com/jquery-3.5.1.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"&gt;&lt;/script&gt;
  &lt;script src="../final/script.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
      &lt;h1 class="text-center pt-5 pb-4"&gt;Resultados de COVID-19 en Estados Unidos por dia&lt;/h1&gt;
      &lt;div id="contenedor" class="container"&gt;
        &lt;table id="data-table" class="table table-striped" style="width:100%"&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;Id&lt;/th&gt;
              &lt;th&gt;Fecha&lt;/th&gt;
              &lt;th&gt;Casos positivos&lt;/th&gt;
              &lt;th&gt;Casos negativos&lt;/th&gt;
              &lt;th&gt;Muertes&lt;/th&gt;
              &lt;th&gt;Total de pruebas&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;

          &lt;tbody&gt;&lt;/tbody&gt;
        &lt;/table&gt;

      &lt;/div&gt;
    &lt;script&gt;
      $(document).ready(function () {
        $('#data-table').DataTable();
    });
    &lt;/script&gt;
  &lt;/body&gt;


&lt;/html&gt;
</code></pre>
    <p>JS</p>
    <pre><code>const apiUrl = 'https://api.covidtracking.com/v1/us/daily.json'; 
fetch(apiUrl)
  .then(response =&gt; response.json())
  .then(data =&gt; {
    const tableBody = document.querySelector('#data-table tbody');
    let count = 0;
    data.forEach(item =&gt; {
      count++;
      const row = document.createElement('tr');
      
      const idCell = document.createElement('td');
      idCell.textContent = count;
      row.appendChild(idCell);

      const dateCell = document.createElement('td');
      dateCell.textContent = item.dateChecked;
      row.appendChild(dateCell); //fecha

      const posCell = document.createElement('td');
      posCell.textContent = item.positive;
      row.appendChild(posCell); //positivo

      const negCell = document.createElement('td');
      negCell.textContent = item.negative;
      row.appendChild(negCell);//negativo

      const deadCell = document.createElement('td');
      deadCell.textContent = item.death;
      row.appendChild(deadCell); //muertes

      const resCell = document.createElement('td');
      resCell.textContent = item.totalTestResults;
      row.appendChild(resCell);//tests

      tableBody.appendChild(row);
    });
  })
  .catch(error =&gt; {
    console.log('Error al obtener los datos:', error);
  });

</code></pre>
   </div>
   <div class="tags">
    <span class="tag">javascript</span><span class="tag">html</span><span class="tag">jquery</span><span class="tag">datatables</span>
   </div>
   <hr>
   <div class="comment">
    <table>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>27 May 2023 at 13:34</span>
     </div>
    </div>
    <div>
     <p>The approach in the question creates each row manually, and adds each data cell to the HTML table - for example:</p>
     <pre><code>row.appendChild(idCell);
</code></pre>
     <p>This does not add any data to your DataTable - it only adds the data to the HTML table (the DOM). That is why you see a message saying "No data available in table" and this is why you cannot sort your data using DataTables. DataTables does not know there is any data.</p>
     <p>You can see the data in your web page, because it is in the HTML <code>&lt;table&gt;</code>.</p>
     <p>Instead of building each row of data manually, you can take advantage of DataTables built-in support for <a href="https://datatables.net/reference/option/ajax" rel="nofollow noreferrer">Ajax data sources</a>.</p>
     <p>This will simplify your code. It will also ensure that the data is <em>added directly to the DataTable</em> - and DataTables will build the HTML contents for you.</p>
     <p>Here is a runnable demo:</p>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code>$(document).ready(function() {
  $('#data-table').DataTable({

    ajax: {
      url: 'https://api.covidtracking.com/v1/us/daily.json',
      dataSrc: ''
    },
    columns: [{
        render: function(data, type, row, meta) {
          return meta.row + 1;
        }
      },
      {
        data: 'dateChecked'
      },
      {
        data: 'positive'
      },
      {
        data: 'negative'
      },
      {
        data: 'death'
      },
      {
        data: 'totalTestResults'
      },
    ]

  });
});</code></pre>
       <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head lang="en"&gt;
  &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
  &lt;title&gt;Covid Data&lt;/title&gt;


  &lt;link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet" /&gt;
  &lt;link href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" rel="stylesheet" /&gt;

  &lt;script src="https://code.jquery.com/jquery-3.6.0.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"&gt;&lt;/script&gt;
  &lt;script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"&gt;&lt;/script&gt;



&lt;/head&gt;

&lt;body&gt;
  &lt;h1 class="text-center pt-5 pb-4"&gt;Resultados de COVID-19 en Estados Unidos por dia&lt;/h1&gt;
  &lt;div id="contenedor" class="container"&gt;

    &lt;table id="data-table" class="table table-striped" style="width:100%"&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Id&lt;/th&gt;
          &lt;th&gt;Fecha&lt;/th&gt;
          &lt;th&gt;Casos positivos&lt;/th&gt;
          &lt;th&gt;Casos negativos&lt;/th&gt;
          &lt;th&gt;Muertes&lt;/th&gt;
          &lt;th&gt;Total de pruebas&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;

      &lt;tbody&gt;&lt;/tbody&gt;
    &lt;/table&gt;

  &lt;/div&gt;



&lt;/body&gt;

&lt;/html&gt;</code></pre>
      </div>
     </div>
     <p></p>
     <p>Points to note:</p>
     <ol>
      <li>
       <p>I have used all the latest versions supported by DataTables for Bootstrap 5. See <a href="https://datatables.net/download/index" rel="nofollow noreferrer">here</a>.</p></li>
      <li>
       <p>Your JSON data source looks like this:</p></li>
     </ol>
     <pre><code>[
  {
    "date": 20210307,
    "states": 56,
    "positive": 28756489,
    "negative": 74582825,
    ...
    "positiveIncrease": 41835,
    "totalTestResultsIncrease": 1170059,
    "hash": "a80d0063822e251249fd9a44730c49cb23defd83"
  },
  ...
  { ... }
]
</code></pre>
     <p>The JSON array does not have a name - it is just a plain array <code>[ ... ]</code>. Therefore we need to indicate this to DataTables:</p>
     <pre><code>dataSrc: ''
</code></pre>
     <p>This means "use the unnamed array". If the data had looked something like this:</p>
     <pre><code>{
   "covid_data": [
    {
      "date": 20210307,
      "states": 56,
      "positive": 28756489,
      "negative": 74582825,
      ...
      "positiveIncrease": 41835,
      "totalTestResultsIncrease": 1170059,
      "hash": "a80d0063822e251249fd9a44730c49cb23defd83"
    },
    ...
    { ... }
  ]
}
</code></pre>
     <p>Then we would have needed to use this:</p>
     <pre><code>dataSrc: 'covid_data'
</code></pre>
     <ol start="3">
      <li>You want to assign a sequential ID to the first column. You use <code>count++;</code> for this, as you build your rows. Instead we can use DataTables for this:</li>
     </ol>
     <pre><code>{ 
  render: function ( data, type, row, meta ) {
    return meta.row + 1;
  }
}
</code></pre>
     <p>This defines how that first <code>ID</code> column is populated. See <a href="https://datatables.net/reference/option/columns.render" rel="nofollow noreferrer">columns.render</a> for a description of how <code>meta</code> works.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>