<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How to access java-classes in the default-package?</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>How to access java-classes in the default-package?</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>108</span>
    </div>
    <div>
     <span>Asker: </span> <span>Mnementh</span>
    </div>
    <div>
     <span>Asked: </span> <span>12 Nov 2008 at 12:36</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/283816/how-to-access-java-classes-in-the-default-package">source</a>
    </div>
   </div>
   <div>
    <p>I'm working now together with others in a grails project. I have to write some Java-classes. But I need access to an searchable object created with groovy. It seems, that this object has to be placed in the default-package.</p>
    <p>My question is: <strong>Is there a way to access this object in the default-package from a Java-class in a named package?</strong></p>
   </div>
   <div class="tags">
    <span class="tag">java</span><span class="tag">groovy</span><span class="tag">default-package</span>
   </div>
   <hr>
   <div class="comment">
    <table>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>135</span>
     </div>
     <div>
      <span>Answerer: </span> <span>VonC</span>
     </div>
     <div>
      <span> Answered: </span> <span>12 Nov 2008 at 12:44</span>
     </div>
    </div>
    <div>
     <p><a href="http://mindprod.com/jgloss/import.html" rel="noreferrer">You can’t use</a> classes in the default package from a named package.<br>
       (<em>Technically</em> you can, as shown in Sharique Abdullah's <a href="https://stackoverflow.com/a/561183/6309">answer</a> through reflection API, <em>but</em> classes from the unnamed namespace are <strong>not in scope</strong> in an <strong>import declaration</strong>)</p>
     <p>Prior to J2SE 1.4 you could import classes from the default package using a syntax like this:</p>
     <pre><code>import Unfinished;
</code></pre>
     <p>That's <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4989710" rel="noreferrer">no longer allowed</a>. So to access a default package class from within a packaged class requires moving the default package class into a package of its own.</p>
     <p>If you have access to the source generated by groovy, some post-processing is needed to move the file into a dedicated package and add this "package" directive at its beginning.</p>
     <hr>
     <p>Update 2014: <a href="https://bugs.openjdk.java.net/browse/JDK-6975015" rel="noreferrer">bug 6975015</a>, for JDK7 and JDK8, describe an even <em>stricter</em> prohibition against import from unnamed package.</p>
     <blockquote>
      <p>The <code>TypeName</code> must be the canonical name of a class type, interface type, enum type, or annotation type.<br>
        The type must be either a member of a <strong>named package</strong>, or a member of a type whose outermost lexically enclosing type is a member of a <strong>named package</strong>, <strong>or a compile-time error occurs</strong>.</p>
     </blockquote>
     <hr>
     <p><a href="https://stackoverflow.com/users/5221149/andreas">Andreas</a> points out <a href="https://stackoverflow.com/questions/283816/how-to-access-java-classes-in-the-default-package/283828#comment98446842_283828">in the comments</a>:</p>
     <blockquote>
      <blockquote>
       <p>"why is [the default package] there in the first place? design error?"</p>
      </blockquote>
      <p>No, it's deliberate.<br><a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-7.html#jls-7.4.2" rel="noreferrer">JLS 7.4.2. Unnamed Packages</a> says: "Unnamed packages are provided by the Java SE platform principally for convenience when developing small or temporary applications or when just beginning development".</p>
     </blockquote>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>7</td>
        <td><span>As I've explained to other people before, the default package is a second-class citizen in the Java world. Just Don't Do That. :-)</span> <span> - </span> <span class="display-name">C. K. Young</span> <span> </span> <span class="date">12 Nov 2008 at 12:58</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Seems I have to learn Groovy (on a very time-constrained project) or code in the default-package. :-(</span> <span> - </span> <span class="display-name">Mnementh</span> <span> </span> <span class="date">12 Nov 2008 at 13:02</span></td>
       </tr>
       <tr>
        <td>11</td>
        <td><span>@ChrisJester-Young if so why is it there in the first place? design error?</span> <span> - </span> <span class="display-name">Pacerier</span> <span> </span> <span class="date">18 Oct 2011 at 12:32</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Why it was deprecated?</span> <span> - </span> <span class="display-name">Suzan Cioc</span> <span> </span> <span class="date">18 Jan 2014 at 14:09</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@SuzanCioc do you mean: "why after J2SE1.4, can you no longer access the default package?"</span> <span> - </span> <span class="display-name">VonC</span> <span> </span> <span class="date">18 Jan 2014 at 14:33</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@VonC yes this is what I mean</span> <span> - </span> <span class="display-name">Suzan Cioc</span> <span> </span> <span class="date">18 Jan 2014 at 14:40</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@SuzanCioc Because classes from the unnamed namespace are not in scope in an import declaration: the risk of <i>naming collision</i> was simply too important in that unnamed namespace.</span> <span> - </span> <span class="display-name">VonC</span> <span> </span> <span class="date">18 Jan 2014 at 14:42</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@VonC what is the principal difference between "root" package and any other top-level packages, like <code>com</code> or <code>org</code>? May be let us prohibit to import them too?</span> <span> - </span> <span class="display-name">Suzan Cioc</span> <span> </span> <span class="date">18 Jan 2014 at 16:30</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@SuzanCioc <code>com</code> or <code>org</code> are based on a naming <i>convention</i>, as opposed to the "<code>root</code>" package, which is part of the language specification. You have to trust conventions, but the language can evolve its specification.</span> <span> - </span> <span class="display-name">VonC</span> <span> </span> <span class="date">18 Jan 2014 at 16:34</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I agree that both conventions ans specifications can evolve. So if we judge to evolve root package specification because of dangerous name clash, then we can evolve conventions on the same reason: NEVER put your class into one-level named package or you will be in danger!</span> <span> - </span> <span class="display-name">Suzan Cioc</span> <span> </span> <span class="date">18 Jan 2014 at 16:39</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@SuzanCioc I agree. The difference, though, is that conventions evolve by their <i>users</i>, while specifications evolves by the language designers: two different communities, both in scale and in decision process.</span> <span> - </span> <span class="display-name">VonC</span> <span> </span> <span class="date">18 Jan 2014 at 16:41</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Downvote because although I agree with the sentament, Sharique's answer is correct and this one is wrong.</span> <span> - </span> <span class="display-name">Bill K</span> <span> </span> <span class="date">16 Oct 2014 at 00:45</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@BillK Good point. i have included a reference to Sharique's answer. I have also documented a recent (2014) evolution of JLS8 (Java Language Specification) reinforcing the fact a type <i>must</i> be a member of a type package.</span> <span> - </span> <span class="display-name">VonC</span> <span> </span> <span class="date">16 Oct 2014 at 05:49</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Thanks, -1 removed... I wonder how the JLS change will affect Groovy scripts because they are generally in the default package (It wouldn't make much sense to have them anywhere else). I suppose groovy could assign a fake package automatically--that would be no more hacky than anything else in groovy :)</span> <span> - </span> <span class="display-name">Bill K</span> <span> </span> <span class="date">16 Oct 2014 at 17:24</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@VonC, Aside from reflection, what about the new invocation mechanisms?</span> <span> - </span> <span class="display-name">Pacerier</span> <span> </span> <span class="date">29 Jul 2017 at 23:18</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@VonC, Yep, I heard they gave dynamic coding a complete rehaul, making scripting languages like JS, Scala, and Kotlin First class.</span> <span> - </span> <span class="display-name">Pacerier</span> <span> </span> <span class="date">6 Aug 2017 at 21:58</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@Pacerier "why is [the default package] there in the first place? design error?" No, it's deliberate. JLS <a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-7.html#jls-7.4.2" rel="nofollow noreferrer">7.4.2. Unnamed Packages</a> says: <i>"Unnamed packages are provided by the Java SE platform principally for <b>convenience</b> when developing <b>small or temporary applications</b> or when just <b>beginning development</b>"</i>.</span> <span> - </span> <span class="display-name">Andreas</span> <span> </span> <span class="date">28 Apr 2019 at 22:55</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@Andreas Thank you for this feedback. I have included your comment in the answer for more visibility.</span> <span> - </span> <span class="display-name">VonC</span> <span> </span> <span class="date">29 Apr 2019 at 07:31</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">↑</a> </span> <span class="arrow"> <a href="#answer_3">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>63</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Sharique Abdullah</span>
     </div>
     <div>
      <span> Answered: </span> <span>18 Feb 2009 at 14:10</span>
     </div>
    </div>
    <div>
     <p>In fact, you can.</p>
     <p>Using reflections API you can access any class so far. At least I was able to :)</p>
     <pre><code>Class fooClass = Class.forName("FooBar");
Method fooMethod = fooClass.getMethod("fooMethod", String.class);

String fooReturned = (String)fooMethod.invoke(fooClass.newInstance(), "I did it");
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>For Scala, the following code works: <code>val bar = "hi"; val fooClass = Class.forName("FooClass"); val fooMethod = fooClass.getMethod("foo", classOf[Array[String]]); val fooReturned = fooMethod.invoke(fooClass.newInstance(), Array(bar));</code></span> <span> - </span> <span class="display-name">Jus12</span> <span> </span> <span class="date">14 Aug 2012 at 08:58</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>Great answer, +1. Since the question was groovy, however, you can use duck typing (like Duct taping I guess)... <code>Class.forName("FooBar").newInstance().fooMethod("I did it")</code></span> <span> - </span> <span class="display-name">Bill K</span> <span> </span> <span class="date">16 Oct 2014 at 00:47</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Well, if I have two classes named FooBar from two differents jar files, which one will be called?</span> <span> - </span> <span class="display-name">Davide</span> <span> </span> <span class="date">15 Mar 2021 at 15:59</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_3"><span>Answer 3</span> <span class="arrow"> <a href="#answer_2">↑</a> </span> <span class="arrow"> <a href="#answer_4">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>7</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Sean</span>
     </div>
     <div>
      <span> Answered: </span> <span>13 Mar 2014 at 02:37</span>
     </div>
    </div>
    <div>
     <p>Use <a href="https://code.google.com/p/jarjar/">jarjar</a> to repackage the jar file with the following rule:</p>
     <pre><code>rule * &lt;target package name&gt;.@1
</code></pre>
     <p>All classes in the default package of the source jar file will move to the target package, thus are able to access.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>4</td>
        <td><span>a demo of how to use jarjar would be great</span> <span> - </span> <span class="display-name">BiGGZ</span> <span> </span> <span class="date">2 Mar 2017 at 21:34</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@BiGGZ: See the <a href="https://github.com/shevek/jarjar/blob/master/README.md" rel="nofollow noreferrer">README.md</a> file on the jarjar github repo to see how to use jarjar with ant, gradle or the command line.</span> <span> - </span> <span class="display-name">lucidiot</span> <span> </span> <span class="date">12 Oct 2017 at 09:14</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_4"><span>Answer 4</span> <span class="arrow"> <a href="#answer_3">↑</a> </span> <span class="arrow"> <a href="#answer_5">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>3</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Ken Gentle</span>
     </div>
     <div>
      <span> Answered: </span> <span>12 Nov 2008 at 14:12</span>
     </div>
    </div>
    <div>
     <p>You can use packages in the <code>Groovy</code> code, and things will work just fine.</p>
     <p>It may mean a minor reorganization of code under <code>grails-app</code> and a little bit of a pain at first, but on a large grails project, it just make sense to organize things in packages. We use the Java standard package naming convention <code>com.foo.&lt;app&gt;.&lt;package&gt;</code>.</p>
     <p>Having everything in the default package becomes a hindrance to integration, as you're finding.</p>
     <p>Controllers seem to be the one Grails artifact (or artefact) that resists being put in a Java package. Probably I just haven't figured out the <code>Convention</code> for that yet. ;-)</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_5"><span>Answer 5</span> <span class="arrow"> <a href="#answer_4">↑</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Java bee</span>
     </div>
     <div>
      <span> Answered: </span> <span>26 Apr 2020 at 08:10</span>
     </div>
    </div>
    <div>
     <p><em>just to complete the idea:</em></p>
     <p><strong>From inside</strong> default-package you can access objects resided in named packages.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>