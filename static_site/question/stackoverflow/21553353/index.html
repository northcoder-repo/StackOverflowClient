<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>What is the difference between CMD and ENTRYPOINT in a Dockerfile?</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>What is the difference between CMD and ENTRYPOINT in a Dockerfile?</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>2608</span>
    </div>
    <div>
     <span>Asker: </span> <span>Golo Roden</span>
    </div>
    <div>
     <span>Asked: </span> <span>4 Feb 2014 at 13:04</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/21553353/what-is-the-difference-between-cmd-and-entrypoint-in-a-dockerfile">source</a>
    </div>
   </div>
   <div>
    <p>In Dockerfiles there are two commands that look similar to me: <code>CMD</code> and <code>ENTRYPOINT</code>. But I guess that there is a (subtle?) difference between them - otherwise it would not make any sense to have two commands for the very same thing.</p>
    <p>The documentation states for <code>CMD</code>-</p>
    <blockquote>
     <p>The main purpose of a CMD is to provide defaults for an executing container.</p>
    </blockquote>
    <p>and for <code>ENTRYPOINT</code>:</p>
    <blockquote>
     <p>An ENTRYPOINT helps you to configure a container that you can run as an executable.</p>
    </blockquote>
    <p>So, what's the difference between those two commands?</p>
   </div>
   <div class="tags">
    <span class="tag">docker</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td>2</td>
       <td><span>^ that! Thanks @slm . Here's another very similar reference that might be a bit more up-to-date: <a href="https://docs.docker.com/reference/builder/#entrypoint" rel="nofollow noreferrer">docs.docker.com/reference/builder/#entrypoint</a></span> <span> - </span> <span class="display-name">Adam Monsen</span> <span> </span> <span class="date">11 Jul 2015 at 03:37</span></td>
      </tr>
      <tr>
       <td>61</td>
       <td><span>As confusing as <a href="https://stackoverflow.com/questions/24958140/what-is-the-difference-between-the-copy-and-add-commands-in-a-dockerfile">the difference between <code>ADD</code> and <code>COPY</code></a></span> <span> - </span> <span class="display-name">Raedwald</span> <span> </span> <span class="date">21 Feb 2018 at 16:36</span></td>
      </tr>
      <tr>
       <td>4</td>
       <td><span>This link provides difference in between RUN, CMD, and ENTRYPOINT: <a href="http://goinbigdata.com/docker-run-vs-cmd-vs-entrypoint/" rel="nofollow noreferrer">goinbigdata.com/docker-run-vs-cmd-vs-entrypoint</a></span> <span> - </span> <span class="display-name">prafi</span> <span> </span> <span class="date">16 Oct 2018 at 16:46</span></td>
      </tr>
      <tr>
       <td>1</td>
       <td><span>Just note that <code>CMD</code> and <code>ENTRYPOINT</code> both have different forms to be written, <b>exec</b> and <b>shell</b> form. So make yourself a favor and understand the subtle differences in behavior depending on the form being used. Then read <a href="https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact" rel="nofollow noreferrer">docs.docker.com/engine/reference/builder/â€¦</a>.</span> <span> - </span> <span class="display-name">Jaime Hablutzel</span> <span> </span> <span class="date">15 Dec 2018 at 16:26</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>I think this <a href="https://phoenixnap.com/kb/docker-cmd-vs-entrypoint" rel="nofollow noreferrer">phoenixnap.com/kb/docker-cmd-vs-entrypoint</a> explains it very clearly.</span> <span> - </span> <span class="display-name">Tuananhcwrs</span> <span> </span> <span class="date">14 Jul 2020 at 11:07</span></td>
      </tr>
      <tr>
       <td>2</td>
       <td><span>This is the best blog I found <a href="https://goinbigdata.com/docker-run-vs-cmd-vs-entrypoint/" rel="nofollow noreferrer">goinbigdata.com/docker-run-vs-cmd-vs-entrypoint</a></span> <span> - </span> <span class="display-name">Vijay S B</span> <span> </span> <span class="date">18 Sep 2021 at 14:22</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2490</span>
     </div>
     <div>
      <span>Answerer: </span> <span>creack</span>
     </div>
     <div>
      <span> Answered: </span> <span>4 Feb 2014 at 22:34</span>
     </div>
    </div>
    <div>
     <p>Docker has a default entrypoint which is <code>/bin/sh -c</code> but does not have a default command.</p>
     <p>When you run docker like this: <code>docker run -i -t ubuntu bash</code> the entrypoint is the default <code>/bin/sh -c</code>, the image is <code>ubuntu</code> and the command is <code>bash</code>.</p>
     <p>The command is run via the entrypoint. i.e., the actual thing that gets executed is <code>/bin/sh -c bash</code>. This allowed Docker to implement <code>RUN</code> quickly by relying on the shell's parser.</p>
     <p>Later on, people asked to be able to customize this, so <code>ENTRYPOINT</code> and <code>--entrypoint</code> were introduced.</p>
     <p>Everything after the image name, <code>ubuntu</code> in the example above, is the command and is passed to the entrypoint. When using the <code>CMD</code> instruction, it is exactly as if you were executing<br><code>docker run -i -t ubuntu &lt;cmd&gt;</code><br>
       The parameter of the entrypoint is <code>&lt;cmd&gt;</code>.</p>
     <p>You will also get the same result if you instead type this command <code>docker run -i -t ubuntu</code>: a bash shell will start in the container because in the <a href="https://github.com/dockerfile/ubuntu/blob/master/Dockerfile" rel="noreferrer">ubuntu Dockerfile</a> a default <code>CMD</code> is specified:<br><code>CMD ["bash"]</code>.</p>
     <p>As everything is passed to the entrypoint, you can have a very nice behavior from your images. @Jiri example is good, it shows how to use an image as a "binary". When using <code>["/bin/cat"]</code> as entrypoint and then doing <code>docker run img /etc/passwd</code>, you get it, <code>/etc/passwd</code> is the command and is passed to the entrypoint so the end result execution is simply <code>/bin/cat /etc/passwd</code>.</p>
     <p>Another example would be to have any cli as entrypoint. For instance, if you have a redis image, instead of running <code>docker run redisimg redis -H something -u toto get key</code>, you can simply have <code>ENTRYPOINT ["redis", "-H", "something", "-u", "toto"]</code> and then run like this for the same result: <code>docker run redisimg get key</code>.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>So according to this, if I put this on the top of my Dockerfile: <code>RUN ln -sf /bin/bash /bin/sh &amp;&amp; ln -sf /bin/bash /bin/sh.distrib</code> OR I put this at the end of my Dockerfile: <code>ENTRYPOINT ["/bin/bash", "-c"]</code>, both of them are doing the exact same thing in my Debian containers: changing <code>/bin/sh</code> to <code>/bin/bash</code>?</span> <span> - </span> <span class="display-name">Lanti</span> <span> </span> <span class="date">27 Dec 2015 at 14:33</span></td>
       </tr>
       <tr>
        <td>6</td>
        <td><span>Not at all. ENTRYPOINT sets a metadata that can (but can be overridden) at runtime, so if you don't change anything, after starting your container, the result will be the same, however, RUN will be exectuted at build time and no matter what you do at runtime, it will be here.</span> <span> - </span> <span class="display-name">creack</span> <span> </span> <span class="date">29 Dec 2015 at 15:07</span></td>
       </tr>
       <tr>
        <td>17</td>
        <td><span>By default there's no <code>ENTRYPOINT</code>; whether a shell is used depends on the used form of the <code>CMD</code> command (<a href="https://docs.docker.com/engine/reference/builder/#cmd" rel="nofollow noreferrer">docs.docker.com/engine/reference/builder/#cmd</a>).</span> <span> - </span> <span class="display-name">Blaisorblade</span> <span> </span> <span class="date">13 Jan 2016 at 22:29</span></td>
       </tr>
       <tr>
        <td>72</td>
        <td><span>Thanks for this, the historical context helps a lot as I was struggling to remember the seemingly arcane rules about what is overridden and what is appended etc. A useful point for technical documentation writers everywhere: help the reader build a mental model of the system, don't just list facts and scenarios :-)</span> <span> - </span> <span class="display-name">ashirley</span> <span> </span> <span class="date">9 May 2016 at 13:32</span></td>
       </tr>
       <tr>
        <td>186</td>
        <td><span>This is a fabulous answer. I think Docker documentation should add this under a section called <code>CMD</code> vs <code>ENTRYPOINT</code>.</span> <span> - </span> <span class="display-name">Tarik</span> <span> </span> <span class="date">28 Dec 2016 at 19:37</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>+1 for the ubuntu Dockerfile <code>CMD</code> default. I was wondering why it still works if I don't specify <code>bash</code> as the command.</span> <span> - </span> <span class="display-name">mandarin</span> <span> </span> <span class="date">5 Jan 2018 at 09:27</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>does ENTRYPOINT override CMD please?</span> <span> - </span> <span class="display-name">Webwoman</span> <span> </span> <span class="date">14 Sep 2018 at 00:58</span></td>
       </tr>
       <tr>
        <td>13</td>
        <td><span>@Webman No. They are two different instructions. If they both exist, CMD would be treated as ENTRYPOINTâ€™s parameters.</span> <span> - </span> <span class="display-name">Light.G</span> <span> </span> <span class="date">24 Sep 2018 at 16:14</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>I just stumbled upon something in review. There is a special software to act as <code>ENTRYPOINT</code>: <a href="https://github.com/Yelp/dumb-init" rel="nofollow noreferrer">github.com/Yelp/dumb-init</a></span> <span> - </span> <span class="display-name">dhill</span> <span> </span> <span class="date">5 Mar 2019 at 12:43</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@Tarik I found it in the docs : <a href="https://docs.docker.com/engine/reference/#understand-how-cmd-and-entrypoint-interact" rel="nofollow noreferrer">docs.docker.com/engine/reference/â€¦</a></span> <span> - </span> <span class="display-name">Salathiel Genese</span> <span> </span> <span class="date">21 Apr 2019 at 11:53</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@SalathielGenÃ¨se Apparently you missed the "/builder/" part of the url. Here is the correct link: <a href="https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact" rel="nofollow noreferrer">docs.docker.com/engine/reference/builder/â€¦</a></span> <span> - </span> <span class="display-name">Adrian</span> <span> </span> <span class="date">8 Jul 2019 at 12:46</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>But really for now <code>CMD</code> and <code>ENTRYPOINT</code> looks like legacy things. Both are editable during <code>docker run</code>, both could be added to Dockerfile before build... After all the same could be done with one <code>CMD</code> and that's it. What the hell is this? <a href="https://hsto.org/web/ca2/564/592/ca25645927e9445c9a70475de1be7afc.png" rel="nofollow noreferrer">hsto.org/web/ca2/564/592/ca25645927e9445c9a70475de1be7afc.pnâ€Œâ€‹g</a></span> <span> - </span> <span class="display-name">ipeacocks</span> <span> </span> <span class="date">15 Nov 2020 at 18:59</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>Note: this currently accepted answer does not seem up-to-date: e.g., the first remark that <i>Docker has a default entrypoint which is "/bin/sh -c"</i> is not accurate (at least not anymore), and it does not refer to official docs; so you may want to have a look to <a href="https://stackoverflow.com/a/39408777/9164010">that other answer</a>?</span> <span> - </span> <span class="display-name">ErikMD</span> <span> </span> <span class="date">12 Jan 2021 at 20:30</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>You can check the default ENTRYPOINT and CMD values of an image by using <code>docker image inspect image_name</code> command.</span> <span> - </span> <span class="display-name">Saeed Ahadian</span> <span> </span> <span class="date">18 Jul 2021 at 05:29</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span><a href="https://github.com/moby/moby/blob/33a3680e08d1007e72c3b3f1454f823d8e9948ee/builder/dockerfile/dispatchers.go#L442" rel="nofollow noreferrer">Here's where the docker builder currently decides to prepend the shell to the CMD</a>. This doesn't make use of an entry point</span> <span> - </span> <span class="display-name">Matt</span> <span> </span> <span class="date">10 Nov 2021 at 01:01</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>As much as there's a lovely symmetry in this answer having precisely 2222 upvotes, it's that helpful that I'm going to have ruin that symmetry via a +1.</span> <span> - </span> <span class="display-name">Mitya</span> <span> </span> <span class="date">14 Mar 2022 at 18:30</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>The key part is: <code>Another example would be to have any cli as entrypoint. For instance, if you have a redis image, instead of running docker run redisimg redis -H something -u toto get key, you can simply have ENTRYPOINT ["redis", "-H", "something", "-u", "toto"] and then run like this for the same result: docker run redisimg get key.</code></span> <span> - </span> <span class="display-name">bit</span> <span> </span> <span class="date">8 Aug 2022 at 21:56</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">â†‘</a> </span> <span class="arrow"> <a href="#answer_3">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1128</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Daishi</span>
     </div>
     <div>
      <span> Answered: </span> <span>12 Dec 2015 at 22:17</span>
     </div>
    </div>
    <div>
     <p>The <code>ENTRYPOINT</code> specifies a command that will always be executed when the container starts.</p>
     <p>The <code>CMD</code> specifies arguments that will be fed to the <code>ENTRYPOINT</code>.</p>
     <p>If you want to make an image dedicated to a specific command you will use <code>ENTRYPOINT ["/path/dedicated_command"]</code></p>
     <p>Otherwise, if you want to make an image for general purpose, you can leave <code>ENTRYPOINT</code> unspecified and use <code>CMD ["/path/dedicated_command"]</code> as you will be able to override the setting by supplying arguments to <code>docker run</code>.</p>
     <p>For example, if your Dockerfile is:</p>
     <pre><code>FROM debian:wheezy
ENTRYPOINT ["/bin/ping"]
CMD ["localhost"]
</code></pre>
     <p>Running the image without any argument will ping the localhost:</p>
     <pre><code>$ docker run -it test
PING localhost (127.0.0.1): 48 data bytes
56 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.096 ms
56 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.088 ms
56 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.088 ms
^C--- localhost ping statistics ---
3 packets transmitted, 3 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.088/0.091/0.096/0.000 ms
</code></pre>
     <p>Now, running the image with an argument will ping the argument:</p>
     <pre><code>$ docker run -it test google.com
PING google.com (173.194.45.70): 48 data bytes
56 bytes from 173.194.45.70: icmp_seq=0 ttl=55 time=32.583 ms
56 bytes from 173.194.45.70: icmp_seq=2 ttl=55 time=30.327 ms
56 bytes from 173.194.45.70: icmp_seq=4 ttl=55 time=46.379 ms
^C--- google.com ping statistics ---
5 packets transmitted, 3 packets received, 40% packet loss
round-trip min/avg/max/stddev = 30.327/36.430/46.379/7.095 ms
</code></pre>
     <p>For comparison, if your Dockerfile is:</p>
     <pre><code>FROM debian:wheezy
CMD ["/bin/ping", "localhost"]
</code></pre>
     <p>Running the image without any argument will ping the localhost:</p>
     <pre><code>$ docker run -it test
PING localhost (127.0.0.1): 48 data bytes
56 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.076 ms
56 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.087 ms
56 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.090 ms
^C--- localhost ping statistics ---
3 packets transmitted, 3 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.076/0.084/0.090/0.000 ms
</code></pre>
     <p>But running the image with an argument will run the argument:</p>
     <pre><code>docker run -it test bash
root@e8bb7249b843:/#
</code></pre>
     <p>See this article from Brian DeHamer for even more details: <a href="https://www.ctl.io/developers/blog/post/dockerfile-entrypoint-vs-cmd/">https://www.ctl.io/developers/blog/post/dockerfile-entrypoint-vs-cmd/</a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>457</td>
        <td><span><code>The ENTRYPOINT specifies a command that will always be executed when the container starts. The CMD specifies arguments that will be fed to the ENTRYPOINT.</code> is a good to-the-point summary.</span> <span> - </span> <span class="display-name">Jingguo Yao</span> <span> </span> <span class="date">4 Jan 2016 at 14:26</span></td>
       </tr>
       <tr>
        <td>25</td>
        <td><span>ENTRYPOINT can also be overridden using --entrypoint flag. for e.g docker run -it --entrypoint bash test</span> <span> - </span> <span class="display-name">seenimurugan</span> <span> </span> <span class="date">4 Sep 2018 at 16:15</span></td>
       </tr>
       <tr>
        <td>10</td>
        <td><span>I like your examples, it really helpful!</span> <span> - </span> <span class="display-name">Chau Giang</span> <span> </span> <span class="date">16 Aug 2019 at 04:53</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>@Jingguo Yao : What if CMD contains a command such as - CMD ["nginx","-g","daemon","off"]? Would it be chained?</span> <span> - </span> <span class="display-name">KMC</span> <span> </span> <span class="date">29 Aug 2019 at 16:00</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@KMC CMD is the ENTRYPOINT's default argument, you override it by passing a new arg when running the image.</span> <span> - </span> <span class="display-name">MGP</span> <span> </span> <span class="date">3 Feb 2020 at 15:58</span></td>
       </tr>
       <tr>
        <td>4</td>
        <td><span><code>ENTRYPOINT</code> is often pointed to an entry <b>script</b> (rather than a command) that can do many useful things like: verify requirements before execution (like readyness probes on dependencies); proxy/wrap a command to validate it, or to change the executing user, or to change files' owner (for example when mounting <code>hostPath</code> on Minikube, by default files get overridden with <i>UID/GID</i> <code>1000:1000</code>), etc..</span> <span> - </span> <span class="display-name">Kamafeather</span> <span> </span> <span class="date">9 Nov 2020 at 20:56</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>This is the most intuitive explanation.</span> <span> - </span> <span class="display-name">bit</span> <span> </span> <span class="date">4 Aug 2022 at 10:18</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>This should have been the chosen answer, as it immediately gets right to the point and avoids ambiguous (and poorly worded) language.</span> <span> - </span> <span class="display-name">Aquarelle</span> <span> </span> <span class="date">7 Sep 2022 at 21:31</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_3"><span>Answer 3</span> <span class="arrow"> <a href="#answer_2">â†‘</a> </span> <span class="arrow"> <a href="#answer_4">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>386</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Rafaf Tahsin</span>
     </div>
     <div>
      <span> Answered: </span> <span>9 Sep 2016 at 09:52</span>
     </div>
    </div>
    <div>
     <p>According to <a href="https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact" rel="noreferrer">docker docs</a>,</p>
     <blockquote>
      <p>Both CMD and ENTRYPOINT instructions define what command gets executed when running a container. There are few rules that describe their co-operation.</p>
      <ol>
       <li>Dockerfile should specify at least one of <code>CMD</code> or <code>ENTRYPOINT</code> commands.</li>
       <li><code>ENTRYPOINT</code> should be defined when using the container as an executable.</li>
       <li><code>CMD</code> should be used as a way of defining default arguments for an <code>ENTRYPOINT</code> command or for executing an ad-hoc command in a container.</li>
       <li><code>CMD</code> will be overridden when running the container with alternative arguments.</li>
      </ol>
     </blockquote>
     <p>The tables below shows <strong>what command is executed for different <code>ENTRYPOINT</code> / <code>CMD</code> combinations</strong>:</p>
     <p>-- <strong><code>No ENTRYPOINT</code></strong></p>
     <pre><code>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ No CMD                     â•‘ error, not allowed          â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD ["exec_cmd", "p1_cmd"] â•‘ exec_cmd p1_cmd             â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD ["p1_cmd", "p2_cmd"]   â•‘ p1_cmd p2_cmd               â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD exec_cmd p1_cmd        â•‘ /bin/sh -c exec_cmd p1_cmd  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
     <p>-- <strong><code>ENTRYPOINT exec_entry p1_entry</code></strong></p>
     <pre><code>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ No CMD                     â•‘ /bin/sh -c exec_entry p1_entry   â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD ["exec_cmd", "p1_cmd"] â•‘ /bin/sh -c exec_entry p1_entry   â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD ["p1_cmd", "p2_cmd"]   â•‘ /bin/sh -c exec_entry p1_entry   â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD exec_cmd p1_cmd        â•‘ /bin/sh -c exec_entry p1_entry   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
     <p>-- <strong><code>ENTRYPOINT ["exec_entry", "p1_entry"]</code></strong></p>
     <pre><code>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ No CMD                     â•‘ exec_entry p1_entry                             â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD ["exec_cmd", "p1_cmd"] â•‘ exec_entry p1_entry exec_cmd p1_cmd             â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD ["p1_cmd", "p2_cmd"]   â•‘ exec_entry p1_entry p1_cmd p2_cmd               â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ CMD exec_cmd p1_cmd        â•‘ exec_entry p1_entry /bin/sh -c exec_cmd p1_cmd  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>1</td>
        <td><span>What are px_cmd and exec_entry ? What does mean when they are on the same execution line ? They are passed as argument to each other ? Even when the <code>/bin/sh -c</code> is involved ?</span> <span> - </span> <span class="display-name">Danielo515</span> <span> </span> <span class="date">7 Nov 2017 at 15:02</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>@Danielo515 Both 'px_cmd' and 'exec_entry' are just dummy strings here. You may just notice that <code>/bin/sh -c</code> would be added to CMD as prefix while CMD written in executable syntax(not list syntax).</span> <span> - </span> <span class="display-name">Light.G</span> <span> </span> <span class="date">26 Sep 2018 at 11:25</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>@Rafaf: I didn't get the last point <code>CMD will be overridden when running the container with alternative arguments</code>. Let's say I have <code>CMD</code> at end of my image at my image as <code>CMD "mvn clean test"</code>. How it ll be overridden. Thanks</span> <span> - </span> <span class="display-name">royki</span> <span> </span> <span class="date">27 Jul 2019 at 12:20</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@royki If the user specifies arguments to <i>docker run</i> then they will override the default specified in CMD.</span> <span> - </span> <span class="display-name">ron_g</span> <span> </span> <span class="date">31 Jul 2019 at 10:14</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span><code>ENTRYPOINT exec_entry p1_ent</code> was wrongly explained. The shell form prevents any CMD or run command line arguments from being used - <a href="https://docs.docker.com/engine/reference/builder/#entrypoint" rel="nofollow noreferrer">docs.docker.com/engine/reference/builder/#entrypoint</a></span> <span> - </span> <span class="display-name">Mariusz Miesiak</span> <span> </span> <span class="date">18 Nov 2019 at 10:40</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>@MariuszMiesiak it's now updated. Thanks for your feedback.</span> <span> - </span> <span class="display-name">Rafaf Tahsin</span> <span> </span> <span class="date">22 Nov 2019 at 05:28</span></td>
       </tr>
       <tr>
        <td>5</td>
        <td><span>BTW: this answer definitely should be the accepted answer! (while <a href="https://stackoverflow.com/a/21564990/9164010">the current one</a> claims that "Docker has a default entrypoint which is <code>/bin/sh -c</code>"â€¦)</span> <span> - </span> <span class="display-name">ErikMD</span> <span> </span> <span class="date">12 Jan 2021 at 20:13</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>Struggling to see the need for the two middle rows in each of the tables being duplicated. Is it just that the dummy commands differ or am I missing some <i>actual</i> info that gets introduced by this middle-row duplication?</span> <span> - </span> <span class="display-name">muthuh</span> <span> </span> <span class="date">5 Jun 2022 at 22:34</span></td>
       </tr>
       <tr>
        <td>1</td>
        <td><span>@muthuh, It is used to distinguish when a <b>CMD instruction</b> (both cases in <b>exec form</b>) comes with or without a command inside the <b>parameter list</b>. In the latter case, all parameters in the parameter list (from the CMD instruction in exec form) behave as <b>command options</b> or <b>command arguments</b> since there is no command and the idea is to expect the command to arrive from an <b>ENTRYPOINT instruction</b>, preferably in exec form. In the former case, could (ğŸ¤·) raise an error so better to use the CMD instruction in a <b>shell form</b> to take advantage of <code>/bin/sh -c ...</code>.</span> <span> - </span> <span class="display-name">manus</span> <span> </span> <span class="date">20 Apr 2023 at 16:06</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_4"><span>Answer 4</span> <span class="arrow"> <a href="#answer_3">â†‘</a> </span> <span class="arrow"> <a href="#answer_5">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>211</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Jiri</span>
     </div>
     <div>
      <span> Answered: </span> <span>4 Feb 2014 at 17:12</span>
     </div>
    </div>
    <div>
     <p>Yes, that is a good question. I don't understand it fully yet, but:</p>
     <p>I understand that <code>ENTRYPOINT</code> is the binary that is being executed. You can overide entrypoint by --entrypoint="".</p>
     <pre><code>docker run -t -i --entrypoint="/bin/bash" ubuntu
</code></pre>
     <p>CMD is the default argument to container. Without entrypoint, default argument is command that is executed. With entrypoint, cmd is passed to entrypoint as argument. You can emulate a command with entrypoint.</p>
     <pre><code># no entrypoint
docker run ubuntu /bin/cat /etc/passwd

# with entry point, emulating cat command
docker run --entrypoint="/bin/cat" ubuntu /etc/passwd
</code></pre>
     <p>So, main advantage is that with entrypoint you can pass arguments (cmd) to your container. To accomplish this, you need to use both:</p>
     <pre><code># Dockerfile
FROM ubuntu
ENTRYPOINT ["/bin/cat"]
</code></pre>
     <p>and</p>
     <pre><code>docker build -t=cat .
</code></pre>
     <p>then you can use:</p>
     <pre><code>docker run cat /etc/passwd
#              ^^^^^^^^^^^
#                   CMD
#          ^^^      
#          image (tag)- using the default ENTRYPOINT
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>@Blauhirn In your case, you must add arguments to CMD in list syntax, and make sure the entrypoint you sepcified could parse your arguments in CMD. Usually, I add a '-h' argument to entrypoint. Then I may execute <code>docker run image_name -h</code> to show some help information of this image.</span> <span> - </span> <span class="display-name">Light.G</span> <span> </span> <span class="date">26 Sep 2018 at 11:30</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_5"><span>Answer 5</span> <span class="arrow"> <a href="#answer_4">â†‘</a> </span> <span class="arrow"> <a href="#answer_6">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>94</span>
     </div>
     <div>
      <span>Answerer: </span> <span>upitau</span>
     </div>
     <div>
      <span> Answered: </span> <span>3 Apr 2016 at 09:32</span>
     </div>
    </div>
    <div>
     <p>In a nutshell:</p>
     <ul>
      <li>CMD sets default command and/or parameters to the entrypoint, which can be overwritten from command line when docker container runs (<code>docker run example "override"</code>).</li>
      <li>ENTRYPOINT command is overwritten before the image with its own command line flag (<code>docker run --entrypoint="override" image</code>). Then, all CMD arguments will be added after ENTRYPOINT as its parameters. In many cases, the entrypoint is set as <code>sh -c</code>. You can find this with <code>docker inspect image -f '{{ .Config.Entrypoint }}'</code></li>
      <li>Both can be combined. (<code>docker run --entrypoint="/docker-entrypoint.sh" image arg1 arg2</code>)</li>
     </ul>
     <p>If you need more details or would like to see difference on example, there is a blog post that comprehensively compare CMD and ENTRYPOINT with lots of examples - <a href="https://codewithyury.com/docker-run-vs-cmd-vs-entrypoint/" rel="nofollow noreferrer">https://codewithyury.com/docker-run-vs-cmd-vs-entrypoint/</a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>That's a great link!</span> <span> - </span> <span class="display-name">Ash K</span> <span> </span> <span class="date">27 Dec 2021 at 21:54</span></td>
       </tr>
       <tr>
        <td>2</td>
        <td><span>entrypoint can be overwritten from command line using <code>--entrypoint</code></span> <span> - </span> <span class="display-name">Olivier BoissÃ©</span> <span> </span> <span class="date">2 Oct 2022 at 18:09</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_6"><span>Answer 6</span> <span class="arrow"> <a href="#answer_5">â†‘</a> </span> <span class="arrow"> <a href="#answer_7">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>88</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Tomer Ben David</span>
     </div>
     <div>
      <span> Answered: </span> <span>16 Jan 2017 at 12:34</span>
     </div>
    </div>
    <div>
     <p>Difference between CMD and ENTRYPOINT <strong>by intuition</strong>:</p>
     <ul>
      <li>ENTRYPOINT: command to run when container starts.</li>
      <li>CMD: command to run when container starts or arguments to ENTRYPOINT if specified.</li>
     </ul>
     <p>Yes, it's confusing.</p>
     <p>You can override any of them when running docker run.</p>
     <p>Difference between CMD and ENTRYPOINT <strong>by example</strong>:</p>
     <pre><code>docker run -it --rm yourcontainer /bin/bash            &lt;-- /bin/bash overrides CMD
                                                       &lt;-- /bin/bash does not override ENTRYPOINT
docker run -it --rm --entrypoint ls yourcontainer      &lt;-- overrides ENTRYPOINT with ls
docker run -it --rm --entrypoint ls yourcontainer  -la  &lt;-- overrides ENTRYPOINT with ls and overrides CMD with -la
</code></pre>
     <p>More on difference between <code>CMD</code> and <code>ENTRYPOINT</code>:</p>
     <p>Argument to <code>docker run</code> such as /bin/bash overrides any CMD command we wrote in Dockerfile.</p>
     <p>ENTRYPOINT cannot be overriden at run time with normal commands such as <code>docker run [args]</code>. The <code>args</code> at the end of <code>docker run [args]</code> are provided as arguments to ENTRYPOINT. In this way we can create a <code>container</code> which is like a normal binary such as <code>ls</code>.</p>
     <p>So CMD can act as default parameters to ENTRYPOINT and then we can override the CMD args from [args].</p>
     <p>ENTRYPOINT can be overriden with <code>--entrypoint</code>.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_7"><span>Answer 7</span> <span class="arrow"> <a href="#answer_6">â†‘</a> </span> <span class="arrow"> <a href="#answer_8">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>73</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Maroun</span>
     </div>
     <div>
      <span> Answered: </span> <span>24 Aug 2019 at 19:19</span>
     </div>
    </div>
    <div>
     <p>I'll add my answer as an example<sup>1</sup> that might help you better understand the difference.</p>
     <p>Let's suppose we want to create an image that will <em>always</em> run a sleep command when it starts. We'll create our own image and specify a new command:</p>
     <pre class="lang-sh prettyprint-override"><code>FROM ubuntu
CMD sleep 10
</code></pre>
     <p>Building the image:</p>
     <pre><code>docker build -t custom_sleep .
docker run custom_sleep
# sleeps for 10 seconds and exits
</code></pre>
     <p>What if we want to change the number of seconds? We would have to change the <code>Dockerfile</code> since the value is hardcoded there, or override the command by providing a different one:</p>
     <pre><code>docker run custom_sleep sleep 20
</code></pre>
     <p>While this works, it's not a good solution, as we have a redundant "sleep" command. Why redundant? Because the container's only purpose is to <em>sleep</em>, so having to specify the <code>sleep</code> command explicitly is a bit awkward.</p>
     <p>Now let's try using the <code>ENTRYPOINT</code> instruction:</p>
     <pre class="lang-sh prettyprint-override"><code>FROM ubuntu
ENTRYPOINT sleep
</code></pre>
     <p>This instruction <em>specifies the program that will be run when the container starts</em>.</p>
     <p>Now we can run:</p>
     <pre class="lang-sh prettyprint-override"><code>docker run custom_sleep 20
</code></pre>
     <p>What about a default value? Well, you guessed it right:</p>
     <pre class="lang-sh prettyprint-override"><code>FROM ubuntu
ENTRYPOINT ["sleep"]
CMD ["10"]
</code></pre>
     <p>The <code>ENTRYPOINT</code> is the program that will be run, and the value passed to the container will be appended to it.</p>
     <p>The <code>ENTRYPOINT</code> can be overridden by specifying an <code>--entrypoint</code> flag, followed by the new entry point you want to use.</p>
     <p><sup>Not mine, I once watched a tutorial that provided this example</sup></p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>3</td>
        <td><span>Here is a link to the tutorial: <a href="https://youtu.be/OYbEWUbmk90" rel="nofollow noreferrer">youtu.be/OYbEWUbmk90</a>. It might be usefull to future users.</span> <span> - </span> <span class="display-name">ChiPlusPlus</span> <span> </span> <span class="date">16 Nov 2019 at 10:16</span></td>
       </tr>
       <tr>
        <td>4</td>
        <td><span>Thank you! This explanation with the example was much clearer to me (a beginner to docker) than the accepted answer.</span> <span> - </span> <span class="display-name">typoerrpr</span> <span> </span> <span class="date">1 Nov 2020 at 10:30</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>I think this answer is the best. It's so much more clear to me as noob in Docker than the rest of the answers.</span> <span> - </span> <span class="display-name">Rodyb</span> <span> </span> <span class="date">29 Jul 2021 at 15:31</span></td>
       </tr>
       <tr>
        <td>3</td>
        <td><span>best explanation I was able to find in a web. Thanks a lot!</span> <span> - </span> <span class="display-name">vitali_li</span> <span> </span> <span class="date">26 Aug 2021 at 19:01</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_8"><span>Answer 8</span> <span class="arrow"> <a href="#answer_7">â†‘</a> </span> <span class="arrow"> <a href="#answer_9">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>71</span>
     </div>
     <div>
      <span>Answerer: </span> <span>zangw</span>
     </div>
     <div>
      <span> Answered: </span> <span>1 Dec 2020 at 05:09</span>
     </div>
    </div>
    <div>
     <p>There are some good answers for it. I want to explain it through demo per <a href="https://phoenixnap.com/kb/docker-cmd-vs-entrypoint#:%7E:text=CMD%20is%20an%20instruction%20that,container%20with%20a%20specific%20executable" rel="noreferrer">Doc</a></p>
     <ul>
      <li><strong><code>CMD</code></strong>&nbsp;defines default commands and/or parameters for a container. CMD is an instruction that is best to use if you need a default command which users can easily override. <strong>If a Dockerfile has multiple CMDs, it only applies the instructions from the last one.</strong></li>
      <li><strong><code>ENTRYPOINT</code></strong>&nbsp;is preferred when you want to define a container with a specific executable.</li>
     </ul>
     <p>You cannot&nbsp;override an <code>ENTRYPOINT</code>&nbsp;when starting a container unless you add the&nbsp;<code>--entrypoint</code>&nbsp;flag.</p>
     <ol>
      <li>CMD</li>
     </ol>
     <p>Docker file</p>
     <pre><code>  FROM centos:8.1.1911

  CMD ["echo", "Hello Docker"]
</code></pre>
     <p>Run result</p>
     <pre><code>$ sudo docker run &lt;image-id&gt;
Hello Docker
$ sudo docker run &lt;image-id&gt; hostname   # hostname is exec to override CMD
244be5006f32
</code></pre>
     <ol start="2">
      <li>ENTRYPOINT</li>
     </ol>
     <p>Docker file</p>
     <pre><code>  FROM centos:8.1.1911

  ENTRYPOINT ["echo", "Hello Docker"]
</code></pre>
     <p>Run result</p>
     <pre><code>$ sudo docker run &lt;image-id&gt;
Hello Docker
$ sudo docker run &lt;image-id&gt; hostname   # hostname as parameter to exec
Hello Docker hostname
</code></pre>
     <ol start="3">
      <li>There are many situations in which combining CMD and ENTRYPOINT would be the best solution for your Docker container. In such cases,&nbsp;<strong>the&nbsp;executable is defined with ENTRYPOINT, while&nbsp;CMD specifies the default parameter.</strong></li>
     </ol>
     <p>Docker file</p>
     <pre><code>  FROM centos:8.1.1911

  ENTRYPOINT ["echo", "Hello"]
  CMD ["Docker"]
</code></pre>
     <p>Run result</p>
     <pre><code>$ sudo docker run &lt;image-id&gt;
Hello Docker
$ sudo docker run &lt;image-id&gt; Ben
Hello Ben
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_9"><span>Answer 9</span> <span class="arrow"> <a href="#answer_8">â†‘</a> </span> <span class="arrow"> <a href="#answer_10">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>31</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Devs love ZenUML</span>
     </div>
     <div>
      <span> Answered: </span> <span>31 May 2017 at 07:12</span>
     </div>
    </div>
    <div>
     <p>The accepted answer is fabulous in explaining the history. I find this table explain it very well from <a href="https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact" rel="noreferrer">official doc on 'how CMD and ENTRYPOINT interact'</a>: <a href="https://i.stack.imgur.com/gVtK9.jpg" rel="noreferrer"><img src="/question/stackoverflow/21553353/gVtK9.jpg" alt="enter image description here"></a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_10"><span>Answer 10</span> <span class="arrow"> <a href="#answer_9">â†‘</a> </span> <span class="arrow"> <a href="#answer_11">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>21</span>
     </div>
     <div>
      <span>Answerer: </span> <span>rkachach</span>
     </div>
     <div>
      <span> Answered: </span> <span>12 Nov 2020 at 12:27</span>
     </div>
    </div>
    <div>
     <p>I run across this and at the beginning I found it really confusing to be honest and I think this confusion comes from using the word "CMD" because in fact what goes there acts <strong>as argument</strong>. So after digging a little bit I understood how it works. Basically:</p>
     <p><strong>ENTRYPOINT</strong> --&gt; what you specify here would be the command to be executed when you container starts. If you omit this definition docker will use <code>/bin/sh -c bash</code> to run your container.</p>
     <p><strong>CMD</strong> --&gt; these are the <strong>arguments appended to the ENTRYPOINT</strong> unless the user specifies some custom argument, i.e: <code>docker run ubuntu &lt;custom_cmd&gt;</code> in this case instead of appending what's specified on the image in the CMD section, docker will run <code>ENTRYPOINT &lt;custom_cmd&gt;</code>. In case ENTRYPOINT has not been specified, what goes here will be passed to <code>/bin/sh -c</code> acting in fact as the command to be executed when starting the container.</p>
     <p>As everything it's better to explain what's going on by examples. So let's say I create a simple docker image by using the following specification <strong>Dockerfile</strong>:</p>
     <pre><code>From ubuntu
ENTRYPOINT ["sleep"]
</code></pre>
     <p>Then I build it by running the following:</p>
     <pre><code>docker build . -t testimg
</code></pre>
     <p>This will create a container that everytime you run it sleeps. So If I run it as following:</p>
     <pre><code>docker run testimg
</code></pre>
     <p>I'll get the following:</p>
     <pre><code>sleep: missing operand
Try 'sleep --help' for more information.
</code></pre>
     <p>This happens because the entry point is the "sleep" command which needs an argument. So to fix this I'll just provide the amount to sleep:</p>
     <pre><code>docker run testimg 5
</code></pre>
     <p>This will run correctly and as consequence the container will run, sleeps 5 seconds and exits. As we can see in this example docker just appended what goes after the image name to the entry point binary <code>docker run testimg &lt;my_cmd&gt;</code>. What happens if we want to pass a default value (default argument) to the entry point? in this case we just need to specify it in the <strong>CMD</strong> section, for example:</p>
     <pre><code>From ubuntu
ENTRYPOINT ["sleep"]
CMD ["10"]
</code></pre>
     <p>In this case if the user doesn't pass any argument the container will use the default value (10) and pass it to entry point sleep.</p>
     <p>Now let's use just CMD and omit ENTRYPOINT definition:</p>
     <pre><code>FROM ubuntu
CMD ["sleep", "5"]
</code></pre>
     <p>If we rebuild and run this image it will basically sleeps for 5 seconds.</p>
     <p>So in summary, you can use <strong>ENTRYPOINT</strong> in order to make your container acts as an executable. You can use <strong>CMD</strong> to provide default arguments to your entry point or to run a custom command when starting your container that can be overridden from outside by user.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_11"><span>Answer 11</span> <span class="arrow"> <a href="#answer_10">â†‘</a> </span> <span class="arrow"> <a href="#answer_12">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>11</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Maheshvirus</span>
     </div>
     <div>
      <span> Answered: </span> <span>18 Jul 2022 at 10:02</span>
     </div>
    </div>
    <div>
     <p>I would like to differentiate the differences between <strong>CMD, RUN &amp; ENTRYPOINT</strong> in an effortless manner.</p>
     <p>Letâ€™s take an npm init example for node.</p>
     <p><strong>CMD :</strong></p>
     <p>Letâ€™s assume below is the initial command we added in dockerfile</p>
     <pre><code>CMD [ "npm", "init" ]
</code></pre>
     <p>Now, If I run <code>docker run -t node npm install</code></p>
     <p>It will override the npm init command from the dockerfile.</p>
     <pre><code>CMD [ "npm", "init" ] This will become  CMD [ "npm", "install" ]
</code></pre>
     <p>It will execute the <code>npm install</code> command rather than <code>npm init</code> as it overrides with npm install.</p>
     <p>Now, Letâ€™s talk about</p>
     <p><strong>ENTRYPOINT :</strong></p>
     <p>Letâ€™s assume the same command is added in docker file but with ENTRYPOINT</p>
     <pre><code>ENTRYPOINT [ "npm", "init" ]
</code></pre>
     <p>Now, If I run <code>docker run -t node install</code></p>
     <p>It will append the npm init command with npm install in the dockerfile.</p>
     <pre><code>ENTRYPOINT [ "npm", "init" ] This will become  ENTRYPOINT [ "npm", "init", "install" ]
</code></pre>
     <p>It will execute the both npm init &amp; npm install commands.</p>
     <p><strong>To Sum-up :</strong></p>
     <p><strong>RUN:</strong> This will execute while the image is generating. Used to install any dependencies like node_modules. Ex. <code>RUN npm install</code></p>
     <p><strong>CMD :</strong> To use when you want to override the complete command</p>
     <p><strong>ENTRYPOINT:</strong> To use when you want to append some additional command.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_12"><span>Answer 12</span> <span class="arrow"> <a href="#answer_11">â†‘</a> </span> <span class="arrow"> <a href="#answer_13">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>9</span>
     </div>
     <div>
      <span>Answerer: </span> <span>fgul</span>
     </div>
     <div>
      <span> Answered: </span> <span>23 Feb 2020 at 06:48</span>
     </div>
    </div>
    <div>
     <p>I have read all answers and I want to summarize for better understanding at first glance like following:</p>
     <p>Firstly, the whole command that gets executed in the container includes two parts: <strong>the command</strong> and <strong>the arguments</strong></p>
     <ul>
      <li>
       <blockquote>
        <p><strong>ENTRYPOINT</strong> defines the executable invoked when the container is started (for command)</p>
       </blockquote></li>
      <li>
       <blockquote>
        <p><strong>CMD</strong> specifies the arguments that get passed to the ENTRYPOINT (for arguments)</p>
       </blockquote></li>
     </ul>
     <p>In the <a href="https://rads.stackoverflow.com/amzn/click/com/1617293725" rel="noreferrer">Kubernetes In Action</a> book points an important note about it. (chapter 7)</p>
     <blockquote>
      <p>Although you can use the <strong>CMD</strong> instruction to specify the command you want to execute when the image is run, the correct way is to do it through the <strong>ENTRYPOINT</strong> instruction and to <em>only specify the <strong>CMD</strong> if you want to define the default arguments.</em></p>
     </blockquote>
     <p>You can also read <a href="https://goinbigdata.com/docker-run-vs-cmd-vs-entrypoint/" rel="noreferrer">this</a> article for great explanation in a simple way</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_13"><span>Answer 13</span> <span class="arrow"> <a href="#answer_12">â†‘</a> </span> <span class="arrow"> <a href="#answer_14">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>8</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Tahir Rauf</span>
     </div>
     <div>
      <span> Answered: </span> <span>16 Jan 2016 at 07:32</span>
     </div>
    </div>
    <div>
     <p>Comments on EntryPoint function in <a href="https://github.com/docker/docker/blob/670c8696a29825b23208496bd4d8e88b5faa7773/builder/dispatchers.go#L77" rel="noreferrer">code</a></p>
     <blockquote>
      <p>// ENTRYPOINT /usr/sbin/nginx.</p>
      <p>// Set the entrypoint (which defaults to sh -c) to /usr/sbin/nginx.</p>
      <p>// Will accept the CMD as the arguments to /usr/sbin/nginx.</p>
     </blockquote>
     <p>Another reference from documents</p>
     <blockquote>
      <p>You can use the exec form of ENTRYPOINT to set <strong>fairly stable default commands and arguments</strong> and then use CMD to set additional defaults that are more likely to be changed.</p>
     </blockquote>
     <p><strong>Example:</strong></p>
     <pre><code>FROM ubuntu:14.04.3
ENTRYPOINT ["/bin/ping"]
CMD ["localhost", "-c", "2"]
</code></pre>
     <p><em>Build</em>: sudo docker build -t ent_cmd .</p>
     <pre><code>CMD arguments are easy to override.

NO argument (sudo docker -it ent_cmd)                :  ping localhost 
argument    (sudo docker run -it ent_cmd google.com) :  ping google.com
</code></pre>
     <p>.</p>
     <pre><code>To override EntryPoint argument, you need to supply entrypoint
sudo docker run -it --entrypoint="/bin/bash" ent_cmdd
</code></pre>
     <p>p.s: In presence of EntryPoint, CMD will hold arguments to fed to EntryPoint. In absense of EntryPoint, CMD will be the command which will be run.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_14"><span>Answer 14</span> <span class="arrow"> <a href="#answer_13">â†‘</a> </span> <span class="arrow"> <a href="#answer_15">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>5</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Jingguo Yao</span>
     </div>
     <div>
      <span> Answered: </span> <span>5 Jan 2016 at 06:42</span>
     </div>
    </div>
    <div>
     <p>CMD:</p>
     <ul>
      <li><code>CMD ["executable","param1","param2"]</code>: <code>["executable","param1","param2"]</code> is the first process.</li>
      <li><code>CMD command param1 param2</code>: <code>/bin/sh -c CMD command param1 param2</code> is the first process. <code>CMD command param1 param2</code> is forked from the first process.</li>
      <li><code>CMD ["param1","param2"]</code>: This form is used to provide default arguments for <code>ENTRYPOINT</code>.</li>
     </ul>
     <p>ENTRYPOINT (The following list does not consider the case where CMD and ENTRYPOINT are used together):</p>
     <ul>
      <li><code>ENTRYPOINT ["executable", "param1", "param2"]</code>: <code>["executable", "param1", "param2"]</code> is the first process.</li>
      <li><code>ENTRYPOINT command param1 param2</code>: <code>/bin/sh -c command param1 param2</code> is the first process. <code>command param1 param2</code> is forked from the first process.</li>
     </ul>
     <p>As <a href="https://stackoverflow.com/users/884978/creack">creack</a> said, CMD was developed first. Then ENTRYPOINT was developed for more customization. Since they are not designed together, there are some functionality overlaps between CMD and ENTRYPOINT, which often confuse people.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_15"><span>Answer 15</span> <span class="arrow"> <a href="#answer_14">â†‘</a> </span> <span class="arrow"> <a href="#answer_16">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Garo</span>
     </div>
     <div>
      <span> Answered: </span> <span>20 Mar 2019 at 23:56</span>
     </div>
    </div>
    <div>
     <p>Most people explain it perfectly here, so I won't repeat all the answers. But to get a good feeling I would suggest testing it yourself by looking at the processes in the container.</p>
     <p>Create a tiny Dockerfile of the form:</p>
     <pre><code>FROM ubuntu:latest
CMD /bin/bash
</code></pre>
     <p>Build it, run it in with <code>docker run -it theimage</code> and run <code>ps -eo ppid,pid,args</code> in the container. Compare this output to the output you receive from ps when using:</p>
     <ul>
      <li><code>docker run -it theimage bash</code></li>
      <li>Rebuilding the image but with <code>ENTRYPOINT /bin/bash</code> and running it in both ways</li>
      <li>Using <code>CMD ["/bin/bash"]</code></li>
      <li>...</li>
     </ul>
     <p>This way you will easily see the differences between all possible methods for yourself.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_16"><span>Answer 16</span> <span class="arrow"> <a href="#answer_15">â†‘</a> </span> <span class="arrow"> <a href="#answer_17">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>MIYUKI NARAHARA</span>
     </div>
     <div>
      <span> Answered: </span> <span>5 Feb 2020 at 09:22</span>
     </div>
    </div>
    <div>
     <p>The official documentation of Dockerfile best practices does a great job explaining the differences. <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" rel="nofollow noreferrer">Dockerfile best practices</a></p>
     <p><strong>CMD:</strong></p>
     <p>The CMD instruction should be used to run the software contained by your image, along with any arguments. CMD should almost always be used in the form of <code>CMD ["executable", "param1", "param2"â€¦]</code>. Thus, if the image is for a service, such as Apache and Rails, you would run something like <code>CMD ["apache2","-DFOREGROUND"]</code>. Indeed, this form of the instruction is recommended for any service-based image.</p>
     <p><strong>ENTRYPOINT:</strong></p>
     <p>The best use for ENTRYPOINT is to set the imageâ€™s main command, allowing that image to be run as though it was that command (and then use CMD as the default flags).</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_17"><span>Answer 17</span> <span class="arrow"> <a href="#answer_16">â†‘</a> </span> <span class="arrow"> <a href="#answer_18">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Thuan Tran</span>
     </div>
     <div>
      <span> Answered: </span> <span>23 Sep 2020 at 01:55</span>
     </div>
    </div>
    <div>
     <p>â€¢ A Dockerfile should specify at least one CMD or ENTRYPOINT instruction</p>
     <p>â€¢ Only the last CMD and ENTRYPOINT in a Dockerfile will be used</p>
     <p>â€¢ ENTRYPOINT should be defined when using the container as an executable</p>
     <p>â€¢ You should use the CMD instruction as a way of defining default arguments for the command defined as ENTRYPOINT or for executing an ad-hoc command in a container</p>
     <p>â€¢ CMD will be overridden when running the container with alternative arguments</p>
     <p>â€¢ ENTRYPOINT sets the concrete default application that is used every time a container is created using the image</p>
     <p>â€¢ If you couple ENTRYPOINT with CMD, you can remove an executable from CMD and just leave its arguments which will be passed to ENTRYPOINT</p>
     <p>â€¢ The best use for ENTRYPOINT is to set the image's main command, allowing that image to be run as though it was that command (and then use CMD as the default flags)</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_18"><span>Answer 18</span> <span class="arrow"> <a href="#answer_17">â†‘</a> </span> <span class="arrow"> <a href="#answer_19">â†“</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>Anshul Singhal</span>
     </div>
     <div>
      <span> Answered: </span> <span>9 Apr 2019 at 09:42</span>
     </div>
    </div>
    <div>
     <p><code>CMD</code> command mentioned inside <code>Dockerfile</code> file can be overridden via <code>docker run</code> command while <code>ENTRYPOINT</code> can not be.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>10</td>
        <td><span><code>docker run --help</code> command says otherwise: <code>--entrypoint string Overwrite the default ENTRYPOINT of the image</code></span> <span> - </span> <span class="display-name">iomv</span> <span> </span> <span class="date">1 Aug 2019 at 16:06</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_19"><span>Answer 19</span> <span class="arrow"> <a href="#answer_18">â†‘</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>-1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>VB11</span>
     </div>
     <div>
      <span> Answered: </span> <span>27 Aug 2022 at 11:52</span>
     </div>
    </div>
    <div>
     <p>From rebuilding an OS image from scratch ( Just writing <code>FROM scratch</code> and copying the minimum file system with COPY in dockerfile) I came to know that,</p>
     <p>If you don't specify ENTRYPOINT and CMD in your dockerfile, docker will use</p>
     <pre><code>/bin/sh -c
</code></pre>
     <p>as the default ENTRYPOINT and will take CMD if you define CMD in docker file or pass command-line argument (which will override defined CMD) while running a container.</p>
     <p>Suppose you pass an argument (or define CMD in dockerfile) <code>ls</code> then it will be fed to ENTRYPOINT. That is,</p>
     <pre><code>/bin/sh -c ls
</code></pre>
     <p><code>/bin/sh -c</code> is going to run whatever argument passed to it. You will get the output for "ls" command and the container will then exit.</p>
     <hr>
     <p>The ubuntu image doesn't define ENTRYPOINT explicitly, so docker will user <code>/bin/sh -c</code> but contains CMD defined i.e <code>bash</code>.That means when you run the following command to run a container,</p>
     <pre><code>docker container run -it ubuntu
</code></pre>
     <p>Docker actually uses ENTRYPOINT as <code> /bin/sh -c</code> and then feeds it with <code>bash</code> and ultimately what runs is</p>
     <pre><code>/bin/sh -c bash
</code></pre>
     <p>which starts the interactive bash terminal (only if <code>-i</code> flag is specified as above and optionally -t to get native terminal like experience)</p>
     <p>when you provide arguments via command-line the <code>bash</code> gets replaced with whatever you pass and output is according to that, i.e</p>
     <pre><code>/bin/sh -c passed_argument
</code></pre>
     <hr>
     <p>You can define custom ENTRYPOINT that will override the default one but then you need to use CMD accordingly.</p>
     <p>In case of <code>RUN</code> command in dockerfile, it doesn't consider the defined <code>ENTRYPOINT</code> and <code>CMD</code> but runs the commands specified as they are provided to the interactive bash terminal in the intermediate container</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>