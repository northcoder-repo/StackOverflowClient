<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>how to make datatable rows draggable and maintain the sequence of the column number</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>how to make datatable rows draggable and maintain the sequence of the column number</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>2</span>
    </div>
    <div>
     <span>Asker: </span> <span>Strywyr</span>
    </div>
    <div>
     <span>Asked: </span> <span>23 Jan 2023 at 01:20</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/75205030/how-to-make-datatable-rows-draggable-and-maintain-the-sequence-of-the-column-num">source</a>
    </div>
   </div>
   <div>
    <p>How to make datatable rows draggable and maintain the sequence of the column number? I am trying to create a questionnaire which theme is Arrangement Choices, i am appending the choices by using addRow. I want to add drag events onto rows and maintain the sequence.. but i don't know how to do it..</p>
    <p>Here's my code:</p>
    <p></p>
    <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
     <div class="snippet-code">
      <pre class="snippet-code-js lang-js prettyprint-override"><code>$(document).ready(function () {

  var table = $('#ADDchoicesARTableListSequence').DataTable();

  const btnAdd = document.querySelector("#addSequenceBtn");
  const inputChoices = document.querySelector("#sequenceChoices");
  var count = 1;
  btnAdd.addEventListener("click", function () {
    table.row.add([count,inputChoices.value.trim(),'DELETE']).draw();
    count += 1;
    inputChoices.value = '';
  })

});</code></pre>
      <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.css" /&gt;
  &lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.css" /&gt;

  &lt;script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.js"&gt;&lt;/script&gt;



&lt;div class="__Sequence"&gt;
  &lt;label&gt;Arrangement Choices&lt;/label&gt;
  &lt;input type="text" class="__choicesAddARSeq" id="sequenceChoices"/&gt;
  &lt;button id="addSequenceBtn"&gt;ADD&lt;/button&gt;
&lt;/div&gt;

&lt;table class="table text-center table-bordered table-striped dataTable dtr-inline" id="ADDchoicesARTableListSequence"&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;No.&lt;/th&gt;
      &lt;th&gt;Choices&lt;/th&gt;
      &lt;th&gt;Action&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
&lt;/table&gt;

&lt;button id="addSequenceBtn"&gt;Create Question&lt;/button&gt;</code></pre>
     </div>
    </div>
    <p></p>
   </div>
   <div class="tags">
    <span class="tag">javascript</span><span class="tag">jquery</span><span class="tag">html-table</span><span class="tag">datatables</span><span class="tag">sequence</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td></td>
       <td><span>I don't see an attempt in this snippet at dragging anything. <a href="https://stackoverflow.com/questions/51914079/mouse-drag-event-responsiveness-with-and-without-requestanimationframe">Here</a> is an SO question with a drag snippet. It does not have any drop code just an example of how to drag. You likely will care only about the vertical(Y) mouse movements since moving rows up an down in a table. You will need to determine when to switch two rows based on their relative positions. There is some geometry to track and update as more rows are added. This may help you get started.</span> <span> - </span> <span class="display-name">Gary</span> <span> </span> <span class="date">23 Jan 2023 at 06:51</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>2</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>23 Jan 2023 at 12:34</span>
     </div>
    </div>
    <div>
     <p>DataTables has various <a href="https://datatables.net/extensions/index" rel="nofollow noreferrer">extensions</a> you can use for advanced features - and one of those is the <a href="https://datatables.net/extensions/rowreorder/" rel="nofollow noreferrer">Row Reorder</a> extension - so we can use that.</p>
     <p>I am not sure what you mean by "<em>maintain the sequence of the column number</em>", so here are two slightly different approaches. Maybe one of them is what you want.</p>
     <hr>
     <p>Approach 1 - the first column always shows <code>1</code> followed by <code>2</code> and so on, regardless of how you re-arrange your rows:</p>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code>$(document).ready(function() {

  var table = $('#ADDchoicesARTableListSequence').DataTable({
    rowReorder: {
      selector: 'tr'
    }
  });

  const tbody = document.getElementById("choicesListTbodyADD");
  const btnAdd = document.querySelector("button");
  const inputChoices = document.querySelector("input");
  var count = 1;
  btnAdd.addEventListener("click", function() {
    table.row.add([count, inputChoices.value.trim(), 'DELETE']).draw();
    count += 1;
    inputChoices.value = '';
  })

});</code></pre>
       <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Demo&lt;/title&gt;

  &lt;link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.css" /&gt;
  &lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.css" /&gt;
  &lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/rowreorder/1.3.1/css/rowReorder.dataTables.css" /&gt;

  &lt;script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/rowreorder/1.3.1/js/dataTables.rowReorder.js"&gt;&lt;/script&gt;

&lt;/head&gt;

&lt;body&gt;

  &lt;div style="margin: 20px;"&gt;
    &lt;input type="text" id="choices" /&gt;
    &lt;button id="appendChoices"&gt;Add Choices&lt;/button&gt;
    &lt;br&gt;&lt;br&gt;

    &lt;table class="table text-center table-bordered table-striped dataTable dtr-inline" id="ADDchoicesARTableListSequence"&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;No.&lt;/th&gt;
          &lt;th&gt;Choices&lt;/th&gt;
          &lt;th&gt;Action&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
    &lt;/table&gt;

  &lt;/div&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre>
      </div>
     </div>
     <p></p>
     <p>In the above demo, I added two new libraries for the JavaScript and CSS needed for dragging.</p>
     <p>I also added <code>rowReorder: { selector: 'tr' }</code> to the DataTable which tells the plug-in that we can drag the row by selecting any part of the row (the default behavior is to drag only by selecting the first column).</p>
     <hr>
     <p>Approach 2 - all the data in the row moves together.</p>
     <p>In this approach, the values in the first column move along with the row they belong to:</p>
     <p></p>
     <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
      <div class="snippet-code">
       <pre class="snippet-code-js lang-js prettyprint-override"><code>$(document).ready(function() {

  var table = $('#ADDchoicesARTableListSequence').DataTable({
    rowReorder: {
      selector: 'tr'
    },
    columnDefs: [{
      targets: 0,
      visible: false
    }]
  });

  const tbody = document.getElementById("choicesListTbodyADD");
  const btnAdd = document.querySelector("button");
  const inputChoices = document.querySelector("input");
  var count = 1;
  btnAdd.addEventListener("click", function() {
    table.row.add([count, count, inputChoices.value.trim(), 'DELETE']).draw();
    count += 1;
    inputChoices.value = '';
  })

});</code></pre>
       <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;!doctype html&gt;
&lt;html&gt;

&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Demo&lt;/title&gt;

  &lt;link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.css" /&gt;
  &lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.css" /&gt;
  &lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/rowreorder/1.3.1/css/rowReorder.dataTables.css" /&gt;

  &lt;script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.js"&gt;&lt;/script&gt;
  &lt;script type="text/javascript" src="https://cdn.datatables.net/rowreorder/1.3.1/js/dataTables.rowReorder.js"&gt;&lt;/script&gt;

&lt;/head&gt;

&lt;body&gt;

  &lt;div style="margin: 20px;"&gt;
    &lt;input type="text" id="choices" /&gt;
    &lt;button id="appendChoices"&gt;Add Choices&lt;/button&gt;
    &lt;br&gt;&lt;br&gt;

    &lt;table class="table text-center table-bordered table-striped dataTable dtr-inline" id="ADDchoicesARTableListSequence"&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Idx.&lt;/th&gt;
          &lt;th&gt;No.&lt;/th&gt;
          &lt;th&gt;Choices&lt;/th&gt;
          &lt;th&gt;Action&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
    &lt;/table&gt;

  &lt;/div&gt;


&lt;/body&gt;

&lt;/html&gt;</code></pre>
      </div>
     </div>
     <p></p>
     <p>In this approach, I added an extra column to your table and I hid the first column.</p>
     <hr>
     <p>You can try each approach and see the differences for yourself.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>The first is solution is what i'm looking for.. and i'm using it now.. though i got question, is it really no other way without using the plug ins? I'm happy using the plug in just wanted to ask. Thanks</span> <span> - </span> <span class="display-name">Strywyr</span> <span> </span> <span class="date">25 Jan 2023 at 00:20</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I'm sure there are solutions which do not require this specific DataTables plugin - but they probably require that you also do NOT use DataTables for the HTML table - for example, there is <a href="https://jqueryui.com/" rel="nofollow noreferrer">jQuery UI</a> - and solutions such as <a href="https://stackoverflow.com/q/1595836/12567365">Drag and Drop Table Rows Using Javascript</a>. That would probably change almost all of your code. But it is an option.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">25 Jan 2023 at 00:27</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>