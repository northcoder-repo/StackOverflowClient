<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>I am trying to show the data from my ajax response to my jquery data table</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>I am trying to show the data from my ajax response to my jquery data table</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>0</span>
    </div>
    <div>
     <span>Asker: </span> <span>Smitty's</span>
    </div>
    <div>
     <span>Asked: </span> <span>28 May 2022 at 16:16</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/72417288/i-am-trying-to-show-the-data-from-my-ajax-response-to-my-jquery-data-table">source</a>
    </div>
   </div>
   <div>
    <p>What I am trying to do it that I am trying to show my ajax response to my jquery data table my table looks like this</p>
    <pre><code>&lt;div style="margin: 20px;"&gt;

                                            &lt;table id="example" class="display" style="width:100%"&gt;
                                                &lt;thead&gt;
                                                    &lt;tr&gt;
                                                        &lt;th&gt;Spouse&lt;/th&gt;
                                                        &lt;th&gt;CNIC&lt;/th&gt;
                                                        &lt;th&gt;Father&lt;/th&gt;
                                                        &lt;th&gt;Mother.&lt;/th&gt;
                                                        &lt;th&gt;Employee ID&lt;/th&gt;
                                                        &lt;th&gt;Children&lt;/th&gt;
                                                        &lt;th&gt;Age&lt;/th&gt;
                                                    &lt;/tr&gt;
                                                &lt;/thead&gt;
                                            &lt;/table&gt;
                                                &lt;/div&gt;
                                           
</code></pre>
    <p>and below is my ajax response which I am trying to show in my table but its not showing any data yet I am getting data from this link in my postman. my ajax call is written below</p>
    <pre><code>    &lt;script type="text/javascript"&gt;
                
    $(document).ready(function(){

    var table = $('#example').DataTable( {
      ajax: {
        url : "https://2057-185-202-239-227.ngrok.io/employee/employeesByCompany/"+sessionStorage.getItem('Companies_id'),
        dataSrc: "doc",
      },
      columns: [
        { data: 'spouse' },
        { data: 'CNIC' },
        { data: 'fatherName' },
        { data: 'motherName' },
        { data: 'employeeID' },
        { data: 'age' },
        { data: 'children[]' }
      ],
    });
  });

    &lt;/script&gt;
</code></pre>
    <p>here is my Json Response which I am getting and I want to add pagination on</p>
    <pre><code>{
"message": "Success",
"doc": [
    {
        "createdDate": "2022-04-03T17:19:02.666Z",
        "enabled": true,
        "_id": "6249d7156a4ef003db97e4bd",
        "fName": "James Bartley",
        "age": 30,
        "CNIC": "3974224221510",
        "spouse": "Hilary",
        "fatherName": "James",
        "motherName": "Brunhilde",
        "employeeImage": "http://dummyimage.com/267x237.png/ff4444/ffffff",
        "employeeID": "IN319122",
        "company": "62498fc7acd7fb091185bb0e",
        "children": [],
        "__v": 0
    },
    {
        "createdDate": "2022-04-03T17:19:02.666Z",
        "enabled": true,
        "_id": "6249d7156a4ef003db97e4c2",
        "fName": "Clerc Billings",
        "age": 52,
        "CNIC": "4618981270977",
        "spouse": "Debra",
        "fatherName": "Clerc",
        "motherName": "Gwendolyn",
        "employeeImage": "http://dummyimage.com/258x287.png/cc0000/ffffff",
        "employeeID": "IN313190",
        "company": "62498fc7acd7fb091185bb0e",
        "children": [],
        "__v": 0
    },
</code></pre>
    <p><a href="https://i.stack.imgur.com/GTALe.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/GTALe.png" alt="enter image description here"></a></p>
   </div>
   <div class="tags">
    <span class="tag">javascript</span><span class="tag">html</span><span class="tag">jquery</span><span class="tag">ajax</span><span class="tag">datatable</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td></td>
       <td><span>Don't use <code>success</code> in a DataTables <code>ajax</code> option - see the <a href="https://datatables.net/reference/option/ajax.dataSrc" rel="nofollow noreferrer">documentation</a>: "<i>the success option of ajax should not be altered - DataTables uses it internally to execute the table draw when the data load is complete.</i>"</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 16:44</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>Also, if your JSON is suitably structured, there should be no need to build strings of HTML data. DataTables can consume JSON directly. Look at the <a href="https://datatables.net/examples/ajax/index.html" rel="nofollow noreferrer">various Ajax data source examples</a>. In fact, building HTML strings won't work anyway, as DataTables knows nothing about this data.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 16:48</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>Final note: The <code>columns</code> option refers to <code>doc</code> - but that is not a valid DataTables column option. Again, look at the official DataTables examples and also the many questions and answers on this site. Start with something as simple as possible which works, and build from there.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 16:50</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>can you edit the code? @andrewJames</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 18:28</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>Please edit your question to show the text of your JSON response. And are you not able to use the official examples to help you? They are simple and are a great place to start.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 18:50</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>@andrewJames I have placed my Json response which I am getting</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 19:25</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>@andrewJames I have used office example but its not working can you help me out PLEASE..!</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 19:27</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>Saying "it is not working" does not really help. Your JSON does help, however - so thank you for that. Take a look at the approach in my answer. If something is not clear then let me know.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 19:46</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span> <span class="arrow"> <a href="#answer_2">↓</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>user16624413</span>
     </div>
     <div>
      <span> Answered: </span> <span>28 May 2022 at 19:37</span>
     </div>
    </div>
    <div>
     <p>If you mean this:</p>
     <pre><code>doc.map(function(item, id) {
  return(
    &lt;tr key={id}&gt;
      &lt;td&gt;{item.fatherName}&lt;/td&gt;
      &lt;td&gt;{item.motherName}&lt;/td&gt;
      &lt;td&gt;{item.spouse}&lt;/td&gt;
    &lt;/tr&gt;
  )
}.bind(this))
</code></pre>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td>1</td>
        <td><span>where to put this ?</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 19:41</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>In ajax -&gt; success have response try console.log and watch for it and after foexample try response.fatherName , after u understand this will show u next step Or you can try to put .map() in &lt;script&gt;</span> <span> - </span> <span class="display-name">user16624413</span> <span> </span> <span class="date">28 May 2022 at 19:43</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Your answer could be improved by adding more information on what the code does and how it helps the OP.</span> <span> - </span> <span class="display-name">Tyler2P</span> <span> </span> <span class="date">29 May 2022 at 10:18</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <div>
    <h2 id="answer_2"><span>Answer 2</span> <span class="arrow"> <a href="#answer_1">↑</a> </span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>0</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>28 May 2022 at 19:43</span>
     </div>
    </div>
    <div>
     <p>Here is an approach which uses your JSON.</p>
     <p>The table:</p>
     <pre class="lang-html prettyprint-override"><code>&lt;div style="margin: 20px;"&gt;

    &lt;table id="example" class="display" style="width:100%"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Spouse&lt;/th&gt;
                &lt;th&gt;CNIC&lt;/th&gt;
                &lt;th&gt;Father&lt;/th&gt;
                &lt;th&gt;Mother.&lt;/th&gt;
                &lt;th&gt;Employee ID&lt;/th&gt;
                &lt;th&gt;Age&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
    &lt;/table&gt;

&lt;/div&gt;
</code></pre>
     <p>The JavaScript:</p>
     <pre class="lang-js prettyprint-override"><code>  $(document).ready(function(){

    var table = $('#example').DataTable( {
      ajax: {
        url : "http://localhost:7001/docdata",
        dataSrc: "doc"
      },
      columns: [
        { data: "spouse" },
        { data: "CNIC" },
        { data: "fatherName" },
        { data: "motherName" },
        { data: "employeeID" },
        { data: "age" }            
      ]
    } );
  });
</code></pre>
     <p>My URL returns your JSON. Because your JSON's data array is called <code>doc</code>, you need to use that name in the <code>dataSrc</code> option:</p>
     <pre><code>dataSrc: "doc"
</code></pre>
     <p>There is no need to manipulate any HTML strings.</p>
     <p>You should be able to take this and add in the extra pieces you may need - such as your URL, your use of session storage, and so on.</p>
     <p>My example generates the following:</p>
     <p><a href="https://i.stack.imgur.com/htOTv.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/htOTv.png" alt="enter image description here"></a></p>
    </div>
    <hr>
    <div class="comment">
     <table>
      <tbody>
       <tr>
        <td></td>
        <td><span>my URL uses GET request do I have to pass it here?</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 19:49</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Can you not try this for yourself? Try without using <code>"type" : "GET"</code> - and try <i>with</i> using <code>"type" : "GET"</code>. What happens in each case?</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 19:51</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Then also take a look at the documentation for <a href="https://api.jquery.com/jquery.ajax/" rel="nofollow noreferrer">jQuery ajax</a>. Scroll down to the <code>type</code> parameter and see what it says - especially see what the default value is.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 19:53</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Hey i am having an error which is cannot read the properties of undefined (reading 'length') can you help with that? @andrewJames</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 20:01</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I have no idea what your new code looks like. I have provided a working solution, where (as the first step you should take) the only thing you needed to change from my code was the URL. Did you do that? Otherwise, take a look at how to provide a <a href="https://stackoverflow.com/help/minimal-reproducible-example">minimal reproducible example</a>.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 20:12</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Thanks alot for the help. I edited your code according to myself and it worked for me. I have one issue its not getting age data it says Unknown parameter age. What could be the possible fix for this?</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 21:51</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>DataTables warning: table id=example - Requested unknown parameter 'age' for row 0, column 2. For more information about this error, please see <a href="http://datatables.net/tn/4" rel="nofollow noreferrer">datatables.net/tn/4</a> it throws this error @andrewJames</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 21:56</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I am glad you have something which (almost) works. But just to say again, I cannot tell you why <code>age</code> is not working because I cannot see your updated code. Please edit your question and add a <a href="https://stackoverflow.com/help/minimal-reproducible-example">minimal reproducible example</a> which allows us to recreate the issue you are having.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 22:15</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Thanks to you sir. I updated my code and posted it above its not reading age idont know why. And I appended my children column as well and its showing object I try to use map on it but idont know how to write in proper syntax of jquery datatable.</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 22:27</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Your HTML table has 6 <code>&lt;th&gt;</code> headings. Your DataTable is trying to create 7 <code>column</code> values. That will cause a problem. I don't know if that will fix your error. But it needs to be corrected, for sure.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 22:29</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I tried but it didnt worked out :) . Sorry to disturb you alot,</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 22:36</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>The age is available but its not finding it idont know why</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 22:37</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>Show your updated code.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 22:41</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>I updated the code in question :)</span> <span> - </span> <span class="display-name">Smitty's</span> <span> </span> <span class="date">28 May 2022 at 23:02</span></td>
       </tr>
       <tr>
        <td></td>
        <td><span>The code in your question works correctly for me (except your last 2 headings are the wrong way round). There must be something else you are not showing us. Try to create a MRE (emphasis on the "R" for "reproducible").</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">28 May 2022 at 23:07</span></td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>