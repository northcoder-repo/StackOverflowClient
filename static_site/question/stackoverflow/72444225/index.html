<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>SpringBoot. Thymeleaf. How to make table's column clickable to send request to Controller?</title>
  <link rel="stylesheet" type="text/css" href="/css/base.css">
  <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
            TeX: {
            extensions: ["begingroup.js"],
            noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
            Macros: { href: "{}" }
            },
            messageStyle: "none",
            styles: { ".MathJax_Display, .MathJax_Preview, .MathJax_Preview > *": { "background": "inherit" } },
            SEEditor: "mathjaxEditing"
            });
        </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML-full"></script>
 </head>
 <body>
  <div class="question">
   <a href="/questions">All Questions</a>
   <h2>SpringBoot. Thymeleaf. How to make table's column clickable to send request to Controller?</h2>
   <div class="container-metadata">
    <div>
     <span>Score: </span> <span>1</span>
    </div>
    <div>
     <span>Asker: </span> <span>surleversant</span>
    </div>
    <div>
     <span>Asked: </span> <span>31 May 2022 at 08:07</span>
    </div>
    <div>
     <a href="https://stackoverflow.com/questions/72444225/springboot-thymeleaf-how-to-make-tables-column-clickable-to-send-request-to-c">source</a>
    </div>
   </div>
   <div>
    <p>I've created table with 8 columns:</p>
    <p></p>
    <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
     <div class="snippet-code">
      <pre class="snippet-code-html lang-html prettyprint-override"><code>    &lt;table border="1" cellspacing="0" cellpadding="0"&gt;
      &lt;tr height="30"&gt;
        &lt;div th:each="horiz1, state : ${#numbers.sequence(1, 8)}"&gt;
            &lt;td width="30" th:value=${state.count} th:attr="action=@{/}" &gt;
            &lt;/td&gt;
        &lt;/div&gt;
      &lt;/tr&gt;
    &lt;/table&gt;  </code></pre>
     </div>
    </div>
    <p></p>
    <p>In fact each column (tag "td") should serve as a button and after clicking send me to controller (@PostMapping or @GetMapping), where I will try to read th:value. <strong>How to make it?</strong></p>
    <p>Instead of th:attr="action=@{/}" I've tried to use th:href="@{/}" - does not work. I've tried to insert between tags "td" the Form Button, but could not make it invisible and with size on complete size of column.</p>
    <p><strong>UPD</strong>. Full html code</p>
    <p></p>
    <div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
     <div class="snippet-code">
      <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;body&gt;  
    &lt;table border="1" cellspacing="0" cellpadding="0"&gt;
     &lt;div th:each="vert : ${#numbers.sequence(1, 4)}"&gt; 
      &lt;tr height="30"&gt;
        &lt;div th:each="horiz1, state : ${#numbers.sequence(1, 8)}"&gt;
            &lt;td width="30" th:value=${state.count} th:attr="action=@{/}" th:style="${state.odd}? 'background: #f4cd8d' : 'background: #745853'"&gt;
            &lt;/td&gt;
        &lt;/div&gt;
      &lt;/tr&gt;
      &lt;tr height="30"&gt;
        &lt;div th:each="horiz2, state : ${#numbers.sequence(1, 8)}"&gt;
            &lt;td width="30" th:style="${state.even}? 'background: #f4cd8d' : 'background: #745853' "&gt;&amp;nbsp;&lt;/td&gt;
        &lt;/div&gt;
      &lt;/tr&gt;
     &lt;/div&gt; 
    &lt;/table&gt;
&lt;/body&gt;</code></pre>
     </div>
    </div>
    <p></p>
    <p>I'm creating chess board. After clicking at any cell, it should go to Controller, make some calculations and highlite cell, where a horse can move.</p>
   </div>
   <div class="tags">
    <span class="tag">java</span><span class="tag">html</span><span class="tag">spring-boot</span><span class="tag">controller</span><span class="tag">thymeleaf</span>
   </div>
   <hr>
   <div class="comment">
    <table>
     <tbody>
      <tr>
       <td></td>
       <td><span>I am not sure what you are asking here. Some notes: (a) A <code>&lt;td&gt;</code> tag does not represent a column. It represents a cell. (b) Are you referring to <code>&lt;th&gt;</code> for column headers? (c) The question talks about <code>&lt;th&gt;</code> elements, but there are no such elements in your HTML fragment. (d) I would not use a <code>&lt;div&gt;</code> inside a <code>&lt;tr&gt;</code> element - instead place the <code>th:each</code> in the <code>&lt;tr&gt;</code> tag. See the <a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf#using-theach" rel="nofollow noreferrer">official documentation</a>.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">31 May 2022 at 12:43</span></td>
      </tr>
      <tr>
       <td></td>
       <td><span>Maybe if you show the end result (some HTML after it has been rendered by Thymeleaf) we would get a better understanding of what you are trying to achieve.</span> <span> - </span> <span class="display-name">andrewJames</span> <span> </span> <span class="date">31 May 2022 at 12:43</span></td>
      </tr>
      <tr>
       <td>1</td>
       <td><span>yep, feels like I've badly explained. I've added full code of html body (see above). there is no tag "th". when I've told "th" I mean thymeleaf. And yes: "td" means cell. So, clicking on cell, I want to go to Controller, where I want to get number of this cell. ..if you see better way to resolve this task, please, advise.</span> <span> - </span> <span class="display-name">surleversant</span> <span> </span> <span class="date">31 May 2022 at 13:21</span></td>
      </tr>
     </tbody>
    </table>
   </div>
   <br>
   <div>
    <h2 id="answer_1"><span>Answer 1</span></h2>
    <div class="container-metadata">
     <div>
      <span>Score: </span> <span>1</span>
     </div>
     <div>
      <span>Answerer: </span> <span>andrewJames</span>
     </div>
     <div>
      <span> Answered: </span> <span>31 May 2022 at 15:11</span>
     </div>
    </div>
    <div>
     <p><strong>Simplify the Thymeleaf</strong></p>
     <p>Parts of this may not be directly relevant to your core question, but there is a lot you can do to simplify the Thymeleaf which generates the chess table.</p>
     <p>By doing this, you can get rid of all the <code>&lt;div&gt;</code> elements you are currently using, and also make it easier to handle click events, later on:</p>
     <pre class="lang-html prettyprint-override"><code>&lt;table id="chessboard" border="1" cellspacing="0" cellpadding="0"&gt;
    &lt;tr height="30"
        th:each="row, rStat : ${#numbers.sequence(1, 8)}"&gt;
        &lt;td th:each="col, cStat : ${#numbers.sequence(1, 8)}"
            width="30" 
            th:data-row=${rStat.count} 
            th:data-col=${cStat.count} 
            th:style="${(rStat.odd and cStat.odd) or (rStat.even and cStat.even)} 
            ? 'background: #f4cd8d' : 'background: #745853'"&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
</code></pre>
     <p>The main differences here are:</p>
     <ul>
      <li>I place the Thymeleaf <code>th:each</code> iterators in the <code>&lt;tr&gt;</code> and <code>&lt;td&gt;</code> tags.</li>
      <li>I only have one piece of logic to handle coloring each square.</li>
      <li>I create two <code>data-</code> attributes in each <code>&lt;td&gt;</code> to uniquely identify each square.</li>
     </ul>
     <p>Just to note:</p>
     <p>You could argue that there is not much benefit from using Thymeleaf here, since basically everything is hard-coded in the Thymeleaf template. Normally, you would expect Thymeleaf to receive values from the controller - but for drawing the chess board, no such server-provided data is needed.</p>
     <p>It does allow for a more compact template, I suppose.</p>
     <hr>
     <p><strong>Clicking each Square</strong></p>
     <p>The resulting HTML generated by the above Thymeleaf has no click events. It's easier to add these events immediately following table HTML, in a <code>&lt;script&gt;...&lt;/script&gt;</code> tag - for example:</p>
     <pre class="lang-js prettyprint-override"><code>// get an array containing the &lt;td&gt; elements
var squares = document.getElementsByTagName('td');

// loop through that array, adding an event to each element:
for (i = 0; i &lt; squares.length; i++) {
  squares[i].addEventListener('click', function (e) {
    console.log('clicked on row ' + this.getAttribute('data-row') 
        + ' col ' + this.getAttribute('data-col'));
  });
}
</code></pre>
     <p>In my case, the click events just cause a line of informational text to be printed to the browser's console - for example:</p>
     <p><a href="https://i.stack.imgur.com/zFHEL.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/zFHEL.png" alt="enter image description here"></a></p>
     <p>In your case, you want to send this data (the row and column numbers) to your controller. That is a much bigger question.</p>
     <p>If you are not familiar with how to do this, you can research various questions - for example: <a href="https://stackoverflow.com/q/48612551/12567365">How to send js variable to Spring controller?</a> - and probably many more similar questions.</p>
     <p>If you get stuck, you can ask a new, more targeted, follow-up question.</p>
    </div>
    <hr>
    <div class="comment">
     <table>
     </table>
    </div>
   </div>
   <br>
   <div>
    <span>License: </span> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> <span>by </span> <a href="https://stackoverflow.com/legal/terms-of-service#licensing">Stack Overflow Inc.</a>
   </div>
  </div>
 </body>
</html>